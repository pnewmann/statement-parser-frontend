<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statement Scan - Portfolio Intelligence</title>
    <meta name="description" content="Upload any brokerage statement and get instant portfolio analytics, fee analysis, and actionable insights — completely free.">

    <!-- Open Graph / Facebook / iMessage -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://statementscan.app/">
    <meta property="og:title" content="Statement Scan - Portfolio Intelligence">
    <meta property="og:description" content="Upload any brokerage statement and get instant portfolio analytics, fee analysis, and actionable insights — completely free.">
    <meta property="og:image" content="https://statementscan.app/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Statement Scan">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://statementscan.app/">
    <meta name="twitter:title" content="Statement Scan - Portfolio Intelligence">
    <meta name="twitter:description" content="Upload any brokerage statement and get instant portfolio analytics, fee analysis, and actionable insights — completely free.">
    <meta name="twitter:image" content="https://statementscan.app/og-image.png">

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" sizes="48x48">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='6' fill='%23635bff'/><rect x='2' y='2' width='14' height='14' rx='3' fill='white'/><rect x='16' y='16' width='14' height='14' rx='3' fill='white'/><rect x='0' y='13' width='32' height='6' fill='white' opacity='0.4'/><rect x='11' y='11' width='10' height='10' rx='2' fill='white'/></svg>" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="manifest" href="manifest.json">
    <link rel="canonical" href="https://statementscan.app">
    <meta name="theme-color" content="#635bff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Statement Scan">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- pdf.js needed for brokerage detection on upload -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
        :root {
            --primary: #635bff;
            --primary-dark: #5851db;
            --primary-light: #7a73ff;
            --success: #30d158;
            --danger: #ff453a;
            --warning: #ffd60a;
            --text-primary: #0a2540;
            --text-secondary: #425466;
            --text-muted: #8898aa;
            --bg-primary: #ffffff;
            --bg-secondary: #f6f9fc;
            --bg-tertiary: #e3e8ee;
            --border: #e3e8ee;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;

            /* Stripe-inspired Design System */
            --accent-teal: #00D4AA;
            --accent-purple: #A259FF;
            --dark-section-bg: #0A2540;
            --dark-card-bg: #112840;
            --dark-border: #1E3A5F;
            --gradient-primary: linear-gradient(90deg, #635BFF, #A259FF);

            /* Spacing System - 8px base scale */
            --section-padding-y: 64px;
            --section-padding-y-sm: 48px;
            --section-padding-y-lg: 80px;
            --heading-gap: 16px;
            --content-gap: 56px;
            --section-divider-height: 60px;
        }

        @media (max-width: 768px) {
            :root {
                --section-padding-y: 64px;
                --section-padding-y-sm: 48px;
                --section-padding-y-lg: 80px;
                --content-gap: 40px;
                --section-divider-height: 48px;
            }
        }

        /* Gradient Text Utility - Enhanced for vibrancy */
        .gradient-text {
            background: linear-gradient(135deg, #635BFF 0%, #A259FF 50%, #00D4AA 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Dark Section Text Colors - Enhanced contrast */
        .text-white { color: #ffffff; }
        .text-light { color: rgba(255, 255, 255, 0.9); }
        .text-muted-light { color: #94A3B8; }

        /* Global Polish */
        html {
            scroll-behavior: smooth;
        }

        ::selection {
            background: rgba(99, 91, 255, 0.2);
            color: #0A2540;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 24px;
        }

        /* Announcement Bar */
        .announcement-bar {
            width: 100%;
            background: linear-gradient(90deg, #0A2540 0%, #112840 100%);
            color: #94A3B8;
            font-size: 13px;
            padding: 10px 0;
            text-align: center;
            border-bottom: 1px solid rgba(99, 91, 255, 0.15);
            position: relative;
            z-index: 1001;
        }

        .announcement-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .announcement-link {
            color: #A259FF;
            font-weight: 600;
            text-decoration: none;
            margin-left: 4px;
            transition: color 0.2s;
        }

        .announcement-link:hover {
            color: #FFFFFF;
        }

        .announcement-close {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #556B7E;
            font-size: 14px;
            cursor: pointer;
            padding: 4px 8px;
            transition: color 0.2s;
        }

        .announcement-close:hover {
            color: #FFFFFF;
        }

        @media (max-width: 768px) {
            .announcement-bar {
                padding: 8px 40px 8px 16px;
                font-size: 12px;
            }
            .announcement-inner {
                gap: 4px;
            }
        }

        /* Top Navigation */
        .top-nav {
            position: sticky;
            top: 0;
            left: 0;
            right: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            transition: background 0.3s ease, backdrop-filter 0.3s ease, box-shadow 0.3s ease, top 0.3s ease;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        }

        .nav-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 16px 24px;
        }

        :root[data-theme="dark"] .top-nav {
            background: rgba(30, 41, 59, 0.95);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .top-nav.navbar-scrolled {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 1px 0 var(--border);
        }

        :root[data-theme="dark"] .top-nav.navbar-scrolled {
            background: rgba(30, 41, 59, 0.95);
        }

        /* Navbar Layout - Three Sections */
        .nav-left {
            flex: 0 0 auto;
        }

        .nav-center {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* Nav Links */
        .nav-link {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 8px 16px;
            font-size: 15px;
            font-weight: 500;
            color: #425466;
            text-decoration: none;
            border-radius: 6px;
            transition: color 0.2s ease, background 0.2s ease;
            cursor: pointer;
            position: relative;
            background: transparent;
            border: none;
        }

        :root[data-theme="dark"] .nav-link {
            color: #C1C9D2;
        }

        .nav-link:hover {
            color: #0A2540;
            background: rgba(0, 0, 0, 0.04);
        }

        :root[data-theme="dark"] .nav-link:hover {
            color: #FFFFFF;
            background: rgba(255, 255, 255, 0.06);
        }

        /* Nav Link Chevron */
        .nav-link-chevron {
            width: 10px;
            height: 10px;
            transition: transform 0.2s ease;
            opacity: 0.6;
        }

        .nav-item:hover .nav-link-chevron,
        .nav-item.active .nav-link-chevron {
            transform: rotate(180deg);
        }

        /* Nav Item Container */
        .nav-item {
            position: relative;
        }

        /* Dropdown Mega Menu */
        .nav-dropdown {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-8px);
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(10, 37, 64, 0.15);
            border: 1px solid rgba(0, 0, 0, 0.06);
            padding: 24px 32px;
            min-width: 280px;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s ease;
            z-index: 1001;
        }

        .nav-dropdown.dropdown-wide {
            min-width: 520px;
        }

        :root[data-theme="dark"] .nav-dropdown {
            background: #112840;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        /* Hover bridge - invisible connector between nav link and dropdown */
        .nav-item::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            height: 20px;
            background: transparent;
            display: none;
        }

        .nav-item:hover::after {
            display: block;
        }

        .nav-item:hover .nav-dropdown,
        .nav-item.active .nav-dropdown {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
            transform: translateX(-50%) translateY(0);
        }

        /* Dropdown Columns */
        .dropdown-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
        }

        .dropdown-column-title {
            font-size: 11px;
            font-weight: 600;
            color: #8898AA;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 16px;
        }

        :root[data-theme="dark"] .dropdown-column-title {
            color: #8898AA;
        }

        /* Dropdown Items */
        .dropdown-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            margin: 0 -12px;
            border-radius: 8px;
            text-decoration: none;
            cursor: pointer;
            transition: background 0.15s ease;
        }

        .dropdown-item:hover {
            background: rgba(99, 91, 255, 0.04);
        }

        :root[data-theme="dark"] .dropdown-item:hover {
            background: rgba(99, 91, 255, 0.1);
        }

        .dropdown-item-icon {
            font-size: 20px;
            line-height: 1;
            flex-shrink: 0;
            width: 24px;
            text-align: center;
        }

        .dropdown-item-content {
            flex: 1;
            min-width: 0;
        }

        .dropdown-item-title {
            font-size: 15px;
            font-weight: 600;
            color: #0A2540;
            margin-bottom: 2px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        :root[data-theme="dark"] .dropdown-item-title {
            color: #FFFFFF;
        }

        .dropdown-item-desc {
            font-size: 13px;
            color: #425466;
            line-height: 1.4;
        }

        :root[data-theme="dark"] .dropdown-item-desc {
            color: #8898AA;
        }

        /* Coming Soon Tag */
        .tag-coming-soon {
            display: inline-block;
            background: #E3E8EE;
            color: #425466;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.02em;
        }

        :root[data-theme="dark"] .tag-coming-soon {
            background: rgba(255, 255, 255, 0.1);
            color: #8898AA;
        }

        /* Create Account Button */
        .btn-get-started {
            background: #635BFF;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 20px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .btn-get-started:hover {
            background: #4B45C6;
        }

        /* Mobile Menu Button */
        .mobile-menu-btn {
            display: none;
            background: transparent;
            border: none;
            padding: 8px;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .mobile-menu-btn svg {
            width: 24px;
            height: 24px;
        }

        /* Mobile Menu Overlay */
        .mobile-menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            z-index: 2000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            overflow-y: auto;
        }

        :root[data-theme="dark"] .mobile-menu-overlay {
            background: #0A2540;
        }

        .mobile-menu-overlay.open {
            transform: translateX(0);
        }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        }

        :root[data-theme="dark"] .mobile-menu-header {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .mobile-menu-close {
            background: transparent;
            border: none;
            padding: 8px;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 24px;
            line-height: 1;
        }

        .mobile-menu-content {
            padding: 16px 24px;
        }

        /* Mobile Accordion */
        .mobile-accordion {
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        }

        :root[data-theme="dark"] .mobile-accordion {
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }

        .mobile-accordion-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 16px 0;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            text-align: left;
        }

        .mobile-accordion-header svg {
            width: 20px;
            height: 20px;
            transition: transform 0.2s ease;
            color: var(--text-muted);
        }

        .mobile-accordion.open .mobile-accordion-header svg {
            transform: rotate(180deg);
        }

        .mobile-accordion-content {
            display: none;
            padding-bottom: 16px;
        }

        .mobile-accordion.open .mobile-accordion-content {
            display: block;
        }

        .mobile-dropdown-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 0;
            text-decoration: none;
            cursor: pointer;
        }

        .mobile-menu-actions {
            padding: 24px 0;
            display: flex;
            flex-direction: column;
            gap: 12px;
            border-top: 1px solid rgba(0, 0, 0, 0.08);
            margin-top: 16px;
        }

        :root[data-theme="dark"] .mobile-menu-actions {
            border-top: 1px solid rgba(255, 255, 255, 0.08);
        }

        .mobile-menu-actions .btn {
            width: 100%;
            justify-content: center;
        }

        .mobile-menu-actions .btn-get-started {
            width: 100%;
            padding: 14px 20px;
        }

        /* Mobile Nav Link (no dropdown) */
        .mobile-nav-link {
            display: block;
            padding: 16px 0;
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            text-decoration: none;
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        }

        :root[data-theme="dark"] .mobile-nav-link {
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }

        /* Navbar Mobile Responsive */
        @media (max-width: 768px) {
            .nav-center {
                display: none;
            }

            .btn-get-started {
                display: none;
            }

            .mobile-menu-btn {
                display: flex;
            }

            .mobile-menu-overlay {
                display: block;
            }

            .nav-inner {
                padding: 12px 16px;
            }
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--primary);
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(99, 91, 255, 0.25);
        }

        .logo-icon svg {
            width: 22px;
            height: 22px;
        }

        .brand-text {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .brand-name {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.01em;
            line-height: 1.2;
        }

        .brand-tagline {
            font-size: 0.625rem;
            font-weight: 500;
            color: var(--text-muted);
            letter-spacing: 0.04em;
            text-transform: uppercase;
            margin-top: 2px;
        }

        h1 {
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.02em;
            line-height: 1.1;
        }

        /* Hero Typography */
        .hero-headline {
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.02em;
            line-height: 1.1;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            h1, .hero-headline {
                font-size: 2.25rem;
            }
        }

        /* Section Headings */
        .section-title {
            font-size: 2.75rem;
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        /* ========== SCROLL ANIMATIONS ========== */
        [data-animate] {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        [data-animate].animated {
            opacity: 1;
            transform: translateY(0);
        }

        /* Staggered children animations */
        [data-animate-child] > *:nth-child(1) { transition-delay: 0ms; }
        [data-animate-child] > *:nth-child(2) { transition-delay: 100ms; }
        [data-animate-child] > *:nth-child(3) { transition-delay: 200ms; }
        [data-animate-child] > *:nth-child(4) { transition-delay: 300ms; }
        [data-animate-child] > *:nth-child(5) { transition-delay: 400ms; }
        [data-animate-child] > *:nth-child(6) { transition-delay: 500ms; }

        /* Accessibility: Reduce motion for users who prefer it */
        @media (prefers-reduced-motion: reduce) {
            [data-animate] {
                opacity: 1;
                transform: none;
                transition: none;
            }
            [data-animate-child] > * {
                transition-delay: 0ms !important;
            }
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            text-align: center;
            max-width: 480px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Cards */
        .card {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border);
            padding: 24px;
            transition: box-shadow 0.2s, transform 0.2s;
        }

        .card:hover {
            box-shadow: var(--shadow-md);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Upload Section */
        .upload-card {
            max-width: 600px;
            margin: 0 auto;
            padding: 48px;
            text-align: center;
        }

        .upload-card.dragover {
            border-color: var(--primary);
            background: rgba(99, 91, 255, 0.04);
        }

        .upload-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 24px;
            background: var(--bg-secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .upload-icon svg {
            width: 28px;
            height: 28px;
            color: var(--primary);
        }

        .upload-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .upload-hint {
            color: var(--text-muted);
            font-size: 0.875rem;
            margin-bottom: 12px;
        }

        .upload-free-badge {
            display: block;
            font-size: 12px;
            color: #94A3B8;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Coming Soon Card Styles */
        .coming-soon-card {
            position: relative;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
        }

        .coming-soon-badge {
            position: absolute;
            top: 16px;
            right: 16px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .coming-soon-icon {
            background: linear-gradient(135deg, rgba(99, 91, 255, 0.1) 0%, rgba(99, 91, 255, 0.05) 100%);
        }

        .coming-soon-features {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 24px 0;
            text-align: left;
            max-width: 280px;
            margin-left: auto;
            margin-right: auto;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .feature-item svg {
            color: var(--success);
            flex-shrink: 0;
        }

        .coming-soon-note {
            margin-top: 16px;
            font-size: 0.8rem;
            color: var(--text-muted);
            max-width: 320px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.5;
        }

        #fileInput {
            display: none;
        }

        /* PII Redaction Option */
        .redact-pii-option {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 20px;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            border: 1px solid var(--border);
        }

        .redact-pii-label {
            display: flex;
            flex-direction: column;
            text-align: left;
        }

        .redact-pii-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .redact-pii-hint {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 2px;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
            flex-shrink: 0;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-tertiary);
            transition: 0.3s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }

        .toggle-switch input:checked + .toggle-slider {
            background-color: var(--primary);
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(20px);
        }

        .toggle-switch input:focus + .toggle-slider {
            box-shadow: 0 0 0 2px rgba(99, 91, 255, 0.2);
        }

        /* Multi-file Upload Queue */
        .upload-queue {
            margin-top: 24px;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            overflow: hidden;
            max-height: 300px;
            overflow-y: auto;
        }

        .upload-queue-header {
            padding: 12px 16px;
            background: var(--bg-secondary);
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--text-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
        }

        .upload-queue-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-top: 1px solid var(--border);
            gap: 12px;
        }

        .upload-queue-item:first-of-type {
            border-top: none;
        }

        .upload-file-icon {
            width: 36px;
            height: 36px;
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .upload-file-icon svg {
            width: 18px;
            height: 18px;
            color: var(--primary);
        }

        .upload-file-icon.success {
            background: #dcfce7;
        }

        .upload-file-icon.success svg {
            color: var(--success);
        }

        .upload-file-icon.error {
            background: #fee2e2;
        }

        .upload-file-icon.error svg {
            color: #ef4444;
        }

        .upload-file-icon.processing {
            background: #e0e7ff;
        }

        .upload-file-info {
            flex: 1;
            min-width: 0;
        }

        .upload-file-name {
            font-weight: 500;
            color: var(--text-primary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .upload-file-status {
            font-size: 0.8125rem;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .upload-file-status.success {
            color: var(--success);
        }

        .upload-file-status.error {
            color: #ef4444;
        }

        .upload-progress-bar {
            width: 100%;
            height: 4px;
            background: var(--bg-tertiary);
            border-radius: 2px;
            margin-top: 6px;
            overflow: hidden;
        }

        .upload-progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .upload-summary {
            display: flex;
            gap: 16px;
            margin-top: 16px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            justify-content: center;
        }

        .upload-summary-stat {
            text-align: center;
        }

        .upload-summary-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .upload-summary-value.success {
            color: var(--success);
        }

        .upload-summary-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Entry Method Selector */
        .entry-methods {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 24px;
            padding: 6px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .entry-method-btn {
            flex: 1;
            padding: 12px 16px;
            border: none;
            background: transparent;
            border-radius: var(--radius-sm);
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .entry-method-btn:hover {
            color: var(--text-primary);
        }

        .entry-method-btn.active {
            background: var(--bg-primary);
            color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .entry-method-btn svg {
            width: 18px;
            height: 18px;
        }

        .entry-panel {
            display: none;
        }

        .entry-panel.active {
            display: block;
        }

        /* Manual Entry */
        .manual-entry-card {
            max-width: 700px;
            margin: 0 auto;
            padding: 32px;
        }

        .manual-entry-form {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .manual-entry-form .form-group {
            flex: 1;
            min-width: 120px;
        }

        .manual-entry-form label {
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .manual-entry-form input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: 0.9375rem;
            background: var(--bg-primary);
            transition: border-color 0.2s;
        }

        .manual-entry-form input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .manual-entry-form input::placeholder {
            color: var(--text-muted);
        }

        .manual-entry-form .btn-add {
            align-self: flex-end;
            padding: 10px 20px;
        }

        /* Input Mode Toggle */
        .input-mode-toggle {
            display: flex;
            justify-content: center;
            gap: 8px;
            padding: 6px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            max-width: 280px;
            margin: 0 auto 20px;
        }

        .mode-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 10px 16px;
            border: none;
            background: transparent;
            border-radius: var(--radius-sm);
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .mode-btn:hover {
            color: var(--text-primary);
        }

        .mode-btn.active {
            background: var(--bg-primary);
            color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .mode-btn svg {
            width: 16px;
            height: 16px;
        }

        .manual-entry-form .form-group .price-loading {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
        }

        .holdings-list {
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            overflow: hidden;
            margin-bottom: 24px;
        }

        .holdings-list-header {
            display: grid;
            grid-template-columns: 2fr 1.5fr 1.5fr 1.5fr auto;
            gap: 12px;
            padding: 12px 16px;
            background: var(--bg-secondary);
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .holdings-list-header.percent-mode {
            grid-template-columns: 1.5fr 0.8fr 1fr 1fr 1.2fr 40px;
        }

        .holdings-list-item.percent-mode {
            grid-template-columns: 1.5fr 0.8fr 1fr 1fr 1.2fr 40px;
        }

        .holdings-list-empty {
            padding: 48px 24px;
            text-align: center;
            color: var(--text-muted);
        }

        .holdings-list-item {
            display: grid;
            grid-template-columns: 2fr 1.5fr 1.5fr 1.5fr auto;
            gap: 12px;
            padding: 14px 16px;
            border-top: 1px solid var(--border);
            align-items: center;
        }

        .holdings-list-item:first-of-type {
            border-top: none;
        }

        .holding-symbol {
            font-weight: 600;
            color: var(--text-primary);
        }

        .holding-percent {
            font-weight: 500;
            color: var(--primary);
        }

        /* Stock search autocomplete */
        .symbol-input-wrapper {
            position: relative;
            width: 100%;
        }

        .stock-search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow-lg);
            max-height: 280px;
            overflow-y: auto;
            z-index: 100;
            display: none;
        }

        .stock-search-results.visible {
            display: block;
        }

        .stock-search-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            cursor: pointer;
            border-bottom: 1px solid var(--border);
            transition: background 0.15s;
        }

        .stock-search-item:last-child {
            border-bottom: none;
        }

        .stock-search-item:hover {
            background: var(--bg-secondary);
        }

        .stock-search-item .symbol {
            font-weight: 600;
            color: var(--primary);
            min-width: 60px;
        }

        .stock-search-item .name {
            flex: 1;
            color: var(--text-primary);
            font-size: 0.875rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .stock-search-item .type {
            font-size: 0.7rem;
            padding: 2px 6px;
            background: var(--bg-secondary);
            border-radius: 4px;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .stock-search-loading {
            padding: 12px;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        .stock-search-empty {
            padding: 12px;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        .holding-value {
            color: var(--text-secondary);
        }

        .holding-total {
            font-weight: 600;
            color: var(--success);
        }

        .btn-remove {
            width: 32px;
            height: 32px;
            padding: 0;
            border: none;
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .btn-remove:hover {
            background: #fee2e2;
            color: #ef4444;
        }

        .manual-entry-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .manual-total {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        .manual-total strong {
            color: var(--text-primary);
            font-size: 1.25rem;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 10px 18px;
            font-size: 0.875rem;
            font-weight: 600;
            border-radius: var(--radius-md);
            border: none;
            cursor: pointer;
            transition: all 0.15s ease;
            text-decoration: none;
        }

        .btn-primary {
            background: #635BFF;
            color: white;
            border-radius: 12px;
            font-weight: 600;
            padding: 14px 28px;
            transition: all 0.2s ease;
        }

        .btn-primary:hover {
            background: #4B45C6;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(99, 91, 255, 0.4);
        }

        /* Subtle pulse animation for primary CTA buttons on page load */
        @keyframes subtlePulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(99, 91, 255, 0.4); }
            50% { box-shadow: 0 0 0 12px rgba(99, 91, 255, 0); }
        }

        .hero-upload-card .btn-primary {
            animation: subtlePulse 2s ease 1s 1;
        }

        .btn-secondary {
            background: var(--bg-primary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--bg-secondary);
            border-color: var(--text-muted);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Account List */
        .accounts-section {
            margin-top: 32px;
        }

        .accounts-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .accounts-header h3 {
            font-size: 1rem;
            font-weight: 600;
        }

        .account-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            margin-bottom: 8px;
        }

        .account-icon {
            width: 40px;
            height: 40px;
            min-width: 40px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .account-icon.has-favicon {
            background: #FFFFFF;
            border: 1px solid rgba(0, 0, 0, 0.08);
        }

        .account-icon.no-favicon {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .account-favicon {
            width: 24px;
            height: 24px;
            object-fit: contain;
        }

        .account-icon-fallback {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            font-weight: 600;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            border-radius: var(--radius-sm);
        }

        .account-details {
            flex: 1;
        }

        .account-name-input {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            padding: 8px 12px;
            font-size: 0.9375rem;
            color: var(--text-primary);
            font-family: inherit;
        }

        .account-name-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 91, 255, 0.1);
        }

        .account-meta {
            color: var(--text-muted);
            font-size: 0.8125rem;
            margin-top: 4px;
        }

        .account-value {
            font-weight: 600;
            font-size: 1.125rem;
            color: var(--success);
        }

        .remove-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius-sm);
            transition: all 0.15s;
        }

        .remove-btn:hover {
            background: rgba(255, 69, 58, 0.1);
            color: var(--danger);
        }

        .actions-row {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        /* Progress */
        .progress-section {
            display: none;
            text-align: center;
            padding: 60px 40px;
        }

        .spinner {
            width: 48px;
            height: 48px;
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 24px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .spin {
            animation: spin 1s linear infinite;
        }

        .progress-text {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Enhanced Progress Indicator */
        .progress-container {
            max-width: 500px;
            margin: 0 auto;
        }

        .progress-stages {
            display: flex;
            justify-content: space-between;
            margin-bottom: 24px;
            position: relative;
        }

        .progress-stages::before {
            content: '';
            position: absolute;
            top: 16px;
            left: 40px;
            right: 40px;
            height: 2px;
            background: var(--border);
            z-index: 0;
        }

        .progress-stage {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            position: relative;
            z-index: 1;
        }

        .progress-stage-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .progress-stage.active .progress-stage-icon {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
            animation: pulse-stage 1.5s ease-in-out infinite;
        }

        .progress-stage.completed .progress-stage-icon {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        @keyframes pulse-stage {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(99, 91, 255, 0.4); }
            50% { transform: scale(1.05); box-shadow: 0 0 0 8px rgba(99, 91, 255, 0); }
        }

        .progress-stage-label {
            font-size: 12px;
            color: var(--text-muted);
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .progress-stage.active .progress-stage-label,
        .progress-stage.completed .progress-stage-label {
            color: var(--text-primary);
        }

        .progress-bar-container {
            background: var(--bg-secondary);
            border-radius: 8px;
            height: 8px;
            overflow: hidden;
            margin-bottom: 16px;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            border-radius: 8px;
            transition: width 0.3s ease;
            position: relative;
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 1.5s ease-in-out infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .progress-percentage {
            font-weight: 600;
            color: var(--primary);
        }

        .progress-time {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .progress-time svg {
            width: 14px;
            height: 14px;
        }

        .progress-details {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 16px;
        }

        .progress-file-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 12px;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            font-size: 13px;
        }

        .progress-file-info svg {
            width: 16px;
            height: 16px;
            color: var(--primary);
        }

        .progress-tip {
            margin-top: 24px;
            padding: 12px 16px;
            background: rgba(99, 91, 255, 0.08);
            border-radius: var(--radius-md);
            font-size: 13px;
            color: var(--text-secondary);
        }

        .progress-tip strong {
            color: var(--primary);
        }

        /* Error */
        .error-message {
            background: rgba(255, 69, 58, 0.08);
            border: 1px solid rgba(255, 69, 58, 0.2);
            color: var(--danger);
            padding: 16px 20px;
            border-radius: var(--radius-md);
            margin-bottom: 24px;
            display: none;
            font-size: 0.9375rem;
        }

        /* Dashboard (Portfolio Analysis) */
        .dashboard {
            display: none;
            width: 100%;
            background: var(--bg-secondary);
            min-height: calc(100vh - 72px);
            padding: 48px 24px 80px;
        }

        .dashboard > * {
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .dashboard-title {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .dashboard-logo {
            width: 44px;
            height: 44px;
            background: var(--primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(99, 91, 255, 0.25);
        }

        .dashboard-logo svg {
            width: 28px;
            height: 28px;
        }

        .dashboard-title h2 {
            font-size: 1.75rem;
            font-weight: 700;
        }

        .total-badge {
            background: linear-gradient(135deg, var(--success) 0%, #28a745 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 100px;
            font-weight: 600;
            font-size: 1.125rem;
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            background: var(--bg-primary);
            padding: 8px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border);
            margin-bottom: 32px;
        }

        .tab {
            padding: 8px 14px;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-secondary);
            background: var(--bg-secondary);
            border: 1px solid transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.15s;
            white-space: nowrap;
        }

        .tab:hover {
            color: var(--text-primary);
            background: var(--bg-tertiary);
            border-color: var(--border);
        }

        .tab.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .tabs-primary {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            flex: 1;
        }

        .tabs-more {
            position: relative;
        }

        .tabs-more-btn {
            padding: 8px 14px;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-secondary);
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .tabs-more-btn:hover {
            background: var(--bg-tertiary);
        }

        .tabs-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 4px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            min-width: 180px;
            z-index: 100;
            display: none;
        }

        .tabs-dropdown.show {
            display: block;
        }

        .tabs-dropdown .tab {
            display: block;
            width: 100%;
            text-align: left;
            border-radius: 0;
            border: none;
            background: transparent;
        }

        .tabs-dropdown .tab:first-child {
            border-radius: var(--radius-md) var(--radius-md) 0 0;
        }

        .tabs-dropdown .tab:last-child {
            border-radius: 0 0 var(--radius-md) var(--radius-md);
        }

        .tabs-dropdown .tab:hover {
            background: var(--bg-secondary);
        }

        .tabs-dropdown .tab.active {
            background: rgba(99, 91, 255, 0.1);
            color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Insights Section */
        .insights-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .insights-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .insights-header h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .insights-subtitle {
            color: var(--text-muted);
            font-size: 0.9375rem;
        }

        .insights-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .insight-card {
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            padding: 20px 24px;
            border: 1px solid var(--border);
            border-left: 4px solid var(--primary);
            transition: box-shadow 0.2s ease, transform 0.2s ease;
        }

        .insight-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transform: translateY(-2px);
        }

        .insight-card.insight-warning {
            border-left-color: var(--warning);
            background: linear-gradient(to right, rgba(255, 214, 10, 0.05), transparent);
        }

        .insight-card.insight-positive {
            border-left-color: var(--success);
            background: linear-gradient(to right, rgba(48, 209, 88, 0.05), transparent);
        }

        .insight-card.insight-info {
            border-left-color: var(--primary);
        }

        .insight-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .insight-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .insight-warning .insight-icon {
            background: rgba(255, 214, 10, 0.15);
        }

        .insight-positive .insight-icon {
            background: rgba(48, 209, 88, 0.15);
        }

        .insight-info .insight-icon {
            background: rgba(99, 91, 255, 0.15);
        }

        .insight-category {
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            background: var(--bg-secondary);
            padding: 4px 8px;
            border-radius: 4px;
        }

        .insight-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 6px;
        }

        .insight-text {
            font-size: 0.9375rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .no-insights {
            text-align: center;
            padding: 48px 24px;
            color: var(--text-muted);
        }

        .no-insights svg {
            width: 48px;
            height: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            padding: 20px;
            border: 1px solid var(--border);
        }

        .stat-label {
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-muted);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .stat-value.positive {
            color: var(--success);
        }

        .stat-value.negative {
            color: var(--danger);
        }

        .stat-subtitle {
            font-size: 0.8125rem;
            color: var(--text-muted);
            margin-top: 4px;
        }

        /* Charts */
        .chart-card {
            margin-bottom: 24px;
        }

        .chart-wrapper {
            position: relative;
            height: 320px;
        }

        .charts-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        /* Performance Returns */
        .period-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .period-btn {
            padding: 10px 20px;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.15s;
        }

        .period-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .period-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .returns-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 32px;
        }

        .return-card {
            text-align: center;
            padding: 20px 16px;
            cursor: pointer;
            transition: all 0.15s;
        }

        .return-card:hover {
            border-color: var(--primary);
        }

        .return-card.active {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 91, 255, 0.1);
        }

        .return-card .stat-value {
            font-size: 1.5rem;
        }

        .benchmark-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 8px;
        }

        /* World Map */
        .map-container {
            position: relative;
            padding: 24px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
        }

        #worldMapContainer {
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
        }

        #worldMapContainer svg {
            width: 100%;
            height: auto;
            display: block;
        }

        .country {
            fill: #dce3eb;
            stroke: #fff;
            stroke-width: 0.4;
            transition: fill 0.2s;
        }

        .country:hover {
            opacity: 0.85;
        }

        .country.us { fill: var(--primary); }
        .country.developed { fill: #a5b4fc; }
        .country.emerging { fill: #fbbf24; }

        .map-legend {
            display: flex;
            justify-content: center;
            gap: 32px;
            margin-top: 24px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9375rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .legend-dot {
            width: 14px;
            height: 14px;
            border-radius: 4px;
        }

        .legend-dot.us { background: var(--primary); }
        .legend-dot.developed { background: #a5b4fc; }
        .legend-dot.emerging { background: #fbbf24; }

        /* Scenario Analysis */
        .scenarios-container {
            display: grid;
            gap: 16px;
        }

        .scenario-card {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 16px;
            align-items: center;
        }

        .scenario-info h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .scenario-info p {
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        .scenario-impact {
            text-align: right;
        }

        .scenario-pct {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .scenario-pct.positive { color: var(--success); }
        .scenario-pct.negative { color: var(--danger); }

        .scenario-value {
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        .scenario-bar-container {
            grid-column: 1 / -1;
            height: 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .scenario-bar {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .scenario-bar.positive { background: var(--success); }
        .scenario-bar.negative { background: var(--danger); }

        /* Sector Comparison */
        .sector-list {
            display: grid;
            gap: 16px;
        }

        .sector-item {
            display: grid;
            grid-template-columns: 140px 1fr 70px 70px;
            gap: 16px;
            align-items: center;
        }

        .sector-name {
            font-size: 0.9375rem;
            font-weight: 500;
        }

        .sector-bar-container {
            position: relative;
            height: 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            overflow: hidden;
        }

        .sector-bar {
            position: absolute;
            height: 100%;
            border-radius: 4px;
        }

        .sector-bar.portfolio {
            background: var(--primary);
            z-index: 2;
        }

        .sector-bar.benchmark {
            background: var(--bg-tertiary);
            z-index: 1;
        }

        .sector-pct {
            font-size: 0.875rem;
            text-align: right;
            font-weight: 500;
            font-variant-numeric: tabular-nums;
        }

        .sector-pct.portfolio { color: var(--primary); }
        .sector-pct.benchmark { color: var(--text-muted); }

        /* Risk Cards */
        .risk-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .risk-card {
            text-align: center;
            padding: 28px 20px;
        }

        .risk-value {
            font-size: 2.25rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .risk-label {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .risk-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Holdings Table */
        .table-container {
            overflow-x: auto;
            border-radius: var(--radius-md);
            border: 1px solid var(--border);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9375rem;
        }

        th, td {
            padding: 14px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: var(--bg-secondary);
            font-weight: 600;
            font-size: 0.8125rem;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            color: var(--text-secondary);
        }

        tbody tr:hover {
            background: var(--bg-secondary);
        }

        tbody tr:last-child td {
            border-bottom: none;
        }

        .text-right {
            text-align: right;
        }

        .font-mono {
            font-variant-numeric: tabular-nums;
        }

        .symbol-cell {
            font-weight: 600;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .badge-primary {
            background: rgba(99, 91, 255, 0.1);
            color: var(--primary);
        }

        .badge-secondary {
            background: var(--bg-secondary);
            color: var(--text-secondary);
        }

        .total-row {
            background: var(--bg-secondary);
            font-weight: 600;
        }

        /* Top Holdings */
        .holdings-list {
            display: grid;
            gap: 12px;
        }

        .holding-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .holding-item:last-child {
            border-bottom: none;
        }

        .holding-rank {
            width: 28px;
            height: 28px;
            background: var(--bg-secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .holding-info {
            flex: 1;
        }

        .holding-symbol {
            font-weight: 600;
        }

        .holding-values {
            text-align: right;
        }

        .holding-amount {
            font-weight: 600;
        }

        .holding-pct {
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 40px 0;
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        /* ========== LANDING PAGE SECTIONS ========== */

        /* Hero Subheadline */
        .hero-subheadline {
            color: var(--primary);
            font-size: 1.125rem;
            font-weight: 500;
            text-align: center;
            margin-top: 12px;
            opacity: 0.9;
        }

        /* Landing Sections Container */
        .landing-sections {
            margin-top: 0;
            margin-bottom: 0;
        }

        .landing-section {
            padding: var(--section-padding-y) 0;
        }

        .section-header {
            text-align: center;
            margin-bottom: 48px;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.02em;
            margin-bottom: 12px;
        }

        .section-subtitle {
            font-size: 1.125rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .section-heading {
            font-size: 44px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: var(--heading-gap);
            text-align: center;
            letter-spacing: -0.03em;
        }

        .section-subheading {
            font-size: 1.125rem;
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: var(--content-gap);
            text-align: center;
        }

        /* ========== HERO SECTION - STRIPE-INSPIRED ========== */
        .hero-section {
            width: 100%;
            padding: 48px 0 48px;
            position: relative;
            background:
                radial-gradient(ellipse 80% 60% at 15% 45%, rgba(99, 91, 255, 0.1) 0%, transparent 60%),
                radial-gradient(ellipse 60% 80% at 85% 25%, rgba(0, 212, 170, 0.07) 0%, transparent 55%),
                radial-gradient(ellipse 50% 50% at 50% 90%, rgba(162, 89, 255, 0.06) 0%, transparent 50%),
                linear-gradient(180deg, #F6F9FC 0%, #EEF2F7 100%);
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image: radial-gradient(circle, rgba(99, 91, 255, 0.05) 1px, transparent 1px);
            background-size: 28px 28px;
            pointer-events: none;
            z-index: 0;
        }

        .hero-inner {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            position: relative;
            z-index: 1;
        }

        /* Hero page load animation */
        .hero-inner [data-hero-animate] {
            opacity: 0;
            transform: translateY(24px);
            animation: heroFadeIn 0.7s ease forwards;
        }

        @keyframes heroFadeIn {
            to { opacity: 1; transform: translateY(0); }
        }

        /* Section Dividers - Stripe-style waves */
        .section-divider {
            line-height: 0;
            margin: 0;
            padding: 0;
            height: var(--section-divider-height);
            overflow: hidden;
        }

        .section-divider svg {
            display: block;
            width: 100%;
            height: 100%;
        }

        .section-divider-inverted {
            transform: rotate(180deg);
        }

        /* Light to Dark transition (preview → value-props) */
        .section-divider-light-to-dark {
            background: transparent;
        }

        /* Dark to Light transition (value-props → trust) */
        .section-divider-dark-to-light {
            background: #0A2540;
        }

        .hero-grid {
            display: grid;
            grid-template-columns: 1.1fr 0.9fr;
            gap: 60px;
            align-items: start;
            max-width: 1200px;
            margin: 0 auto;
        }

        .hero-content {
            max-width: 560px;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(99, 91, 255, 0.1);
            color: var(--primary);
            font-size: 0.8125rem;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 50px;
            margin-bottom: 24px;
        }

        .hero-badge svg {
            width: 16px;
            height: 16px;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.1;
            letter-spacing: -0.02em;
            margin-bottom: 24px;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 36px;
            max-width: 480px;
        }

        .hero-ctas {
            display: flex;
            align-items: center;
            gap: 24px;
            flex-wrap: wrap;
        }

        .hero-cta-primary {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--primary);
            color: white;
            font-size: 1rem;
            font-weight: 600;
            padding: 16px 28px;
            border-radius: var(--radius-md);
            border: none;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
            box-shadow: 0 4px 14px rgba(99, 91, 255, 0.35);
        }

        .hero-cta-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 91, 255, 0.4);
        }

        .hero-cta-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            color: var(--text-secondary);
            font-size: 0.9375rem;
            font-weight: 500;
            text-decoration: none;
            transition: color 0.2s;
        }

        .hero-cta-link:hover {
            color: var(--primary);
        }

        .hero-cta-link svg {
            width: 16px;
            height: 16px;
            transition: transform 0.2s;
        }

        .hero-cta-link:hover svg {
            transform: translateX(3px);
        }

        .hero-trust-line {
            font-size: 13px;
            color: #94A3B8;
            margin-top: 20px;
            letter-spacing: 0.01em;
        }

        /* Hero Upload Widget */
        .hero-upload-wrapper {
            position: relative;
        }

        .hero-upload-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120%;
            height: 120%;
            background: radial-gradient(circle, rgba(99, 91, 255, 0.15) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        .hero-upload-card {
            position: relative;
            z-index: 1;
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            border: 1px solid rgba(10, 37, 64, 0.04);
            padding: 40px;
            box-shadow: 0 25px 60px rgba(10, 37, 64, 0.12), 0 0 0 1px rgba(10, 37, 64, 0.04);
            transition: transform 0.4s ease, box-shadow 0.4s ease;
        }

        .hero-upload-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 35px 80px rgba(10, 37, 64, 0.16), 0 0 0 1px rgba(10, 37, 64, 0.04);
        }

        .hero-upload-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 40px 80px rgba(10, 37, 64, 0.15);
        }

        @media (max-width: 900px) {
            .hero-grid {
                grid-template-columns: 1fr;
                gap: 48px;
                text-align: center;
            }

            .hero-content {
                max-width: 100%;
            }

            .hero-title {
                font-size: 2.5rem;
            }

            .hero-subtitle {
                margin-left: auto;
                margin-right: auto;
            }

            .hero-ctas {
                justify-content: center;
            }

            .hero-badge {
                margin-left: auto;
                margin-right: auto;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 2rem;
            }

            .hero-subtitle {
                font-size: 1.0625rem;
            }

            .hero-ctas {
                flex-direction: column;
                gap: 16px;
            }
        }

        /* Upload Drop Area (inside hero) */
        .upload-drop-area {
            text-align: center;
            padding: 32px 24px;
            border: 2px dashed #CBD5E1;
            border-radius: var(--radius-lg);
            margin: 8px;
            background: linear-gradient(180deg, rgba(99, 91, 255, 0.02) 0%, rgba(99, 91, 255, 0.05) 100%);
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .upload-drop-area:hover {
            border-color: var(--primary);
            background: linear-gradient(180deg, rgba(99, 91, 255, 0.04) 0%, rgba(99, 91, 255, 0.08) 100%);
        }

        .upload-drop-area.dragover {
            border: 2px dashed var(--primary);
            background: rgba(99, 91, 255, 0.08);
            border-radius: var(--radius-lg);
            box-shadow: 0 0 0 4px rgba(99, 91, 255, 0.1);
        }

        .hero-upload-card .entry-methods {
            display: flex;
            justify-content: center;
            gap: 8px;
            background: var(--bg-secondary);
            padding: 6px;
            border-radius: var(--radius-md);
        }

        .hero-upload-card .entry-method-btn {
            font-size: 0.8125rem;
            padding: 8px 14px;
        }

        /* How It Works Section - Dark Bento Cards */
        .how-it-works {
            background: #0A2540;
            padding: 40px 0 48px;
            position: relative;
        }

        /* Subtle grid texture background */
        .how-it-works::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image:
                linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
            background-size: 48px 48px;
            pointer-events: none;
            z-index: 0;
        }

        .how-it-works > .container {
            position: relative;
            z-index: 1;
        }

        /* Section badge pill */
        .how-it-works .section-badge {
            display: inline-block;
            background: rgba(99, 91, 255, 0.15);
            color: #A78BFA;
            font-size: 13px;
            font-weight: 600;
            padding: 6px 16px;
            border-radius: 100px;
            letter-spacing: 0.5px;
            margin-bottom: 16px;
            text-transform: uppercase;
        }

        .how-it-works .section-heading {
            color: #FFFFFF;
            font-size: 44px;
            font-weight: 800;
            letter-spacing: -0.03em;
            margin-bottom: var(--heading-gap);
        }

        .how-it-works .section-subheading {
            color: #94A3B8;
            font-size: 18px;
            margin-bottom: var(--content-gap);
        }

        .how-it-works-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
        }

        /* Grid with connectors on desktop */
        @media (min-width: 768px) {
            .how-it-works-grid {
                display: grid;
                grid-template-columns: 1fr auto 1fr auto 1fr;
                gap: 0 16px;
                align-items: stretch;
            }

            .step-connector {
                align-self: center;
            }
        }

        .how-it-works-step,
        .step-card {
            text-align: center;
            padding: 40px 28px 36px;
            position: relative;
            background: #112840;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.06);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.15);
        }

        .how-it-works-step::before,
        .step-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #635BFF, #A259FF, #00D4AA);
            background-size: 200% 100%;
            border-radius: 20px 20px 0 0;
            transition: background-position 0.6s ease;
        }

        .how-it-works-step:hover::before,
        .step-card:hover::before {
            background-position: 100% 0;
        }

        .how-it-works-step:hover,
        .step-card:hover {
            transform: translateY(-8px);
            background: #152D4A;
            border-color: rgba(99, 91, 255, 0.3);
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(99, 91, 255, 0.15);
        }

        .step-number {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, #635BFF, #7C3AED);
            color: #FFFFFF;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: 800;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin: 0 auto 24px;
            box-shadow: 0 4px 16px rgba(99, 91, 255, 0.4);
            position: relative;
            z-index: 1;
        }

        .step-icon {
            width: 72px;
            height: 72px;
            background: rgba(0, 212, 170, 0.12);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: #00D4AA !important;
            transition: all 0.3s ease;
        }

        .step-card:hover .step-icon {
            background: rgba(0, 212, 170, 0.2);
            transform: scale(1.08);
        }

        .how-it-works .step-icon svg,
        .step-card .step-icon svg {
            width: 32px;
            height: 32px;
            color: #00D4AA !important;
            stroke: currentColor !important;
        }

        .how-it-works .step-title,
        .step-card .step-title {
            font-size: 20px;
            font-weight: 700;
            color: #FFFFFF;
            margin-bottom: 12px;
            letter-spacing: -0.01em;
        }

        .how-it-works .step-description,
        .step-card .step-description {
            font-size: 15px;
            color: #B0BEC5;
            line-height: 1.7;
        }

        .how-it-works-step:hover .step-number,
        .step-card:hover .step-number {
            transform: scale(1.1);
            box-shadow: 0 8px 24px rgba(99, 91, 255, 0.5);
        }

        /* Step connector arrows */
        .step-connector {
            display: none;
            align-items: center;
            justify-content: center;
            padding-top: 80px;
        }

        .step-connector svg {
            width: 40px;
            height: 2px;
        }

        @media (min-width: 768px) {
            .step-connector {
                display: flex;
            }
        }

        @media (max-width: 767px) {
            .how-it-works-grid {
                display: flex;
                flex-direction: column;
                gap: 24px;
            }
            .step-connector {
                display: none;
            }
        }

        /* ========== SOCIAL PROOF SECTION ========== */

        .social-proof-section {
            background: #0A2540;
            padding: 48px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.06);
        }

        .social-proof-container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .social-proof-stats {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 64px;
            flex-wrap: wrap;
        }

        .social-proof-stat {
            text-align: center;
        }

        .social-proof-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: -0.02em;
            line-height: 1;
            margin-bottom: 8px;
        }

        .social-proof-number span {
            color: #635bff;
        }

        .social-proof-label {
            font-size: 0.875rem;
            color: #8899AA;
            letter-spacing: 0.02em;
        }

        .social-proof-divider {
            width: 1px;
            height: 48px;
            background: rgba(255, 255, 255, 0.1);
        }

        .social-proof-testimonial {
            margin-top: 40px;
            text-align: center;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .testimonial-quote {
            font-size: 1.25rem;
            color: rgba(255, 255, 255, 0.9);
            font-style: italic;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .testimonial-author {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .testimonial-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #635bff 0%, #a259ff 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1rem;
        }

        .testimonial-info {
            text-align: left;
        }

        .testimonial-name {
            color: #ffffff;
            font-weight: 600;
            font-size: 0.9375rem;
        }

        .testimonial-role {
            color: #8899AA;
            font-size: 0.8125rem;
        }

        @media (max-width: 768px) {
            .social-proof-stats {
                gap: 32px;
            }

            .social-proof-divider {
                display: none;
            }

            .social-proof-number {
                font-size: 2rem;
            }

            .testimonial-quote {
                font-size: 1.0625rem;
            }
        }

        /* Preview Grid - 2x2 layout with Browser Frame */
        .preview-section {
            background: linear-gradient(180deg, #F6F9FC 0%, #FFFFFF 50%, #F6F9FC 100%);
            padding: var(--section-padding-y) 0;
        }

        /* Section badge pill */
        .preview-section .section-badge {
            display: inline-block;
            background: rgba(99, 91, 255, 0.08);
            color: #635BFF;
            font-size: 13px;
            font-weight: 600;
            padding: 6px 16px;
            border-radius: 100px;
            letter-spacing: 0.5px;
            margin-bottom: 16px;
            text-transform: uppercase;
        }

        .preview-section .section-heading {
            font-size: 44px;
            font-weight: 800;
            color: #0A2540;
            letter-spacing: -0.03em;
            margin-bottom: var(--heading-gap);
        }

        .preview-section .section-subheading {
            font-size: 20px;
            color: #556B7E;
            margin-bottom: var(--content-gap);
        }

        /* Browser Frame */
        .browser-frame {
            background: #FFFFFF;
            border-radius: 16px;
            box-shadow:
                0 50px 100px -20px rgba(10, 37, 64, 0.2),
                0 30px 60px -15px rgba(99, 91, 255, 0.07),
                0 0 0 1px rgba(10, 37, 64, 0.04);
            overflow: hidden;
            max-width: 1000px;
            margin: 0 auto;
            transform: perspective(2000px) rotateY(-1deg) rotateX(1deg);
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.6s ease;
            position: relative;
        }

        /* Shine overlay on browser frame */
        .browser-frame::after {
            content: '';
            position: absolute;
            top: 0;
            left: -50%;
            width: 200%;
            height: 50%;
            background: linear-gradient(
                180deg,
                rgba(255, 255, 255, 0.04) 0%,
                transparent 100%
            );
            pointer-events: none;
            z-index: 1;
        }

        .browser-frame:hover {
            transform: perspective(1500px) rotateX(0deg);
            box-shadow:
                0 60px 120px -20px rgba(10, 37, 64, 0.22),
                0 35px 70px -15px rgba(99, 91, 255, 0.1),
                0 0 0 1px rgba(10, 37, 64, 0.06);
        }

        .browser-header {
            background: #F5F5F5;
            padding: 14px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid #E3E8EE;
        }

        .browser-dots {
            display: flex;
            gap: 8px;
        }

        .browser-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            box-shadow: inset 0 -1px 2px rgba(0,0,0,0.2);
        }

        .browser-dot.red { background: #FF5F57 !important; }
        .browser-dot.yellow { background: #FFBD2E !important; }
        .browser-dot.green { background: #27C93F !important; }

        .browser-url-bar {
            flex: 1;
            background: #FFFFFF;
            border: 1px solid #E0E4E8;
            border-radius: 8px;
            padding: 8px 14px;
            font-size: 13px;
            color: #425466;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .browser-url-bar svg {
            width: 14px;
            height: 14px;
            color: var(--success);
        }

        .browser-content {
            padding: 28px;
            background: #F6F9FC;
        }

        .preview-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .preview-card {
            background: #FFFFFF;
            border-radius: 14px;
            padding: 24px;
            border: 1px solid rgba(0, 0, 0, 0.06);
            box-shadow: 0 2px 8px rgba(10, 37, 64, 0.06);
            transition: all 0.3s ease;
            position: relative;
        }

        .preview-card:hover {
            box-shadow: 0 8px 24px rgba(10, 37, 64, 0.1);
            transform: translateY(-2px);
        }

        /* Colored left borders for each preview card */
        .preview-grid .preview-card:nth-child(1) {
            border-left: 4px solid #635BFF; /* Asset Allocation - Purple */
        }
        .preview-grid .preview-card:nth-child(2) {
            border-left: 4px solid #FFBD2E; /* Risk Score - Amber */
        }
        .preview-grid .preview-card:nth-child(3) {
            border-left: 4px solid #00D4AA; /* Sector Exposure - Teal */
        }
        .preview-grid .preview-card:nth-child(4) {
            border-left: 4px solid #FF5F57; /* Fee Analysis - Red */
        }
        .preview-grid .preview-card:nth-child(5) {
            border-left: 4px solid #4F46E5; /* Performance Analysis - Indigo */
            grid-column: 1 / -1; /* span full width */
        }

        .preview-card-header h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .preview-card-header h3::before {
            content: '';
            width: 4px;
            height: 16px;
            border-radius: 2px;
        }

        /* Keep the header accent bars too */
        .preview-grid .preview-card:nth-child(1) .preview-card-header h3::before {
            background: #635BFF;
        }
        .preview-grid .preview-card:nth-child(2) .preview-card-header h3::before {
            background: #FFBD2E;
        }
        .preview-grid .preview-card:nth-child(3) .preview-card-header h3::before {
            background: #00D4AA;
        }
        .preview-grid .preview-card:nth-child(4) .preview-card-header h3::before {
            background: #FF5F57;
        }
        .preview-grid .preview-card:nth-child(5) .preview-card-header h3::before {
            background: #4F46E5;
        }

        .preview-card-body {
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        @media (max-width: 768px) {
            .browser-frame {
                transform: none;
                margin: 0 16px;
            }
            .preview-grid {
                grid-template-columns: 1fr;
            }
            .preview-grid .preview-card:nth-child(5) {
                grid-column: 1; /* no span on mobile single-column grid */
            }
            .preview-section .section-heading {
                font-size: 28px;
            }
            .preview-section .section-subheading {
                font-size: 16px;
            }
        }

        /* Performance Analysis Card Styles */
        .pv-performance {
            display: flex;
            align-items: center;
            gap: 32px;
            width: 100%;
        }

        .pv-perf-summary {
            display: flex;
            gap: 24px;
            flex-shrink: 0;
        }

        .pv-perf-metric {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .pv-perf-value {
            font-size: 24px;
            font-weight: 700;
            color: #0A2540;
        }

        .pv-perf-value.positive {
            color: #00D4AA;
        }

        .pv-perf-label {
            font-size: 11px;
            color: #94A3B8;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 500;
        }

        .pv-perf-chart {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .pv-perf-bars {
            display: flex;
            align-items: flex-end;
            gap: 6px;
            height: 64px;
            width: 100%;
            justify-content: center;
        }

        .pv-perf-bar {
            width: 100%;
            max-width: 28px;
            border-radius: 3px 3px 0 0;
            transition: opacity 0.2s;
        }

        .pv-perf-bar.positive {
            background: linear-gradient(180deg, #00D4AA, #00B894);
        }

        .pv-perf-bar.negative {
            background: linear-gradient(180deg, #FF6B6B, #EE5A5A);
        }

        .pv-perf-chart-label {
            font-size: 10px;
            color: #94A3B8;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }

        @media (max-width: 768px) {
            .pv-performance {
                flex-direction: column;
                gap: 20px;
            }

            .pv-perf-summary {
                width: 100%;
                justify-content: space-around;
            }

            .pv-perf-value {
                font-size: 20px;
            }
        }

        .preview-grid .preview-card:nth-child(5) .preview-card-body {
            min-height: auto;
            padding: 8px 0;
        }

        /* ========== PREVIEW SECTION CHARTS (unique pv- prefix) ========== */

        /* Preview Donut Chart */
        .pv-donut {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
            width: 100%;
        }

        .pv-donut-ring {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            background: conic-gradient(
                #635BFF 0deg 223deg,
                #00D4AA 223deg 310deg,
                #F7B955 310deg 360deg
            );
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .pv-donut-ring::before {
            content: '';
            position: absolute;
            width: 75px;
            height: 75px;
            background: var(--bg-primary);
            border-radius: 50%;
        }

        .pv-donut-value {
            position: relative;
            z-index: 1;
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
        }

        .pv-donut-label {
            position: relative;
            z-index: 1;
            font-size: 0.625rem;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .pv-donut-legend {
            display: flex;
            flex-direction: row;
            justify-content: center;
            gap: 14px;
            width: 100%;
        }

        .pv-legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .pv-dot {
            width: 8px;
            height: 8px;
            border-radius: 2px;
            flex-shrink: 0;
        }

        .pv-dot-stocks { background: #635BFF; }
        .pv-dot-bonds { background: #00D4AA; }
        .pv-dot-cash { background: #F7B955; }

        /* Preview Gauge Chart */
        .pv-gauge {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .pv-gauge-arc {
            width: 130px;
            height: 65px;
            background: conic-gradient(
                from 180deg,
                #00D4AA 0deg 60deg,
                #F7B955 60deg 120deg,
                #FF6B6B 120deg 180deg
            );
            border-radius: 130px 130px 0 0;
            position: relative;
        }

        .pv-gauge-arc::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 40px;
            background: var(--bg-primary);
            border-radius: 80px 80px 0 0;
        }

        .pv-gauge-needle {
            width: 3px;
            height: 32px;
            background: var(--text-primary);
            border-radius: 2px;
            transform: rotate(24deg);
            transform-origin: bottom center;
            margin-top: -32px;
            margin-bottom: 0;
            position: relative;
            z-index: 2;
        }

        .pv-gauge-needle::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 50%;
            transform: translateX(-50%);
            width: 7px;
            height: 7px;
            background: var(--text-primary);
            border-radius: 50%;
        }

        .pv-gauge-info {
            text-align: center;
            margin-top: 12px;
        }

        .pv-gauge-value {
            display: block;
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
        }

        .pv-gauge-label {
            display: inline-block;
            font-size: 0.625rem;
            font-weight: 600;
            color: #F7B955;
            background: rgba(247, 185, 85, 0.15);
            padding: 3px 8px;
            border-radius: 10px;
            margin-top: 6px;
        }

        .pv-gauge-scale {
            display: flex;
            justify-content: space-between;
            width: 130px;
            font-size: 0.5625rem;
            color: var(--text-muted);
            margin-top: 8px;
        }

        /* Preview Bar Chart */
        .pv-bars {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
        }

        .pv-bar-row {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pv-bar-label {
            width: 75px;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-align: right;
            flex-shrink: 0;
        }

        .pv-bar-track {
            flex: 1;
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }

        .pv-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #635BFF, #A259FF);
            border-radius: 4px;
            transition: width 0.6s ease;
        }

        .pv-bar-value {
            width: 36px;
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--text-primary);
            text-align: right;
            flex-shrink: 0;
        }

        /* ========== OLD DONUT (kept for compatibility) ========== */
        /* Donut Chart Mockup */
        .donut-mockup {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            width: 100%;
        }

        .donut-ring {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background: conic-gradient(
                #635BFF 0deg 223deg,
                #00D4AA 223deg 310deg,
                #F7B955 310deg 360deg
            );
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .donut-ring::before {
            content: '';
            position: absolute;
            width: 80px;
            height: 80px;
            background: var(--bg-primary);
            border-radius: 50%;
        }

        .donut-center {
            position: absolute;
            text-align: center;
            z-index: 1;
        }

        .donut-value {
            display: block;
            font-size: 1.375rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.2;
        }

        .donut-label {
            display: block;
            font-size: 0.6875rem;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .donut-legend {
            display: flex !important;
            flex-direction: row !important;
            justify-content: center !important;
            align-items: center !important;
            gap: 16px !important;
            font-size: 0.8125rem;
            width: 100%;
            margin-top: 0;
        }

        .donut-legend .legend-item {
            display: flex !important;
            align-items: center !important;
            gap: 6px !important;
            color: var(--text-secondary) !important;
            font-weight: 500;
            white-space: nowrap;
            position: static !important;
        }

        .donut-legend .legend-dot {
            width: 10px !important;
            height: 10px !important;
            border-radius: 3px !important;
            flex-shrink: 0;
        }

        .donut-legend .legend-dot.stocks { background: #635BFF !important; }
        .donut-legend .legend-dot.bonds { background: #00D4AA !important; }
        .donut-legend .legend-dot.cash { background: #F7B955 !important; }

        /* Preview Section Gauge Mockup */
        .preview-card .gauge-mockup {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            width: 100% !important;
        }

        .preview-card .gauge-arc {
            width: 140px !important;
            height: 70px !important;
            background: conic-gradient(
                from 180deg,
                #00D4AA 0deg 60deg,
                #F7B955 60deg 120deg,
                #FF6B6B 120deg 180deg
            ) !important;
            border-radius: 140px 140px 0 0 !important;
            position: relative !important;
            overflow: visible !important;
        }

        .preview-card .gauge-arc::before {
            content: '' !important;
            position: absolute !important;
            bottom: 0 !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            width: 90px !important;
            height: 45px !important;
            background: var(--bg-primary) !important;
            border-radius: 90px 90px 0 0 !important;
        }

        .preview-card .gauge-needle {
            width: 3px !important;
            height: 35px !important;
            background: var(--text-primary) !important;
            position: absolute !important;
            bottom: 0 !important;
            left: 50% !important;
            transform-origin: bottom center !important;
            transform: translateX(-50%) rotate(24deg) !important;
            border-radius: 2px !important;
            z-index: 2 !important;
        }

        .preview-card .gauge-needle::after {
            content: '' !important;
            position: absolute !important;
            bottom: -4px !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            width: 8px !important;
            height: 8px !important;
            background: var(--text-primary) !important;
            border-radius: 50% !important;
        }

        .preview-card .gauge-center {
            text-align: center !important;
            margin-top: 20px !important;
        }

        .preview-card .gauge-value {
            display: block !important;
            font-size: 2.25rem !important;
            font-weight: 700 !important;
            color: var(--text-primary) !important;
            line-height: 1 !important;
        }

        .preview-card .gauge-label {
            display: inline-block !important;
            font-size: 0.6875rem !important;
            color: #F7B955 !important;
            font-weight: 600 !important;
            margin-top: 8px !important;
            background: rgba(247, 185, 85, 0.15) !important;
            padding: 3px 10px !important;
            border-radius: 12px !important;
        }

        .preview-card .gauge-scale {
            display: flex !important;
            justify-content: space-between !important;
            width: 140px !important;
            font-size: 0.625rem !important;
            color: var(--text-muted) !important;
            margin-top: 12px !important;
        }

        /* Preview Section Bar Chart */
        .preview-card .bar-mockup {
            display: flex !important;
            flex-direction: column !important;
            align-items: stretch !important;
            gap: 12px !important;
            width: 100% !important;
            height: auto !important;
            padding: 0 !important;
        }

        .preview-card .bar-item {
            display: flex !important;
            flex-direction: row !important;
            align-items: center !important;
            gap: 12px !important;
            width: 100% !important;
        }

        .preview-card .bar-label {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            width: 80px;
            min-width: 80px;
            text-align: right;
            flex-shrink: 0;
        }

        .preview-card .bar-track {
            flex: 1 !important;
            height: 8px !important;
            background: var(--bg-tertiary) !important;
            border-radius: 4px !important;
            overflow: hidden !important;
            min-width: 80px !important;
        }

        .preview-card .bar-fill {
            height: 100% !important;
            background: linear-gradient(90deg, #635BFF 0%, #818CF8 100%) !important;
            border-radius: 4px !important;
        }

        .preview-card .bar-value {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
            width: 40px;
            min-width: 40px;
            text-align: right;
            flex-shrink: 0;
        }

        /* Fee Analysis Mockup */
        .fee-mockup {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
        }

        .fee-stat {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        .fee-amount {
            display: block;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
        }

        .fee-label {
            display: block;
            font-size: 0.9375rem;
            color: var(--text-muted);
            margin-top: 6px;
        }

        .fee-breakdown {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .fee-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9375rem;
            color: var(--text-secondary);
            padding: 10px 14px;
            background: var(--bg-secondary);
            border-radius: 8px;
        }

        .fee-item svg {
            flex-shrink: 0;
            width: 18px;
            height: 18px;
        }

        .fee-item.warning {
            background: rgba(247, 185, 85, 0.1);
            border: 1px solid rgba(247, 185, 85, 0.2);
        }

        .fee-item.warning svg {
            color: #F7B955;
        }

        .fee-item:not(.warning) svg {
            color: #00D4AA;
        }

        .fee-savings {
            background: rgba(0, 212, 170, 0.1);
            border: 1px solid rgba(0, 212, 170, 0.25);
            padding: 14px 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1rem;
            color: #00B894;
            font-weight: 600;
        }

        .fee-savings strong {
            color: #00B894;
            font-size: 20px;
            font-weight: 800;
        }

        /* Value Props Section - Dark 2x2 Grid */
        .value-props {
            background: #0A2540;
            padding: var(--section-padding-y) 0;
        }

        .value-props .section-heading {
            color: #FFFFFF;
            font-size: 44px;
            font-weight: 800;
            letter-spacing: -0.03em;
            margin-bottom: var(--heading-gap);
        }

        .value-props .section-subheading {
            color: #94A3B8;
            margin-bottom: var(--content-gap);
        }

        .value-props-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
            max-width: 900px;
            margin: 0 auto;
        }

        .value-card {
            text-align: left;
            background: #112840;
            border-radius: var(--radius-lg);
            padding: 32px;
            border: 1px solid var(--dark-border);
            transition: all 0.3s ease;
        }

        .value-card:hover {
            border-color: rgba(99, 91, 255, 0.4);
            box-shadow: 0 0 30px rgba(99, 91, 255, 0.15);
            transform: translateY(-2px);
        }

        .value-icon {
            width: 56px;
            height: 56px;
            background: rgba(99, 91, 255, 0.15);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .value-icon svg {
            width: 28px;
            height: 28px;
            color: #635BFF;
        }

        .value-props .value-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #FFFFFF;
            margin-bottom: 10px;
        }

        .value-props .value-description {
            font-size: 1rem;
            color: #94A3B8;
            line-height: 1.7;
        }

        /* Trust Section - Marquee */
        /* Compact Brokerage Strip (inside hero section) */
        .brokerage-strip {
            background: transparent;
            padding: 16px 24px 0;
            margin-top: 32px;
            text-align: center;
        }

        .brokerage-strip-label {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #8899AA;
            margin: 0 0 12px 0;
        }

        .brokerage-strip-logos {
            overflow: hidden;
            position: relative;
            max-width: 1000px;
            margin: 0 auto;
            -webkit-mask-image: linear-gradient(to right, transparent, black 8%, black 92%, transparent);
            mask-image: linear-gradient(to right, transparent, black 8%, black 92%, transparent);
        }

        .brokerage-strip-track {
            display: flex;
            align-items: center;
            gap: 40px;
            animation: scrollLogosStrip 30s linear infinite;
            width: max-content;
        }

        .brokerage-strip-track:hover {
            animation-play-state: paused;
        }

        @keyframes scrollLogosStrip {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .brokerage-strip-track .brokerage-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
            opacity: 0.5;
            transition: opacity 0.2s;
        }

        .brokerage-strip-track .brokerage-logo:hover {
            opacity: 0.8;
        }

        .brokerage-strip-track .brokerage-logo-img {
            width: 20px;
            height: 20px;
            object-fit: contain;
        }

        .brokerage-strip-track .brokerage-name {
            font-size: 13px;
            font-weight: 500;
            color: #425466;
            white-space: nowrap;
        }

        .brokerage-strip-more {
            font-size: 12px;
            color: #8899AA;
            margin: 10px 0 0 0;
        }

        @media (max-width: 768px) {
            .brokerage-strip {
                padding: 12px 16px 16px;
            }

            .brokerage-strip-label {
                font-size: 10px;
                margin-bottom: 10px;
            }

            .brokerage-strip-track {
                gap: 28px;
            }

            .brokerage-strip-track .brokerage-logo-img {
                width: 18px;
                height: 18px;
            }

            .brokerage-strip-track .brokerage-name {
                font-size: 12px;
            }

            .brokerage-strip-more {
                font-size: 11px;
                margin-top: 8px;
            }

            .section-divider.hero-to-dark {
                height: 40px;
            }
        }

        .trust-section {
            background: var(--bg-primary);
            text-align: center;
            padding: 56px 0;
            overflow: hidden;
        }

        /* Wave divider: Hero area to How It Works (dark navy) */
        .section-divider.hero-to-dark {
            height: 50px;
            background: transparent;
            line-height: 0;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }

        .section-divider.hero-to-dark svg {
            width: 100%;
            height: 100%;
            display: block;
            margin: 0;
            padding: 0;
        }

        .trust-label {
            font-size: 1rem;
            color: #425466;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 32px;
            font-weight: 500;
        }

        .marquee-container {
            position: relative;
            width: 100%;
            overflow: hidden;
        }

        .marquee-container::before,
        .marquee-container::after {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100px;
            z-index: 2;
            pointer-events: none;
        }

        .marquee-container::before {
            left: 0;
            background: linear-gradient(to right, var(--bg-primary), transparent);
        }

        .marquee-container::after {
            right: 0;
            background: linear-gradient(to left, var(--bg-primary), transparent);
        }

        .marquee-track {
            display: flex;
            animation: marquee 45s linear infinite;
            width: max-content;
        }

        .marquee-track:hover {
            animation-play-state: paused;
        }

        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .brokerage-logos {
            display: flex;
            align-items: center;
            gap: 0;
            padding: 0;
        }

        .brokerage-logo {
            flex-shrink: 0;
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 0 48px;
            transition: opacity 0.3s ease;
        }

        .brokerage-logo:hover {
            opacity: 1;
        }

        .brokerage-logo-img {
            height: 28px;
            width: auto;
            filter: grayscale(100%) opacity(0.7);
            transition: filter 0.3s ease;
        }

        .brokerage-logo:hover .brokerage-logo-img {
            filter: grayscale(0%) opacity(1);
        }

        .brokerage-name {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-muted);
            white-space: nowrap;
            transition: color 0.3s ease;
        }

        .brokerage-logo:hover .brokerage-name {
            color: var(--text-primary);
        }

        .brokerage-name.fallback-only {
            display: none;
        }

        .trust-note {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-top: 32px;
        }

        /* CTA Section - Animated Gradient */
        .cta-section {
            background: linear-gradient(-45deg, #635BFF, #A259FF, #4B45C6, #7C3AED);
            background-size: 400% 400%;
            animation: ctaGradientFlow 8s ease infinite;
            padding: var(--section-padding-y) 24px;
            text-align: center;
            border-radius: var(--radius-lg);
            margin: 0 24px;
            position: relative;
            overflow: hidden;
        }

        .cta-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
        }

        @keyframes ctaGradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .cta-heading {
            font-size: 3rem;
            font-weight: 700;
            color: white;
            margin-bottom: 16px;
            letter-spacing: -0.02em;
            position: relative;
            z-index: 1;
        }

        .cta-subheading {
            font-size: 1.25rem;
            color: rgba(255, 255, 255, 0.9);
            position: relative;
            z-index: 1;
            margin-bottom: 40px;
        }

        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: white;
            color: #0A2540;
            font-size: 1.125rem;
            font-weight: 600;
            padding: 20px 40px;
            border-radius: 12px;
            border: none;
            position: relative;
            z-index: 1;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
        }

        /* ========== FAQ SECTION ========== */

        .faq-section {
            background: #f6f9fc;
            padding: var(--section-padding-y) 0;
        }

        .faq-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .faq-header {
            text-align: center;
            margin-bottom: 48px;
        }

        .faq-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #0A2540;
            margin-bottom: 16px;
            letter-spacing: -0.02em;
        }

        .faq-subtitle {
            font-size: 1.125rem;
            color: #425466;
        }

        .faq-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .faq-item {
            background: white;
            border-radius: 12px;
            border: 1px solid #e6ebf1;
            overflow: hidden;
            transition: box-shadow 0.2s ease;
        }

        .faq-item:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .faq-question {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            background: none;
            border: none;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            font-weight: 600;
            color: #0A2540;
            transition: background 0.2s ease;
        }

        .faq-question:hover {
            background: #f6f9fc;
        }

        .faq-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
            color: #635bff;
            transition: transform 0.3s ease;
        }

        .faq-item.active .faq-icon {
            transform: rotate(45deg);
        }

        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }

        .faq-item.active .faq-answer {
            max-height: 300px;
        }

        .faq-answer-content {
            padding: 0 24px 20px;
            color: #425466;
            line-height: 1.6;
        }

        .faq-answer-content a {
            color: #635bff;
            text-decoration: none;
        }

        .faq-answer-content a:hover {
            text-decoration: underline;
        }

        /* ========== MINIMAL FOOTER ========== */

        .site-footer {
            background: #0A2540;
            color: #8899AA;
            padding: 0;
            margin: 0;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 56px 24px 32px;
        }

        /* --- Row 1: Brand + Nav --- */
        .footer-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding-bottom: 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }

        .footer-logo-link {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .footer-logo-icon {
            width: 32px;
            height: 32px;
            background: #635BFF;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-logo-icon svg {
            width: 20px;
            height: 20px;
        }

        .footer-brand-name {
            font-size: 18px;
            font-weight: 700;
            color: #FFFFFF;
            letter-spacing: -0.01em;
        }

        .footer-nav {
            display: flex;
            gap: 56px;
        }

        .footer-nav-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .footer-nav-label {
            font-size: 12px;
            font-weight: 600;
            color: #FFFFFF;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            margin-bottom: 4px;
        }

        .footer-nav-group a {
            font-size: 14px;
            color: #8899AA;
            text-decoration: none;
            transition: color 0.15s;
        }

        .footer-nav-group a:hover {
            color: #FFFFFF;
        }

        /* --- Row 2: Disclaimer --- */
        .footer-disclaimer {
            font-size: 12px;
            line-height: 1.6;
            color: #5A6B7A;
            padding: 24px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            max-width: 800px;
        }

        /* --- Row 3: Bottom bar --- */
        .footer-bottom {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 24px;
        }

        .footer-copyright {
            font-size: 13px;
            color: #5A6B7A;
        }

        .footer-legal-links {
            display: flex;
            gap: 24px;
        }

        .footer-legal-links a {
            font-size: 13px;
            color: #5A6B7A;
            text-decoration: none;
            transition: color 0.15s;
        }

        .footer-legal-links a:hover {
            color: #FFFFFF;
        }

        /* --- Footer Mobile --- */
        @media (max-width: 768px) {
            .footer-top {
                flex-direction: column;
                gap: 32px;
            }

            .footer-nav {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 28px;
            }

            .footer-bottom {
                flex-direction: column;
                gap: 12px;
                text-align: center;
            }

            .footer-legal-links {
                justify-content: center;
                flex-wrap: wrap;
            }
        }

        @media (max-width: 480px) {
            .footer-nav {
                grid-template-columns: 1fr;
            }
        }

        /* Landing Page Responsive */
        @media (max-width: 900px) {
            .how-it-works-grid {
                grid-template-columns: 1fr;
                max-width: 400px;
            }

            .preview-grid {
                grid-template-columns: 1fr;
            }

            .value-props-grid {
                grid-template-columns: 1fr;
                max-width: 500px;
            }

            .footer-links {
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .value-props-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .cta-section {
                margin: 0 16px 40px;
                padding: 60px 20px;
            }

            .cta-heading {
                font-size: 1.5rem;
            }

            .footer-links {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .faq-title {
                font-size: 1.75rem;
            }

            .faq-question {
                padding: 16px 20px;
                font-size: 0.9375rem;
            }

            .faq-answer-content {
                padding: 0 20px 16px;
                font-size: 0.875rem;
            }
        }

        @media (max-width: 480px) {
            .value-props-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Sample Report Preview Section */
        .report-preview-container {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border);
            padding: 32px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .report-preview-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }

        .report-preview-logo {
            width: 32px;
            height: 32px;
            background: var(--primary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .report-preview-logo svg {
            width: 20px;
            height: 20px;
        }

        .report-preview-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .report-preview-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .preview-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            padding: 20px;
            border: 1px solid var(--border);
        }

        .preview-card-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 12px;
        }

        .preview-chart-placeholder {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        /* Donut Chart Mockup */
        .donut-mockup {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: conic-gradient(
                var(--primary) 0deg 180deg,
                var(--success) 180deg 270deg,
                var(--warning) 270deg 320deg,
                var(--text-muted) 320deg 360deg
            );
            position: relative;
        }

        .donut-mockup::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: var(--bg-secondary);
            border-radius: 50%;
        }

        /* Bar Chart Mockup */
        .bar-mockup {
            display: flex;
            align-items: flex-end;
            gap: 8px;
            height: 100%;
            padding: 10px 0;
        }

        .bar-mockup-item {
            flex: 1;
            background: var(--primary);
            border-radius: 4px 4px 0 0;
            opacity: 0.8;
        }

        .bar-mockup-item:nth-child(1) { height: 70%; }
        .bar-mockup-item:nth-child(2) { height: 45%; background: var(--primary-light); }
        .bar-mockup-item:nth-child(3) { height: 85%; }
        .bar-mockup-item:nth-child(4) { height: 60%; background: var(--primary-light); }
        .bar-mockup-item:nth-child(5) { height: 40%; }

        /* Line Chart Mockup */
        .line-mockup {
            width: 100%;
            height: 80px;
            position: relative;
        }

        .line-mockup svg {
            width: 100%;
            height: 100%;
        }

        /* Fee Display Mockup */
        .fee-mockup {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
        }

        .fee-mockup-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: var(--bg-primary);
            border-radius: var(--radius-sm);
            font-size: 0.8125rem;
        }

        .fee-mockup-label {
            color: var(--text-secondary);
        }

        .fee-mockup-value {
            font-weight: 600;
            color: var(--text-primary);
        }

        .fee-mockup-value.highlight {
            color: var(--danger);
        }

        /* Benchmark Mockup */
        .benchmark-mockup {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
        }

        .benchmark-row {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .benchmark-label {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            width: 80px;
            flex-shrink: 0;
        }

        .benchmark-bar-container {
            flex: 1;
            height: 24px;
            background: var(--bg-primary);
            border-radius: var(--radius-sm);
            overflow: hidden;
            position: relative;
        }

        .benchmark-bar {
            height: 100%;
            border-radius: var(--radius-sm);
        }

        .benchmark-bar.portfolio {
            background: var(--primary);
            width: 75%;
        }

        .benchmark-bar.sp500 {
            background: var(--text-muted);
            width: 68%;
        }

        .benchmark-value {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Value Props Section */
        .value-props-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            max-width: 1100px;
            margin: 0 auto;
        }

        .value-prop-card {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 28px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .value-prop-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .value-prop-icon {
            width: 48px;
            height: 48px;
            background: rgba(99, 91, 255, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
        }

        .value-prop-icon svg {
            width: 24px;
            height: 24px;
            color: var(--primary);
        }

        .value-prop-title {
            font-size: 1.0625rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .value-prop-description {
            font-size: 0.9375rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Social Proof / Trust Section */
        .trust-section {
            background: var(--bg-primary);
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
        }

        .trust-content {
            text-align: center;
        }

        .trust-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 32px;
        }

        /* CTA Section */
        .cta-section {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .cta-content {
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .cta-title {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .cta-subtitle {
            font-size: 1.125rem;
            opacity: 0.9;
            margin-bottom: 28px;
        }

        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: white;
            color: var(--primary);
            font-size: 1rem;
            font-weight: 600;
            padding: 16px 32px;
            border-radius: var(--radius-md);
            border: none;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }

        .cta-button svg {
            width: 20px;
            height: 20px;
        }

        /* Site Footer */
        .site-footer {
            background: var(--bg-primary);
            border-top: 1px solid var(--border);
            padding: 48px 0 32px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .footer-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 32px;
        }

        .footer-brand {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-links {
            display: flex;
            gap: 32px;
            flex-wrap: wrap;
        }

        .footer-link {
            font-size: 0.9375rem;
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-link:hover {
            color: var(--primary);
        }

        .footer-bottom {
            padding-top: 24px;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .footer-copyright {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .footer-legal {
            display: flex;
            gap: 24px;
        }

        .footer-legal a {
            font-size: 0.875rem;
            color: var(--text-muted);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-legal a:hover {
            color: var(--text-secondary);
        }

        /* Landing Page Responsive */
        @media (max-width: 1024px) {
            .value-props-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .landing-section {
                padding: 48px 0;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .how-it-works-grid {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .step-connector {
                display: none;
            }

            .report-preview-grid {
                grid-template-columns: 1fr;
            }

            .value-props-grid {
                grid-template-columns: 1fr;
            }

            .cta-title {
                font-size: 1.5rem;
            }

            .footer-top {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .footer-links {
                justify-content: center;
            }

            .footer-bottom {
                flex-direction: column;
                text-align: center;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 24px 16px;
            }

            h1 {
                font-size: 1.75rem;
            }

            .upload-card {
                padding: 32px 24px;
            }

            .charts-row {
                grid-template-columns: 1fr;
            }

            .sector-item {
                grid-template-columns: 100px 1fr 60px 60px;
                gap: 8px;
            }

            .tabs {
                padding: 3px;
            }

            .tab {
                padding: 10px 14px;
                font-size: 0.875rem;
            }

            .insights-container {
                padding: 0;
            }

            .insights-header {
                margin-bottom: 24px;
            }

            .insights-header h3 {
                font-size: 1.25rem;
            }

            .insight-card {
                padding: 16px 18px;
            }

            .insight-icon {
                width: 28px;
                height: 28px;
                font-size: 0.875rem;
            }

            .insight-title {
                font-size: 0.9375rem;
            }

            .insight-text {
                font-size: 0.875rem;
            }
        }

        /* Auth Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 37, 64, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s, visibility 0.2s;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            width: 100%;
            max-width: 400px;
            margin: 24px;
            transform: translateY(20px);
            transition: transform 0.2s;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            padding: 24px 24px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius-sm);
            transition: all 0.15s;
        }

        .modal-close:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .modal-body {
            padding: 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            font-size: 0.9375rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: inherit;
            transition: all 0.15s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 91, 255, 0.1);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        .form-error {
            color: var(--danger);
            font-size: 0.8125rem;
            margin-top: 8px;
        }

        .auth-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: 24px;
        }

        .auth-tab {
            flex: 1;
            padding: 12px;
            font-size: 0.9375rem;
            font-weight: 500;
            color: var(--text-muted);
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.15s;
        }

        .auth-tab:hover {
            color: var(--text-primary);
        }

        .auth-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .forgot-password-link {
            text-align: center;
            margin-top: 16px;
        }

        .forgot-password-link a,
        .back-to-login a {
            color: var(--primary);
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .forgot-password-link a:hover,
        .back-to-login a:hover {
            text-decoration: underline;
        }

        .back-to-login {
            text-align: center;
            margin-top: 16px;
        }

        .form-description {
            color: var(--text-muted);
            font-size: 0.875rem;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .form-success {
            color: var(--success);
            font-size: 0.875rem;
            margin-top: 8px;
            padding: 12px;
            background: rgba(48, 209, 88, 0.1);
            border-radius: var(--radius-sm);
        }

        /* User Menu */
        .user-menu {
            position: relative;
        }

        .user-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
            transition: all 0.15s;
        }

        .user-btn:hover {
            border-color: var(--primary);
        }

        .user-avatar {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.75rem;
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            min-width: 200px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.15s;
            z-index: 100;
        }

        .user-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            display: block;
            width: 100%;
            padding: 12px 16px;
            font-size: 0.875rem;
            color: var(--text-primary);
            background: none;
            border: none;
            text-align: left;
            cursor: pointer;
            transition: background 0.15s;
        }

        .dropdown-item:hover {
            background: var(--bg-secondary);
        }

        .dropdown-divider {
            height: 1px;
            background: var(--border);
            margin: 4px 0;
        }

        /* User Dashboard */
        .user-dashboard {
            padding: 48px 0 80px;
            min-height: calc(100vh - 72px);
            background: var(--bg-secondary);
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .dashboard-welcome h1 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .dashboard-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin-bottom: 48px;
        }

        .dashboard-stat-card {
            background: var(--bg-primary);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            border: 1px solid var(--border);
        }

        .dashboard-stat-number {
            display: block;
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .dashboard-stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .dashboard-section {
            margin-bottom: 48px;
        }

        .dashboard-section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .dashboard-section-header h2 {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .dashboard-section-header a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.875rem;
        }

        .dashboard-section-header a:hover {
            text-decoration: underline;
        }

        .dashboard-portfolios-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .dashboard-portfolio-card {
            background: var(--bg-primary);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            border: 1px solid var(--border);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
        }

        .dashboard-portfolio-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-color: var(--primary);
        }

        .dashboard-portfolio-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .dashboard-portfolio-card-title {
            font-weight: 600;
            font-size: 1rem;
            color: var(--text-primary);
        }

        .dashboard-portfolio-card-date {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .dashboard-portfolio-card-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .dashboard-portfolio-card-holdings {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .dashboard-empty-state {
            text-align: center;
            padding: 60px 20px;
            background: var(--bg-primary);
            border-radius: 12px;
            border: 2px dashed var(--border);
        }

        .dashboard-empty-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }

        .dashboard-empty-state h3 {
            font-size: 1.125rem;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .dashboard-empty-state p {
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .dashboard-connected-accounts {
            display: grid;
            gap: 12px;
        }

        .dashboard-no-accounts {
            color: var(--text-secondary);
            font-size: 0.875rem;
            padding: 24px;
            background: var(--bg-primary);
            border-radius: 12px;
            border: 1px solid var(--border);
            text-align: center;
        }

        @media (max-width: 768px) {
            .dashboard-stats {
                grid-template-columns: 1fr;
            }
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
            }
            .dashboard-portfolios-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Saved Portfolios */
        .saved-portfolios {
            margin-top: 32px;
        }

        .saved-portfolios-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .saved-portfolios-header h3 {
            font-size: 1rem;
            font-weight: 600;
        }

        .portfolio-list {
            display: grid;
            gap: 12px;
        }

        .portfolio-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.15s;
        }

        .portfolio-item:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .portfolio-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .portfolio-info {
            flex: 1;
        }

        .portfolio-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .portfolio-meta {
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        .portfolio-value {
            font-weight: 600;
            color: var(--success);
        }

        .portfolio-actions {
            display: flex;
            gap: 8px;
        }

        .portfolio-action-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius-sm);
            transition: all 0.15s;
        }

        .portfolio-action-btn:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .portfolio-action-btn.delete:hover {
            background: rgba(255, 69, 58, 0.1);
            color: var(--danger);
        }

        /* Save Portfolio Modal */
        .save-modal .modal {
            max-width: 450px;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-muted);
        }

        .empty-state-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 16px;
            color: var(--text-muted);
        }

        /* Compare Tab */
        .compare-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        @media (max-width: 900px) {
            .compare-container {
                grid-template-columns: 1fr;
            }
        }

        .compare-selectors {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 16px;
            align-items: end;
            margin-bottom: 32px;
        }

        @media (max-width: 768px) {
            .compare-selectors {
                grid-template-columns: 1fr;
            }
        }

        .compare-select-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .compare-select-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .compare-select {
            padding: 12px 16px;
            font-size: 0.9375rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            background: var(--bg-primary);
            color: var(--text-primary);
            cursor: pointer;
            font-family: inherit;
        }

        .compare-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 91, 255, 0.1);
        }

        .compare-vs {
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--text-muted);
            padding-bottom: 12px;
        }

        .compare-column {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 24px;
        }

        .compare-column-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }

        .compare-column-title {
            font-size: 1.125rem;
            font-weight: 600;
        }

        .compare-column-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--success);
        }

        .compare-chart-wrapper {
            height: 200px;
            margin-bottom: 20px;
        }

        .compare-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .compare-stat {
            text-align: center;
            padding: 12px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
        }

        .compare-stat-value {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .compare-stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        /* Difference Summary */
        .diff-summary {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 24px;
            margin-top: 24px;
        }

        .diff-summary-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
        }

        .diff-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
        }

        .diff-item {
            text-align: center;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
        }

        .diff-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .diff-value.positive {
            color: var(--success);
        }

        .diff-value.negative {
            color: var(--danger);
        }

        .diff-value.neutral {
            color: var(--text-muted);
        }

        .diff-label {
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        .compare-btn {
            margin-top: 16px;
        }

        /* What-If Tab */
        .whatif-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        @media (max-width: 900px) {
            .whatif-container {
                grid-template-columns: 1fr;
            }
        }

        .whatif-editor {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 24px;
        }

        .whatif-section-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .whatif-position-list {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .whatif-position {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            margin-bottom: 8px;
        }

        .whatif-position-symbol {
            font-weight: 600;
            min-width: 60px;
        }

        .whatif-position-shares {
            flex: 1;
        }

        .whatif-position-shares input {
            width: 80px;
            padding: 8px 12px;
            font-size: 0.875rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--bg-primary);
            text-align: right;
            font-family: inherit;
        }

        .whatif-position-shares input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .whatif-position-value {
            min-width: 90px;
            text-align: right;
            font-weight: 500;
            color: var(--text-muted);
        }

        .whatif-position-remove {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
            border-radius: var(--radius-sm);
            transition: all 0.15s;
        }

        .whatif-position-remove:hover {
            background: rgba(255, 69, 58, 0.1);
            color: var(--danger);
        }

        .whatif-add-form {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 12px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            margin-bottom: 20px;
        }

        @media (max-width: 600px) {
            .whatif-add-form {
                grid-template-columns: 1fr 1fr;
            }
        }

        .whatif-add-form input {
            padding: 10px 12px;
            font-size: 0.875rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--bg-primary);
            font-family: inherit;
        }

        .whatif-add-form input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .whatif-add-form button {
            padding: 10px 16px;
        }

        /* Rebalance Section */
        .rebalance-targets {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        @media (max-width: 600px) {
            .rebalance-targets {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .rebalance-target {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .rebalance-target label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .rebalance-target input {
            padding: 8px 12px;
            font-size: 0.875rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--bg-primary);
            text-align: center;
            font-family: inherit;
        }

        .rebalance-target input:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* What-If Preview */
        .whatif-preview {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 24px;
        }

        .whatif-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .whatif-preview-title {
            font-size: 1rem;
            font-weight: 600;
        }

        .whatif-preview-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--success);
        }

        .whatif-impact-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .whatif-impact-card {
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            text-align: center;
        }

        .whatif-impact-value {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .whatif-impact-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .whatif-chart-wrapper {
            height: 180px;
            margin-bottom: 16px;
        }

        .whatif-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        /* Plaid Integration */
        .plaid-section {
            margin-top: 32px;
            padding-top: 32px;
            border-top: 1px solid var(--border);
        }

        .plaid-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .plaid-header h3 {
            font-size: 1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .plaid-connections {
            display: grid;
            gap: 12px;
        }

        .plaid-connection {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
        }

        .plaid-connection-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #00d4aa 0%, #00a884 100%);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .plaid-connection-info {
            flex: 1;
        }

        .plaid-connection-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .plaid-connection-meta {
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        .plaid-connection-actions {
            display: flex;
            gap: 8px;
        }

        .plaid-unavailable {
            text-align: center;
            padding: 32px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            color: var(--text-muted);
        }

        .plaid-unavailable svg {
            width: 48px;
            height: 48px;
            margin-bottom: 12px;
            opacity: 0.5;
        }

        /* Benchmark Toggles */
        .benchmark-toggle {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8125rem;
            cursor: pointer;
            padding: 6px 12px;
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            transition: all 0.15s;
        }

        .benchmark-toggle:hover {
            background: var(--bg-tertiary);
        }

        .benchmark-toggle input {
            display: none;
        }

        .benchmark-label-box {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            opacity: 0.4;
            transition: opacity 0.15s;
        }

        .benchmark-toggle input:checked + .benchmark-label-box {
            opacity: 1;
        }

        /* Projections */
        .projection-stat {
            text-align: center;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
        }

        .projection-stat-value {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .projection-stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .monte-carlo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .monte-carlo-item {
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
        }

        .monte-carlo-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .monte-carlo-value {
            font-size: 1.125rem;
            font-weight: 600;
        }

        .monte-carlo-value.positive { color: var(--success); }
        .monte-carlo-value.highlight { color: var(--primary); }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            padding: 16px 24px;
            border-radius: var(--radius-md);
            color: white;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: var(--shadow-lg);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 2000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.success {
            background: var(--success);
        }

        .toast.error {
            background: var(--danger);
        }

        .toast svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        /* Footer */
        .site-footer {
            margin-top: 48px;
            padding: 24px 0;
            border-top: 1px solid var(--border);
            text-align: center;
            color: var(--text-muted);
            font-size: 0.8125rem;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-bottom: 12px;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .footer-copyright {
            color: var(--text-muted);
        }

        /* ========== MOBILE OPTIMIZATIONS ========== */
        @media (max-width: 480px) {
            body {
                font-size: 14px;
            }

            .container {
                padding: 16px 12px;
            }

            /* Logo & Header */
            .logo {
                gap: 8px;
            }

            .logo-icon {
                width: 32px;
                height: 32px;
                border-radius: 6px;
            }

            .logo-icon svg {
                width: 18px;
                height: 18px;
            }

            .brand-name {
                font-size: 1rem;
            }

            .brand-tagline {
                font-size: 0.5625rem;
            }

            .subtitle {
                font-size: 0.875rem;
                padding: 0 8px;
            }

            /* Entry Method Tabs */
            .entry-methods {
                flex-direction: column;
                gap: 4px;
                padding: 4px;
            }

            .entry-method-btn {
                padding: 10px 12px;
                font-size: 0.8125rem;
            }

            .entry-method-btn svg {
                width: 16px;
                height: 16px;
            }

            /* Upload Card */
            .upload-card {
                padding: 24px 16px !important;
            }

            .upload-icon {
                width: 48px;
                height: 48px;
                margin-bottom: 16px;
            }

            .upload-icon svg {
                width: 24px;
                height: 24px;
            }

            .upload-title {
                font-size: 1.1rem;
            }

            .upload-hint {
                font-size: 0.8125rem;
            }

            /* Manual Entry Form */
            .manual-entry-card {
                padding: 20px 16px !important;
            }

            .manual-entry-form {
                flex-direction: column;
                gap: 12px;
            }

            .manual-entry-form .form-group {
                min-width: 100%;
            }

            .manual-entry-form .btn-add {
                width: 100%;
            }

            /* Holdings List */
            .holdings-list-header {
                display: none;
            }

            .holdings-list-item {
                grid-template-columns: 1fr auto;
                gap: 8px;
            }

            .holdings-list-item .holding-symbol {
                grid-column: 1;
            }

            .holdings-list-item .btn-remove {
                grid-column: 2;
                grid-row: 1 / 3;
            }

            .holdings-list-item .holding-value {
                font-size: 0.8125rem;
            }

            .holdings-list-item .holding-total {
                font-size: 0.875rem;
            }

            .holdings-list-item::before {
                display: none;
            }

            .manual-entry-actions {
                flex-direction: column;
                gap: 16px;
            }

            .manual-entry-actions .manual-total {
                text-align: center;
            }

            .manual-entry-actions > div {
                width: 100%;
                display: flex;
                gap: 8px;
            }

            .manual-entry-actions > div .btn {
                flex: 1;
            }

            /* Dashboard Header */
            .dashboard-header {
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
            }

            .dashboard-title {
                justify-content: center;
                flex-wrap: wrap;
            }

            .dashboard-logo {
                width: 36px;
                height: 36px;
                border-radius: 8px;
            }

            .dashboard-logo svg {
                width: 22px;
                height: 22px;
            }

            .dashboard-title h2 {
                font-size: 1.25rem;
            }

            .total-badge {
                padding: 6px 14px;
                font-size: 1rem;
            }

            .header-actions {
                justify-content: center;
                flex-wrap: wrap;
            }

            .header-actions .btn {
                font-size: 0.8125rem;
                padding: 8px 12px;
            }

            /* Tabs - Horizontal scroll */
            .tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
                flex-wrap: nowrap;
                justify-content: flex-start;
                padding: 4px;
                margin: 0 -12px;
                padding-left: 12px;
                padding-right: 12px;
            }

            .tabs::-webkit-scrollbar {
                display: none;
            }

            .tab {
                flex-shrink: 0;
                padding: 8px 12px;
                font-size: 0.8125rem;
                white-space: nowrap;
            }

            /* Stats Grid */
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }

            .stat-card {
                padding: 14px;
            }

            .stat-label {
                font-size: 0.6875rem;
            }

            .stat-value {
                font-size: 1.25rem;
            }

            .stat-sub {
                font-size: 0.75rem;
            }

            /* Charts */
            .chart-wrapper {
                height: 250px !important;
            }

            .charts-row {
                gap: 16px;
            }

            .chart-card {
                padding: 16px;
            }

            .card-title {
                font-size: 0.9375rem;
            }

            /* Returns Grid */
            .returns-grid {
                grid-template-columns: repeat(4, 1fr) !important;
                gap: 6px;
            }

            .return-card {
                padding: 10px 6px;
            }

            .return-card .stat-label {
                font-size: 0.625rem;
            }

            .return-card .stat-value {
                font-size: 0.9375rem;
            }

            .benchmark-label {
                font-size: 0.625rem;
            }

            /* Benchmark Toggles */
            .benchmark-toggles {
                flex-wrap: wrap;
                gap: 6px;
            }

            .benchmark-toggle {
                padding: 4px 8px;
                font-size: 0.75rem;
            }

            /* Period Buttons */
            .period-buttons {
                gap: 4px;
            }

            .period-btn {
                padding: 6px 10px;
                font-size: 0.75rem;
            }

            /* Projections */
            #projectionsInfo {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 8px;
            }

            .monte-carlo-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 8px;
            }

            .monte-carlo-item {
                padding: 12px;
            }

            .monte-carlo-label {
                font-size: 0.6875rem;
            }

            .monte-carlo-value {
                font-size: 0.9375rem;
            }

            /* Sectors */
            .sector-item {
                grid-template-columns: 1fr !important;
                gap: 6px;
                padding: 12px 0;
            }

            .sector-name {
                font-weight: 600;
            }

            .sector-bar-container {
                order: 3;
            }

            .sector-pct {
                display: inline;
            }

            .sector-pct.benchmark {
                margin-left: 12px;
                color: var(--text-muted);
            }

            /* Geography */
            .map-container {
                flex-direction: column;
            }

            #worldMapContainer {
                min-height: 200px;
            }

            .map-legend {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                gap: 12px;
                padding: 12px 0;
            }

            /* Risk Metrics */
            .risk-grid {
                grid-template-columns: repeat(2, 1fr) !important;
            }

            /* Holdings Table */
            .holdings-table th,
            .holdings-table td {
                padding: 10px 8px;
                font-size: 0.8125rem;
            }

            .holdings-table th:nth-child(2),
            .holdings-table td:nth-child(2) {
                display: none;
            }

            /* What-If */
            .whatif-add-form {
                grid-template-columns: 1fr !important;
            }

            /* Compare */
            .compare-container {
                flex-direction: column;
            }

            .compare-side {
                min-width: 100%;
            }

            /* Accounts Section */
            .account-item {
                flex-wrap: wrap;
                gap: 8px;
            }

            .account-details {
                flex: 1;
                min-width: calc(100% - 60px);
            }

            .account-value {
                order: 4;
                width: 100%;
                text-align: left;
                padding-left: 44px;
            }

            /* Upload Queue */
            .upload-queue {
                max-height: 200px;
            }

            .upload-queue-item {
                padding: 10px 12px;
            }

            .upload-file-icon {
                width: 32px;
                height: 32px;
            }

            .upload-file-name {
                font-size: 0.875rem;
            }

            .upload-file-status {
                font-size: 0.75rem;
            }

            /* Buttons */
            .btn {
                padding: 10px 16px;
                font-size: 0.875rem;
            }

            .actions-row {
                flex-direction: column;
                gap: 8px;
            }

            .actions-row .btn {
                width: 100%;
            }

            /* Cards */
            .card {
                padding: 16px;
                border-radius: 12px;
            }

            /* Modal */
            .modal {
                margin: 12px;
                max-height: calc(100vh - 24px);
                overflow-y: auto;
            }

            .modal-header {
                padding: 16px 16px 0;
            }

            .modal-body {
                padding: 16px;
            }

            /* Toast */
            .toast {
                left: 12px;
                right: 12px;
                bottom: 12px;
                transform: none;
                max-width: none;
            }
        }

        /* Tablet adjustments */
        @media (min-width: 481px) and (max-width: 768px) {
            .entry-methods {
                max-width: 100%;
            }

            .manual-entry-form {
                flex-wrap: wrap;
            }

            .manual-entry-form .form-group {
                flex: 1 1 calc(50% - 6px);
                min-width: calc(50% - 6px);
            }

            .manual-entry-form .btn-add {
                flex: 1 1 100%;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .returns-grid {
                grid-template-columns: repeat(4, 1fr) !important;
            }

            .dashboard-title h2 {
                font-size: 1.5rem;
            }
        }

        /* ========== DARK MODE SUPPORT ========== */
        :root[data-theme="dark"] {
            --primary: #7a73ff;
            --primary-dark: #635bff;
            --primary-light: #9d97ff;
            --success: #34d399;
            --danger: #f87171;
            --warning: #fbbf24;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --bg-primary: #1e293b;
            --bg-secondary: #0f172a;
            --bg-tertiary: #334155;
            --border: #334155;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.2);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.3);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.4);
        }

        :root[data-theme="dark"] body {
            background: var(--bg-secondary);
        }

        :root[data-theme="dark"] .country {
            fill: #475569;
        }

        :root[data-theme="dark"] .upload-file-icon.success {
            background: rgba(52, 211, 153, 0.2);
        }

        :root[data-theme="dark"] .upload-file-icon.error {
            background: rgba(248, 113, 113, 0.2);
        }

        /* Dark Mode Compatibility for Stripe-Inspired Sections */
        /* Dark sections should stay dark in both modes */
        :root[data-theme="dark"] .how-it-works,
        :root[data-theme="dark"] .value-props,
        :root[data-theme="dark"] .site-footer {
            background: var(--dark-section-bg);
        }

        :root[data-theme="dark"] .how-it-works-step,
        :root[data-theme="dark"] .step-card,
        :root[data-theme="dark"] .value-card {
            background: var(--dark-card-bg);
            border-color: var(--dark-border);
        }

        /* Light sections in dark mode */
        :root[data-theme="dark"] .preview-section {
            background: var(--bg-primary);
        }

        /* Brokerage strip in dark mode */
        :root[data-theme="dark"] .brokerage-strip-label,
        :root[data-theme="dark"] .brokerage-strip-more {
            color: #8899AA;
        }

        :root[data-theme="dark"] .brokerage-strip-track .brokerage-name {
            color: var(--text-secondary);
        }

        :root[data-theme="dark"] .brokerage-strip-logos {
            -webkit-mask-image: linear-gradient(to right, transparent, black 8%, black 92%, transparent);
            mask-image: linear-gradient(to right, transparent, black 8%, black 92%, transparent);
        }

        :root[data-theme="dark"] .browser-frame {
            background: var(--bg-secondary);
        }

        :root[data-theme="dark"] .browser-header {
            background: var(--bg-tertiary);
        }

        :root[data-theme="dark"] .browser-content {
            background: var(--bg-secondary);
        }

        :root[data-theme="dark"] .preview-card {
            background: var(--bg-primary);
            border-color: var(--border);
        }

        /* Maintain colored left borders in dark mode */
        :root[data-theme="dark"] .preview-grid .preview-card:nth-child(1) {
            border-left: 4px solid #635BFF;
        }
        :root[data-theme="dark"] .preview-grid .preview-card:nth-child(2) {
            border-left: 4px solid #FFBD2E;
        }
        :root[data-theme="dark"] .preview-grid .preview-card:nth-child(3) {
            border-left: 4px solid #00D4AA;
        }
        :root[data-theme="dark"] .preview-grid .preview-card:nth-child(4) {
            border-left: 4px solid #FF5F57;
        }
        :root[data-theme="dark"] .preview-grid .preview-card:nth-child(5) {
            border-left: 4px solid #4F46E5;
        }
        :root[data-theme="dark"] .pv-perf-value {
            color: var(--text-primary);
        }
        :root[data-theme="dark"] .pv-perf-value.positive {
            color: #00D4AA;
        }

        /* Section badge in dark mode */
        :root[data-theme="dark"] .preview-section .section-badge {
            background: rgba(99, 91, 255, 0.15);
        }

        /* Marquee gradients for dark mode */
        :root[data-theme="dark"] .marquee-container::before {
            background: linear-gradient(to right, var(--bg-primary), transparent);
        }

        :root[data-theme="dark"] .marquee-container::after {
            background: linear-gradient(to left, var(--bg-primary), transparent);
        }

        :root[data-theme="dark"] .brokerage-logo-img {
            filter: grayscale(100%) brightness(0) invert(1) opacity(0.5);
        }

        :root[data-theme="dark"] .brokerage-logo:hover .brokerage-logo-img {
            filter: grayscale(0%) brightness(1) invert(0) opacity(1);
        }

        /* Hero upload card in dark mode */
        :root[data-theme="dark"] .hero-upload-card {
            background: var(--bg-primary);
            border-color: var(--border);
        }

        :root[data-theme="dark"] .hero-badge {
            background: rgba(122, 115, 255, 0.15);
        }

        /* Theme toggle button */
        .theme-toggle {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            color: var(--text-secondary);
        }

        .theme-toggle:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .theme-toggle svg {
            width: 18px;
            height: 18px;
        }

        .theme-toggle .sun-icon { display: none; }
        .theme-toggle .moon-icon { display: block; }

        :root[data-theme="dark"] .theme-toggle .sun-icon { display: block; }
        :root[data-theme="dark"] .theme-toggle .moon-icon { display: none; }

        /* Smooth theme transition */
        body, .card, .modal, .btn, input, select, .toast {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        /* ========== ENHANCED TOAST SYSTEM ========== */
        .toast-container {
            position: fixed;
            bottom: 24px;
            right: 24px;
            display: flex;
            flex-direction: column-reverse;
            gap: 12px;
            z-index: 2000;
            pointer-events: none;
        }

        .toast {
            position: relative;
            padding: 16px 48px 16px 20px;
            border-radius: var(--radius-md);
            color: white;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: var(--shadow-lg);
            transform: translateX(120%);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: auto;
            max-width: 400px;
            overflow: hidden;
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }

        .toast.success { background: var(--success); }
        .toast.error { background: var(--danger); }
        .toast.warning { background: #f59e0b; }
        .toast.info { background: var(--primary); }

        .toast-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            margin-bottom: 2px;
        }

        .toast-message {
            font-size: 0.875rem;
            opacity: 0.95;
        }

        .toast-close {
            position: absolute;
            top: 50%;
            right: 12px;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 4px;
            border-radius: var(--radius-sm);
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .toast-close:hover {
            opacity: 1;
        }

        .toast-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: rgba(255,255,255,0.4);
            border-radius: 0 0 var(--radius-md) var(--radius-md);
            animation: toast-progress linear forwards;
        }

        @keyframes toast-progress {
            from { width: 100%; }
            to { width: 0%; }
        }

        /* Toast Action Button */
        .toast.has-action {
            padding-right: 48px;
        }

        .toast-action-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 0.8125rem;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
            margin-left: 8px;
        }

        .toast-action-btn:hover {
            background: rgba(255, 255, 255, 0.35);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-1px);
        }

        .toast-action-btn:active {
            transform: translateY(0);
        }

        .toast.info .toast-action-btn {
            background: var(--primary);
            border-color: var(--primary);
        }

        .toast.info .toast-action-btn:hover {
            background: var(--primary-dark);
            border-color: var(--primary-dark);
        }

        /* ========== LOADING STATES & SKELETON LOADERS ========== */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 37, 64, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1500;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s, visibility 0.2s;
        }

        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        :root[data-theme="dark"] .loading-overlay {
            background: rgba(0, 0, 0, 0.7);
        }

        .loading-content {
            background: var(--bg-primary);
            padding: 32px 48px;
            border-radius: var(--radius-lg);
            text-align: center;
            box-shadow: var(--shadow-lg);
        }

        .loading-content .spinner {
            margin: 0 auto 16px;
        }

        .skeleton {
            background: linear-gradient(90deg, var(--bg-secondary) 25%, var(--bg-tertiary) 50%, var(--bg-secondary) 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: var(--radius-sm);
        }

        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .skeleton-text {
            height: 1em;
            margin-bottom: 0.5em;
        }

        .skeleton-text:last-child {
            width: 60%;
        }

        .skeleton-card {
            height: 120px;
            margin-bottom: 16px;
        }

        .skeleton-row {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }

        .skeleton-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }

        .skeleton-block {
            flex: 1;
            height: 40px;
        }

        /* Button loading state */
        .btn.loading {
            position: relative;
            color: transparent !important;
            pointer-events: none;
        }

        .btn.loading::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            border: 2px solid transparent;
            border-top-color: currentColor;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        .btn-primary.loading::after { border-top-color: white; }
        .btn-secondary.loading::after { border-top-color: var(--primary); }

        /* ========== FORM VALIDATION STYLES ========== */
        .form-group.has-error .form-input,
        .manual-entry-form .form-group.has-error input {
            border-color: var(--danger);
            animation: shake 0.5s ease;
        }

        .form-group.has-success .form-input,
        .manual-entry-form .form-group.has-success input {
            border-color: var(--success);
        }

        .form-group .validation-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
        }

        .form-group.has-error .validation-icon { color: var(--danger); }
        .form-group.has-success .validation-icon { color: var(--success); }

        .form-input-wrapper {
            position: relative;
        }

        .form-input-wrapper .form-input {
            padding-right: 40px;
        }

        .inline-error {
            color: var(--danger);
            font-size: 0.75rem;
            margin-top: 4px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        /* ========== KEYBOARD SHORTCUT HINTS ========== */
        .kbd {
            display: inline-block;
            padding: 2px 6px;
            font-size: 0.6875rem;
            font-family: ui-monospace, monospace;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 4px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            margin-left: 8px;
            color: var(--text-muted);
        }

        .shortcut-hint {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-left: auto;
        }

        /* Shortcuts Help Modal */
        .shortcuts-grid {
            display: grid;
            gap: 12px;
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
        }

        .shortcut-action {
            color: var(--text-primary);
            font-weight: 500;
        }

        .shortcut-keys {
            display: flex;
            gap: 4px;
        }

        /* ========== ACCESSIBILITY IMPROVEMENTS ========== */
        .skip-link {
            position: absolute;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary);
            color: white;
            padding: 12px 24px;
            border-radius: var(--radius-md);
            z-index: 9999;
            font-weight: 600;
            transition: top 0.2s;
            text-decoration: none;
        }

        .skip-link:focus {
            top: 16px;
        }

        /* Focus visible styles */
        *:focus-visible {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }

        .btn:focus-visible {
            box-shadow: 0 0 0 3px rgba(99, 91, 255, 0.3);
        }

        /* Screen reader only text */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Reduced motion preference */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* ========== CONNECTION STATUS INDICATOR ========== */
        .connection-status {
            position: fixed;
            bottom: 16px;
            left: 16px;
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: var(--radius-md);
            font-size: 0.75rem;
            font-weight: 500;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
            z-index: 100;
            opacity: 0.8;
            transition: opacity 0.2s;
        }

        .connection-status:hover {
            opacity: 1;
        }

        .connection-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
        }

        .connection-status.offline .connection-dot {
            background: var(--danger);
        }

        .connection-status.offline {
            color: var(--danger);
        }

        /* Session timeout warning */
        .session-warning {
            position: fixed;
            top: 16px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--warning);
            color: #1a1a1a;
            padding: 12px 24px;
            border-radius: var(--radius-md);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1900;
            box-shadow: var(--shadow-lg);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .session-warning.show {
            opacity: 1;
            visibility: visible;
        }

        /* ========== SETTINGS PANEL ========== */
        .settings-section {
            margin-bottom: 24px;
        }

        .settings-section-title {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 12px;
        }

        .settings-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .settings-option:last-child {
            border-bottom: none;
        }

        .settings-option-label {
            font-weight: 500;
            color: var(--text-primary);
        }

        .settings-option-desc {
            font-size: 0.8125rem;
            color: var(--text-muted);
            margin-top: 2px;
        }

        /* Toggle switch */
        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-tertiary);
            border-radius: 24px;
            transition: 0.3s;
        }

        .toggle-slider::before {
            content: '';
            position: absolute;
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: white;
            border-radius: 50%;
            transition: 0.3s;
        }

        .toggle-switch input:checked + .toggle-slider {
            background: var(--primary);
        }

        .toggle-switch input:checked + .toggle-slider::before {
            transform: translateX(20px);
        }

        .toggle-switch input:focus-visible + .toggle-slider {
            box-shadow: 0 0 0 3px rgba(99, 91, 255, 0.3);
        }

        /* Select dropdown for settings */
        .settings-select {
            padding: 8px 32px 8px 12px;
            font-size: 0.875rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--bg-primary);
            color: var(--text-primary);
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%238898aa' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
        }

        .settings-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* ========== CONFIRMATION MODAL ========== */
        .confirm-modal .modal {
            max-width: 380px;
        }

        .confirm-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .confirm-icon.danger {
            background: rgba(248, 113, 113, 0.15);
            color: var(--danger);
        }

        .confirm-icon.warning {
            background: rgba(251, 191, 36, 0.15);
            color: #f59e0b;
        }

        .confirm-text {
            text-align: center;
            margin-bottom: 24px;
        }

        .confirm-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .confirm-desc {
            color: var(--text-muted);
            font-size: 0.9375rem;
        }

        .confirm-actions {
            display: flex;
            gap: 12px;
        }

        .confirm-actions .btn {
            flex: 1;
        }

        .confirm-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 16px;
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        /* ========== IMPROVED EMPTY STATES ========== */
        .empty-state-enhanced {
            text-align: center;
            padding: 48px 24px;
        }

        .empty-state-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 24px;
            background: var(--bg-secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: empty-bounce 2s ease-in-out infinite;
        }

        @keyframes empty-bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .empty-state-icon svg {
            width: 40px;
            height: 40px;
            color: var(--text-muted);
        }

        .empty-state-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .empty-state-desc {
            color: var(--text-muted);
            margin-bottom: 24px;
            max-width: 320px;
            margin-left: auto;
            margin-right: auto;
        }

        .empty-state-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* ========== UNDO TOAST ========== */
        .undo-toast {
            background: var(--text-primary);
        }

        .undo-toast .btn-undo {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 4px 12px;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            margin-left: 12px;
        }

        .undo-toast .btn-undo:hover {
            background: rgba(255,255,255,0.3);
        }

        /* Mobile adjustments for new components */
        @media (max-width: 480px) {
            .toast-container {
                left: 12px;
                right: 12px;
                bottom: 12px;
            }

            .toast {
                max-width: none;
            }

            .shortcuts-grid {
                gap: 8px;
            }

            .shortcut-item {
                padding: 10px 12px;
            }

            .settings-option {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .confirm-actions {
                flex-direction: column;
            }
        }

        /* ========== ONBOARDING TUTORIAL ========== */
        .onboarding-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 37, 64, 0.85);
            z-index: 3000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .onboarding-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        :root[data-theme="dark"] .onboarding-overlay {
            background: rgba(0, 0, 0, 0.9);
        }

        .onboarding-card {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            max-width: 480px;
            width: 90%;
            overflow: hidden;
            animation: onboarding-enter 0.4s ease;
        }

        @keyframes onboarding-enter {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .onboarding-image {
            height: 200px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .onboarding-image svg {
            width: 80px;
            height: 80px;
            opacity: 0.9;
        }

        .onboarding-content {
            padding: 32px;
            text-align: center;
        }

        .onboarding-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .onboarding-text {
            color: var(--text-secondary);
            margin-bottom: 24px;
            line-height: 1.6;
        }

        .onboarding-steps {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 24px;
        }

        .onboarding-step {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            transition: all 0.3s;
        }

        .onboarding-step.active {
            width: 24px;
            border-radius: 4px;
            background: var(--primary);
        }

        .onboarding-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .onboarding-skip {
            color: var(--text-muted);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.875rem;
            padding: 8px 16px;
        }

        .onboarding-skip:hover {
            color: var(--text-primary);
        }

        /* Spotlight highlight for tutorial */
        .spotlight {
            position: fixed;
            z-index: 2999;
            pointer-events: none;
        }

        .spotlight-hole {
            position: absolute;
            border-radius: var(--radius-md);
            box-shadow: 0 0 0 9999px rgba(10, 37, 64, 0.85);
            transition: all 0.4s ease;
        }

        :root[data-theme="dark"] .spotlight-hole {
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.9);
        }

        .spotlight-tooltip {
            position: absolute;
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            padding: 16px 20px;
            box-shadow: var(--shadow-lg);
            max-width: 300px;
            pointer-events: auto;
        }

        .spotlight-tooltip::before {
            content: '';
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--bg-primary);
            transform: rotate(45deg);
        }

        .spotlight-tooltip.top::before {
            bottom: -6px;
            left: 50%;
            margin-left: -6px;
        }

        .spotlight-tooltip.bottom::before {
            top: -6px;
            left: 50%;
            margin-left: -6px;
        }

        /* ========== ANIMATED TRANSITIONS ========== */
        .view-transition {
            animation: view-fade-in 0.3s ease;
        }

        @keyframes view-fade-in {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab-content {
            animation: none;
        }

        .tab-content.active {
            animation: tab-slide-in 0.3s ease;
        }

        @keyframes tab-slide-in {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .card-enter {
            animation: card-pop-in 0.3s ease;
        }

        @keyframes card-pop-in {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .stagger-enter > * {
            opacity: 0;
            animation: stagger-fade-in 0.4s ease forwards;
        }

        .stagger-enter > *:nth-child(1) { animation-delay: 0.05s; }
        .stagger-enter > *:nth-child(2) { animation-delay: 0.1s; }
        .stagger-enter > *:nth-child(3) { animation-delay: 0.15s; }
        .stagger-enter > *:nth-child(4) { animation-delay: 0.2s; }
        .stagger-enter > *:nth-child(5) { animation-delay: 0.25s; }
        .stagger-enter > *:nth-child(6) { animation-delay: 0.3s; }

        @keyframes stagger-fade-in {
            to {
                opacity: 1;
            }
        }

        /* ========== DRAG AND DROP ========== */
        .draggable {
            cursor: grab;
            transition: transform 0.15s, box-shadow 0.15s;
        }

        .draggable:active {
            cursor: grabbing;
        }

        .draggable.dragging {
            opacity: 0.8;
            transform: scale(1.02);
            box-shadow: var(--shadow-lg);
            z-index: 100;
        }

        .drag-handle {
            cursor: grab;
            color: var(--text-muted);
            padding: 4px;
            margin-right: 8px;
        }

        .drag-handle:hover {
            color: var(--text-secondary);
        }

        .drop-zone {
            transition: all 0.2s;
        }

        .drop-zone.drag-over {
            background: rgba(99, 91, 255, 0.05);
            border-color: var(--primary);
        }

        .drop-indicator {
            height: 2px;
            background: var(--primary);
            border-radius: 1px;
            margin: 4px 0;
            opacity: 0;
            transition: opacity 0.15s;
        }

        .drop-indicator.active {
            opacity: 1;
        }

        /* ========== QUICK ACTIONS & RECENT ========== */
        .quick-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .quick-action-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 100px;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.15s;
        }

        .quick-action-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .quick-action-btn svg {
            width: 14px;
            height: 14px;
        }

        .recent-section {
            margin-bottom: 32px;
        }

        .recent-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .recent-title {
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .recent-clear {
            font-size: 0.75rem;
            color: var(--text-muted);
            background: none;
            border: none;
            cursor: pointer;
        }

        .recent-clear:hover {
            color: var(--primary);
        }

        .recent-list {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .recent-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.15s;
        }

        .recent-item:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .recent-item-icon {
            width: 32px;
            height: 32px;
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        .recent-item-info {
            flex: 1;
        }

        .recent-item-name {
            font-weight: 500;
            color: var(--text-primary);
        }

        .recent-item-meta {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* ========== DIVIDEND TRACKING ========== */
        .dividend-card {
            background: linear-gradient(135deg, var(--success) 0%, #28a745 100%);
            color: white;
            border: none;
        }

        .dividend-card .stat-label {
            color: rgba(255,255,255,0.8);
        }

        .dividend-card .stat-value {
            color: white;
        }

        .dividend-calendar {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        .dividend-month {
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            text-align: center;
        }

        .dividend-month-name {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .dividend-month-amount {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--success);
        }

        .dividend-month.current {
            border: 2px solid var(--primary);
        }

        /* ========== TAX LOT TRACKING ========== */
        .tax-lot-table {
            font-size: 0.875rem;
        }

        .tax-lot-table th {
            font-size: 0.75rem;
        }

        .tax-lot-gain {
            color: var(--success);
            font-weight: 600;
        }

        .tax-lot-loss {
            color: var(--danger);
            font-weight: 600;
        }

        .tax-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .tax-summary-card {
            padding: 20px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            text-align: center;
        }

        .tax-summary-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .tax-summary-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        /* ========== REBALANCING ========== */
        .rebalance-visual {
            display: flex;
            gap: 24px;
            align-items: center;
            margin-bottom: 24px;
        }

        .rebalance-pie {
            width: 150px;
            height: 150px;
            flex-shrink: 0;
        }

        .rebalance-trades {
            flex: 1;
        }

        .rebalance-trade-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            margin-bottom: 8px;
        }

        .rebalance-trade-action {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .rebalance-trade-action.buy {
            background: rgba(48, 209, 88, 0.15);
            color: var(--success);
        }

        .rebalance-trade-action.sell {
            background: rgba(255, 69, 58, 0.15);
            color: var(--danger);
        }

        .rebalance-trade-symbol {
            font-weight: 600;
            min-width: 60px;
        }

        .rebalance-trade-amount {
            flex: 1;
            text-align: right;
            color: var(--text-secondary);
        }

        /* ========== PORTFOLIO ALERTS ========== */
        .alerts-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .alert-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
        }

        .alert-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .alert-icon.price-up {
            background: rgba(48, 209, 88, 0.15);
            color: var(--success);
        }

        .alert-icon.price-down {
            background: rgba(255, 69, 58, 0.15);
            color: var(--danger);
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: 2px;
        }

        .alert-desc {
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        .alert-toggle {
            flex-shrink: 0;
        }

        .add-alert-form {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 12px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            margin-top: 16px;
        }

        /* ========== HISTORICAL SNAPSHOTS ========== */
        .snapshot-timeline {
            position: relative;
            padding-left: 24px;
        }

        .snapshot-timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }

        .snapshot-item {
            position: relative;
            padding: 16px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            margin-bottom: 16px;
            margin-left: 16px;
        }

        .snapshot-item::before {
            content: '';
            position: absolute;
            left: -24px;
            top: 20px;
            width: 12px;
            height: 12px;
            background: var(--primary);
            border-radius: 50%;
            border: 3px solid var(--bg-primary);
        }

        .snapshot-date {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .snapshot-value {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .snapshot-change {
            font-size: 0.875rem;
        }

        /* ========== EXPORT OPTIONS ========== */
        .export-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
        }

        .export-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            padding: 24px 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.15s;
        }

        .export-option:hover {
            border-color: var(--primary);
            background: var(--bg-primary);
        }

        .export-option-icon {
            width: 48px;
            height: 48px;
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        .export-option-label {
            font-weight: 600;
            color: var(--text-primary);
        }

        .export-option-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-align: center;
        }

        .export-divider {
            height: 1px;
            background: var(--border);
            margin: 16px 0;
        }

        .export-section-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .export-option.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        /* ========== IMPORT TEMPLATES ========== */
        .import-templates {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .import-template {
            padding: 20px;
            background: var(--bg-primary);
            border: 1px dashed var(--border);
            border-radius: var(--radius-md);
            text-align: center;
            cursor: pointer;
            transition: all 0.15s;
        }

        .import-template:hover {
            border-color: var(--primary);
            border-style: solid;
        }

        .import-template-icon {
            width: 40px;
            height: 40px;
            margin: 0 auto 12px;
            color: var(--text-muted);
        }

        .import-template-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .import-template-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* ========== PRINT STYLES ========== */
        @media print {
            .top-nav,
            .theme-toggle,
            .connection-status,
            .session-warning,
            .toast-container,
            .tabs,
            .header-actions,
            .btn,
            footer {
                display: none !important;
            }

            body {
                background: white;
                color: black;
            }

            .container {
                max-width: 100%;
                padding: 0;
            }

            .card {
                box-shadow: none;
                border: 1px solid #ddd;
                break-inside: avoid;
            }

            .chart-wrapper {
                height: 250px !important;
            }

            .tab-content {
                display: block !important;
                page-break-before: always;
            }

            .tab-content:first-child {
                page-break-before: avoid;
            }

            .print-header {
                display: block !important;
                text-align: center;
                margin-bottom: 24px;
                padding-bottom: 16px;
                border-bottom: 2px solid #333;
            }

            .print-footer {
                display: block !important;
                text-align: center;
                margin-top: 24px;
                padding-top: 16px;
                border-top: 1px solid #ddd;
                font-size: 0.75rem;
            }
        }

        .print-header,
        .print-footer {
            display: none;
        }

        /* ========== SHARE PORTFOLIO ========== */
        .share-modal .modal {
            max-width: 500px;
        }

        .share-link-container {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .share-link-input {
            flex: 1;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            font-family: monospace;
            font-size: 0.875rem;
            color: var(--text-primary);
        }

        .share-options {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 20px;
        }

        .share-option-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 16px 24px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.15s;
            color: var(--text-primary);
        }

        .share-option-btn:hover {
            border-color: var(--primary);
        }

        .share-option-btn svg {
            width: 24px;
            height: 24px;
        }

        /* ========== PWA INSTALL PROMPT ========== */
        .pwa-install-prompt {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            padding: 16px 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .pwa-install-prompt.show {
            opacity: 1;
            visibility: visible;
        }

        .pwa-install-icon {
            width: 48px;
            height: 48px;
            background: var(--primary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .pwa-install-text {
            flex: 1;
        }

        .pwa-install-title {
            font-weight: 600;
            margin-bottom: 2px;
        }

        .pwa-install-desc {
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        .pwa-install-close {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
        }

        /* ========== PORTFOLIO COMPARISON ========== */
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .comparison-panel {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
            border: 1px solid var(--border);
        }

        .comparison-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }

        .comparison-panel-title {
            font-weight: 600;
            font-size: 1rem;
        }

        .comparison-select {
            padding: 8px 12px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            font-size: 0.875rem;
            min-width: 200px;
        }

        .comparison-metrics {
            display: grid;
            gap: 16px;
        }

        .comparison-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px dashed var(--border);
        }

        .comparison-metric:last-child {
            border-bottom: none;
        }

        .comparison-metric-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .comparison-metric-value {
            font-weight: 600;
            font-size: 1rem;
        }

        .comparison-diff {
            text-align: center;
            padding: 24px;
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            margin-top: 24px;
        }

        .comparison-diff-title {
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-secondary);
        }

        .comparison-diff-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
        }

        .diff-item {
            text-align: center;
        }

        .diff-value {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .diff-value.positive { color: var(--success); }
        .diff-value.negative { color: var(--danger); }

        .diff-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 4px;
        }

        /* ========== PERFORMANCE CHART ========== */
        .performance-chart-container {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
            margin-bottom: 24px;
        }

        .performance-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .performance-title {
            font-weight: 600;
            font-size: 1.125rem;
        }

        .performance-period-tabs {
            display: flex;
            gap: 8px;
        }

        .period-tab {
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            font-size: 0.8125rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .period-tab:hover {
            border-color: var(--primary);
        }

        .period-tab.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .performance-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        .perf-stat {
            text-align: center;
        }

        .perf-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .perf-stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 4px;
        }

        /* ========== NEWS FEED ========== */
        .news-feed {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
        }

        .news-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .news-title {
            font-weight: 600;
            font-size: 1.125rem;
        }

        .news-filter {
            display: flex;
            gap: 8px;
        }

        .news-filter-btn {
            padding: 4px 10px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            font-size: 0.75rem;
            cursor: pointer;
        }

        .news-filter-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .news-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
            max-height: 500px;
            overflow-y: auto;
        }

        .news-item {
            display: flex;
            gap: 16px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s;
        }

        .news-item:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-sm);
        }

        .news-thumbnail {
            width: 80px;
            height: 60px;
            border-radius: var(--radius-sm);
            background: var(--bg-tertiary);
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            font-size: 1.5rem;
        }

        .news-content {
            flex: 1;
            min-width: 0;
        }

        .news-item-title {
            font-weight: 500;
            font-size: 0.9375rem;
            margin-bottom: 4px;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .news-meta {
            display: flex;
            gap: 12px;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .news-source {
            font-weight: 500;
            color: var(--primary);
        }

        .news-ticker {
            background: var(--bg-tertiary);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 500;
        }

        /* ========== WATCHLIST ========== */
        .watchlist-container {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
        }

        .watchlist-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .watchlist-title {
            font-weight: 600;
            font-size: 1.125rem;
        }

        .watchlist-add {
            display: flex;
            gap: 8px;
        }

        .watchlist-input {
            padding: 8px 12px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            font-size: 0.875rem;
            width: 120px;
            text-transform: uppercase;
        }

        .watchlist-table {
            width: 100%;
            border-collapse: collapse;
        }

        .watchlist-table th {
            text-align: left;
            padding: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--border);
        }

        .watchlist-table td {
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }

        .watchlist-table tr:last-child td {
            border-bottom: none;
        }

        .watchlist-symbol {
            font-weight: 600;
            color: var(--primary);
        }

        .watchlist-change {
            font-weight: 500;
        }

        .watchlist-change.up { color: var(--success); }
        .watchlist-change.down { color: var(--danger); }

        .watchlist-sparkline {
            width: 80px;
            height: 30px;
        }

        .watchlist-actions {
            display: flex;
            gap: 8px;
        }

        .watchlist-action-btn {
            padding: 4px 8px;
            border-radius: 4px;
            border: none;
            background: var(--bg-secondary);
            cursor: pointer;
            font-size: 0.75rem;
        }

        .watchlist-action-btn:hover {
            background: var(--bg-tertiary);
        }

        .watchlist-action-btn.add-portfolio {
            background: var(--primary);
            color: white;
        }

        /* ========== GOAL TRACKING ========== */
        .goals-container {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
        }

        .goals-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .goals-title {
            font-weight: 600;
            font-size: 1.125rem;
        }

        .goals-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .goal-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            padding: 20px;
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .goal-info {
            flex: 1;
        }

        .goal-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .goal-target {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .goal-target-value {
            font-weight: 600;
            color: var(--primary);
        }

        .goal-eta {
            text-align: right;
        }

        .goal-eta-label {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .goal-eta-value {
            font-weight: 600;
            color: var(--text-primary);
        }

        .goal-progress {
            margin-bottom: 12px;
        }

        .goal-progress-bar {
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }

        .goal-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .goal-progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.8125rem;
        }

        .goal-current {
            font-weight: 600;
        }

        .goal-remaining {
            color: var(--text-muted);
        }

        .goal-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px dashed var(--border);
        }

        .goal-action-btn {
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            background: var(--bg-primary);
            font-size: 0.8125rem;
            cursor: pointer;
        }

        .goal-action-btn:hover {
            border-color: var(--primary);
        }

        /* Add Goal Modal */
        .goal-form-group {
            margin-bottom: 16px;
        }

        .goal-form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 6px;
        }

        .goal-type-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .goal-type-option {
            padding: 16px;
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }

        .goal-type-option:hover {
            border-color: var(--primary-light);
        }

        .goal-type-option.selected {
            border-color: var(--primary);
            background: rgba(99, 91, 255, 0.05);
        }

        .goal-type-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .goal-type-name {
            font-weight: 500;
            font-size: 0.875rem;
        }

        /* ========== ADVANCED RISK METRICS ========== */
        .risk-metrics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .risk-metric-card {
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            padding: 20px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .risk-metric-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .risk-metric-value.good { color: var(--success); }
        .risk-metric-value.moderate { color: var(--warning); }
        .risk-metric-value.poor { color: var(--danger); }

        .risk-metric-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .risk-metric-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .risk-gauge {
            position: relative;
            width: 120px;
            height: 60px;
            margin: 0 auto 12px;
        }

        .risk-gauge-bg {
            position: absolute;
            width: 120px;
            height: 60px;
            border-radius: 60px 60px 0 0;
            background: linear-gradient(90deg, var(--success) 0%, var(--warning) 50%, var(--danger) 100%);
            overflow: hidden;
        }

        .risk-gauge-mask {
            position: absolute;
            bottom: 0;
            left: 10px;
            right: 10px;
            height: 50px;
            background: var(--bg-primary);
            border-radius: 50px 50px 0 0;
        }

        .risk-gauge-needle {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 4px;
            height: 50px;
            background: var(--text-primary);
            transform-origin: bottom center;
            border-radius: 2px;
            transition: transform 0.5s ease;
        }

        /* ========== CORRELATION MATRIX ========== */
        .correlation-matrix {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
            overflow-x: auto;
        }

        .correlation-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8125rem;
        }

        .correlation-table th,
        .correlation-table td {
            padding: 8px 12px;
            text-align: center;
            min-width: 60px;
        }

        .correlation-table th {
            font-weight: 600;
            background: var(--bg-secondary);
        }

        .correlation-cell {
            border-radius: 4px;
            font-weight: 500;
        }

        .correlation-cell[data-value="high-positive"] { background: rgba(48, 209, 88, 0.3); }
        .correlation-cell[data-value="medium-positive"] { background: rgba(48, 209, 88, 0.15); }
        .correlation-cell[data-value="low"] { background: var(--bg-secondary); }
        .correlation-cell[data-value="medium-negative"] { background: rgba(255, 69, 58, 0.15); }
        .correlation-cell[data-value="high-negative"] { background: rgba(255, 69, 58, 0.3); }

        /* ========== EARNINGS CALENDAR ========== */
        .earnings-calendar {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
        }

        .earnings-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .earnings-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
        }

        .earnings-date {
            text-align: center;
            min-width: 60px;
        }

        .earnings-day {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .earnings-month {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .earnings-info {
            flex: 1;
        }

        .earnings-symbol {
            font-weight: 600;
            margin-bottom: 2px;
        }

        .earnings-name {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .earnings-estimates {
            text-align: right;
        }

        .earnings-eps-label {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .earnings-eps-value {
            font-weight: 600;
        }

        .earnings-time {
            font-size: 0.75rem;
            color: var(--text-muted);
            padding: 4px 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .comparison-container {
                grid-template-columns: 1fr;
            }

            .comparison-diff-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .performance-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .risk-metrics-grid {
                grid-template-columns: 1fr;
            }

            .goal-type-options {
                grid-template-columns: 1fr;
            }
        }

        /* ========== REBALANCING CALCULATOR ========== */
        .rebalance-container {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
        }

        .rebalance-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .rebalance-mode-toggle {
            display: flex;
            gap: 8px;
        }

        .rebalance-mode-btn {
            padding: 8px 16px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            font-size: 0.875rem;
            cursor: pointer;
        }

        .rebalance-mode-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .rebalance-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .rebalance-current, .rebalance-target {
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            padding: 20px;
        }

        .rebalance-section-title {
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .rebalance-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
        }

        .rebalance-table th {
            text-align: left;
            padding: 10px 8px;
            font-weight: 600;
            color: var(--text-muted);
            font-size: 0.75rem;
            text-transform: uppercase;
            border-bottom: 1px solid var(--border);
        }

        .rebalance-table td {
            padding: 10px 8px;
            border-bottom: 1px solid var(--border);
        }

        .rebalance-table input {
            width: 70px;
            padding: 6px 8px;
            border-radius: 4px;
            border: 1px solid var(--border);
            text-align: right;
            font-size: 0.875rem;
        }

        .rebalance-trades {
            margin-top: 24px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            padding: 20px;
        }

        .trade-action {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg-primary);
            border-radius: var(--radius-sm);
            margin-bottom: 8px;
        }

        .trade-action:last-child {
            margin-bottom: 0;
        }

        .trade-direction {
            padding: 4px 10px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
        }

        .trade-direction.buy {
            background: rgba(48, 209, 88, 0.15);
            color: var(--success);
        }

        .trade-direction.sell {
            background: rgba(255, 69, 58, 0.15);
            color: var(--danger);
        }

        .trade-symbol {
            font-weight: 600;
            min-width: 60px;
        }

        .trade-details {
            flex: 1;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .trade-value {
            font-weight: 600;
        }

        /* ========== CONTRIBUTION CALCULATOR ========== */
        .contribution-calculator {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
        }

        .contribution-inputs {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .contribution-input-group {
            display: flex;
            flex-direction: column;
        }

        .contribution-input-group label {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            margin-bottom: 6px;
        }

        .contribution-input-group input,
        .contribution-input-group select {
            padding: 10px 12px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            font-size: 0.9375rem;
        }

        .contribution-results {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
        }

        .contribution-result {
            text-align: center;
            padding: 20px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
        }

        .contribution-result-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .contribution-result-label {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .contribution-breakdown {
            margin-top: 24px;
        }

        .contribution-breakdown-title {
            font-weight: 600;
            margin-bottom: 16px;
        }

        .contribution-bar {
            height: 32px;
            border-radius: var(--radius-sm);
            display: flex;
            overflow: hidden;
        }

        .contribution-bar-segment {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 500;
            color: white;
        }

        .contribution-bar-principal {
            background: var(--primary);
        }

        .contribution-bar-contributions {
            background: var(--success);
        }

        .contribution-bar-growth {
            background: var(--warning);
        }

        /* ========== HOLDING NOTES & TAGS ========== */
        .holding-notes-btn {
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            font-size: 0.75rem;
            cursor: pointer;
        }

        .holding-notes-btn:hover {
            border-color: var(--primary);
        }

        .holding-tags {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
            margin-top: 4px;
        }

        .holding-tag {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.6875rem;
            font-weight: 500;
        }

        .holding-tag.growth { background: rgba(99, 91, 255, 0.15); color: var(--primary); }
        .holding-tag.value { background: rgba(48, 209, 88, 0.15); color: var(--success); }
        .holding-tag.dividend { background: rgba(255, 159, 10, 0.15); color: #ff9f0a; }
        .holding-tag.speculative { background: rgba(255, 69, 58, 0.15); color: var(--danger); }
        .holding-tag.core { background: rgba(136, 152, 170, 0.15); color: var(--text-secondary); }

        .notes-modal-content {
            max-width: 500px;
        }

        .notes-textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            font-family: inherit;
            font-size: 0.9375rem;
            resize: vertical;
            margin-bottom: 16px;
        }

        .tag-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }

        .tag-option {
            padding: 6px 12px;
            border-radius: 16px;
            border: 2px solid var(--border);
            font-size: 0.8125rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tag-option:hover {
            border-color: var(--primary-light);
        }

        .tag-option.selected {
            border-color: var(--primary);
            background: rgba(99, 91, 255, 0.1);
        }

        /* ========== QUICK STATS MINI CARDS ========== */
        .quick-stats-row {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            overflow-x: auto;
            padding-bottom: 8px;
        }

        .quick-stat-mini {
            flex-shrink: 0;
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            padding: 16px 20px;
            min-width: 140px;
            border: 1px solid var(--border);
        }

        .quick-stat-mini-value {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .quick-stat-mini-label {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .quick-stat-mini-change {
            font-size: 0.75rem;
            margin-top: 4px;
        }

        .quick-stat-mini-change.positive { color: var(--success); }
        .quick-stat-mini-change.negative { color: var(--danger); }

        @media (max-width: 768px) {
            .rebalance-grid {
                grid-template-columns: 1fr;
            }

            .contribution-inputs {
                grid-template-columns: 1fr 1fr;
            }

            .contribution-results {
                grid-template-columns: 1fr;
            }
        }

        /* ========== RISK GAUGE VISUALIZATION ========== */
        .risk-gauge-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 24px;
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            margin-bottom: 24px;
        }

        .risk-gauge-wrapper {
            position: relative;
            width: 200px;
            height: 120px;
            margin-bottom: 16px;
        }

        .risk-gauge-arc {
            position: absolute;
            width: 200px;
            height: 100px;
            border-radius: 100px 100px 0 0;
            background: conic-gradient(from 180deg,
                var(--success) 0deg,
                var(--success) 36deg,
                #8BC34A 36deg,
                #8BC34A 72deg,
                var(--warning) 72deg,
                var(--warning) 108deg,
                #FF9800 108deg,
                #FF9800 144deg,
                var(--danger) 144deg,
                var(--danger) 180deg
            );
            clip-path: polygon(0 100%, 100% 100%, 100% 0, 0 0);
        }

        .risk-gauge-inner {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 160px;
            height: 80px;
            background: var(--bg-primary);
            border-radius: 80px 80px 0 0;
        }

        .risk-gauge-needle {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 4px;
            height: 80px;
            background: linear-gradient(to top, var(--text-primary), var(--text-primary) 70%, transparent);
            transform-origin: bottom center;
            transform: translateX(-50%) rotate(-90deg);
            transition: transform 1s ease-out;
            border-radius: 2px;
        }

        .risk-gauge-center {
            position: absolute;
            bottom: -8px;
            left: 50%;
            width: 16px;
            height: 16px;
            background: var(--text-primary);
            border-radius: 50%;
            transform: translateX(-50%);
        }

        .risk-gauge-labels {
            display: flex;
            justify-content: space-between;
            width: 200px;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .risk-gauge-score {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .risk-gauge-label {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* ========== FACTOR EXPOSURE ========== */
        .factor-exposure-container {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
            margin-bottom: 24px;
        }

        .factor-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .factor-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .factor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .factor-name {
            font-weight: 500;
            font-size: 0.9375rem;
        }

        .factor-value {
            font-weight: 600;
            font-size: 0.875rem;
        }

        .factor-bar {
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }

        .factor-bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .factor-bar-fill.value { background: #4CAF50; }
        .factor-bar-fill.growth { background: #2196F3; }
        .factor-bar-fill.momentum { background: #9C27B0; }
        .factor-bar-fill.quality { background: #FF9800; }
        .factor-bar-fill.size { background: #607D8B; }
        .factor-bar-fill.volatility { background: #f44336; }

        .factor-description {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* ========== MARKET INDICATORS ========== */
        .market-indicators {
            display: flex;
            justify-content: center;
            gap: 12px;
            padding: 8px 24px 12px;
            background: transparent;
            border-radius: var(--radius-lg);
            margin-top: 0;
            margin-bottom: 0;
            overflow-x: auto;
        }

        .market-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 100px;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            position: relative;
            overflow: hidden;
        }

        .market-indicator::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            animation: shimmer 10s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 90%, 100% { left: -100%; }
            95% { left: 200%; }
        }

        .market-indicator-name {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 4px;
            white-space: nowrap;
        }

        .market-indicator-value {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 2px;
        }

        .market-indicator-change {
            font-size: 0.75rem;
            font-weight: 500;
        }

        .market-indicator-change.up { color: var(--success); }
        .market-indicator-change.down { color: var(--danger); }

        /* ========== INCOME PROJECTION ========== */
        .income-projection {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
        }

        .income-projection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .income-chart-container {
            height: 300px;
            margin-bottom: 20px;
        }

        .income-summary-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
        }

        .income-summary-item {
            text-align: center;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
        }

        .income-summary-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--success);
            margin-bottom: 4px;
        }

        .income-summary-label {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        /* ========== STOCK SCREENER MINI ========== */
        .screener-mini {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
        }

        .screener-filters {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .screener-filter {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .screener-filter label {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .screener-filter select,
        .screener-filter input {
            padding: 6px 10px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            font-size: 0.875rem;
            min-width: 100px;
        }

        .screener-results {
            max-height: 400px;
            overflow-y: auto;
        }

        @media (max-width: 768px) {
            .factor-grid {
                grid-template-columns: 1fr;
            }

            .income-summary-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* ========== PORTFOLIO HEAT MAP ========== */
        .heat-map-container {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
            margin-bottom: 24px;
        }

        .heat-map-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .heat-map-period-selector {
            display: flex;
            gap: 8px;
        }

        .heat-map-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 8px;
        }

        .heat-map-cell {
            aspect-ratio: 1.2;
            border-radius: var(--radius-sm);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 8px 6px;
            cursor: pointer;
            transition: transform 0.2s;
            gap: 2px;
        }

        .heat-map-cell:hover {
            transform: scale(1.05);
            z-index: 1;
        }

        .heat-map-symbol {
            font-weight: 600;
            font-size: 0.875rem;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .heat-map-change {
            font-size: 0.75rem;
            color: white;
            opacity: 0.9;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .heat-map-name {
            font-size: 0.625rem;
            color: white;
            opacity: 0.75;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            text-align: center;
            line-height: 1.2;
        }

        .heat-map-cell.gain-large { background: #1B5E20; }
        .heat-map-cell.gain-medium { background: #388E3C; }
        .heat-map-cell.gain-small { background: #4CAF50; }
        .heat-map-cell.neutral { background: #9E9E9E; }
        .heat-map-cell.loss-small { background: #E57373; }
        .heat-map-cell.loss-medium { background: #E53935; }
        .heat-map-cell.loss-large { background: #B71C1C; }

        .heat-map-legend {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 16px;
            font-size: 0.75rem;
        }

        .heat-map-legend-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .heat-map-legend-color {
            width: 16px;
            height: 16px;
            border-radius: 2px;
        }

        /* ========== ALLOCATION SUGGESTIONS ========== */
        .suggestions-container {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
            margin-bottom: 24px;
        }

        .suggestion-card {
            display: flex;
            gap: 16px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            margin-bottom: 12px;
            border-left: 4px solid var(--primary);
        }

        .suggestion-card.warning {
            border-left-color: var(--warning);
        }

        .suggestion-card.success {
            border-left-color: var(--success);
        }

        .suggestion-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-tertiary);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .suggestion-content {
            flex: 1;
        }

        .suggestion-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .suggestion-text {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .suggestion-action {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 0.8125rem;
            color: var(--primary);
            font-weight: 500;
            cursor: pointer;
        }

        .suggestion-action:hover {
            text-decoration: underline;
        }

        /* ========== VALUATION METRICS ========== */
        .valuation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
        }

        .valuation-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            padding: 16px;
        }

        .valuation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .valuation-symbol {
            font-weight: 600;
        }

        .valuation-sector {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .valuation-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .valuation-metric {
            text-align: center;
        }

        .valuation-metric-value {
            font-weight: 600;
            font-size: 1rem;
        }

        .valuation-metric-value.undervalued { color: var(--success); }
        .valuation-metric-value.fair { color: var(--text-primary); }
        .valuation-metric-value.overvalued { color: var(--danger); }

        .valuation-metric-label {
            font-size: 0.6875rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        /* ========== CURRENCY EXPOSURE ========== */
        .currency-exposure-container {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: 24px;
        }

        .currency-chart-container {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .currency-donut {
            width: 200px;
            height: 200px;
            flex-shrink: 0;
        }

        .currency-list {
            flex: 1;
        }

        .currency-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .currency-item:last-child {
            border-bottom: none;
        }

        .currency-flag {
            width: 32px;
            height: 24px;
            border-radius: 4px;
            background: var(--bg-tertiary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .currency-info {
            flex: 1;
        }

        .currency-name {
            font-weight: 500;
            font-size: 0.9375rem;
        }

        .currency-code {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .currency-allocation {
            text-align: right;
        }

        .currency-percent {
            font-weight: 600;
        }

        .currency-value {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        @media (max-width: 768px) {
            .currency-chart-container {
                flex-direction: column;
            }

            .heat-map-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Announcement Bar -->
    <div class="announcement-bar" id="announcement-bar">
        <div class="announcement-inner">
            <span>🚀 Now supporting 50+ brokerages including Schwab, Fidelity, and Vanguard</span>
            <a href="#hero-upload" class="announcement-link" onclick="scrollToUpload(); return false;">Try it free →</a>
            <button class="announcement-close" aria-label="Close announcement" onclick="document.getElementById('announcement-bar').style.display='none';">✕</button>
        </div>
    </div>

    <nav class="top-nav" role="navigation" aria-label="Main navigation">
        <div class="nav-inner">
            <!-- Left: Logo -->
            <div class="nav-left">
                    <a href="/" class="logo" style="text-decoration: none;">
                        <div class="logo-icon">
                            <!-- Paul Rand-inspired logo: Bold geometric "S" with scan line -->
                            <svg viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <!-- Abstract S formed by two offset squares with negative space -->
                                <rect x="0" y="0" width="24" height="24" rx="4" fill="white"/>
                                <rect x="20" y="20" width="24" height="24" rx="4" fill="white"/>
                                <!-- Scan line cutting through - the key action element -->
                                <rect x="0" y="19" width="44" height="6" fill="white" opacity="0.4"/>
                                <!-- Central diamond connector -->
                                <rect x="16" y="16" width="12" height="12" rx="2" fill="white" transform="rotate(0 22 22)"/>
                            </svg>
                        </div>
                        <div class="brand-text">
                            <span class="brand-name">Statement Scan</span>
                            <span class="brand-tagline">Portfolio Intelligence</span>
                        </div>
                    </a>
                </div>

                <!-- Center: Navigation Links -->
                <div class="nav-center">
                    <!-- Products Dropdown -->
                    <div class="nav-item" data-dropdown="products">
                        <button class="nav-link" aria-haspopup="true" aria-expanded="false">
                            Products
                            <svg class="nav-link-chevron" viewBox="0 0 10 10" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M2 3.5L5 6.5L8 3.5"/>
                            </svg>
                        </button>
                        <div class="nav-dropdown dropdown-wide" role="menu">
                            <div class="dropdown-columns">
                                <div class="dropdown-column">
                                    <div class="dropdown-column-title">Analyze</div>
                                    <a class="dropdown-item" role="menuitem" onclick="navScrollToUpload('upload'); closeAllDropdowns();">
                                        <span class="dropdown-item-icon">📄</span>
                                        <div class="dropdown-item-content">
                                            <div class="dropdown-item-title">Statement Upload</div>
                                            <div class="dropdown-item-desc">Upload PDF or CSV brokerage statements for instant analysis</div>
                                        </div>
                                    </a>
                                    <a class="dropdown-item" role="menuitem" onclick="navScrollToUpload('manual'); closeAllDropdowns();">
                                        <span class="dropdown-item-icon">✏️</span>
                                        <div class="dropdown-item-content">
                                            <div class="dropdown-item-title">Manual Entry</div>
                                            <div class="dropdown-item-desc">Enter holdings by ticker and quantity or allocation percentage</div>
                                        </div>
                                    </a>
                                    <a class="dropdown-item" role="menuitem" onclick="navScrollToUpload('connect'); closeAllDropdowns();">
                                        <span class="dropdown-item-icon">🔗</span>
                                        <div class="dropdown-item-content">
                                            <div class="dropdown-item-title">Brokerage Connect <span class="tag-coming-soon">Coming Soon</span></div>
                                            <div class="dropdown-item-desc">Link your Schwab, Fidelity, or Vanguard account directly</div>
                                        </div>
                                    </a>
                                </div>
                                <div class="dropdown-column">
                                    <div class="dropdown-column-title">Insights</div>
                                    <a class="dropdown-item" role="menuitem" onclick="navScrollToSection('previewSection'); closeAllDropdowns();">
                                        <span class="dropdown-item-icon">📊</span>
                                        <div class="dropdown-item-content">
                                            <div class="dropdown-item-title">Portfolio Report</div>
                                            <div class="dropdown-item-desc">Allocation, sector exposure, and risk analysis in one view</div>
                                        </div>
                                    </a>
                                    <a class="dropdown-item" role="menuitem" onclick="navScrollToSection('previewSection'); closeAllDropdowns();">
                                        <span class="dropdown-item-icon">💰</span>
                                        <div class="dropdown-item-content">
                                            <div class="dropdown-item-title">Fee Analysis</div>
                                            <div class="dropdown-item-desc">Find hidden expense ratios and see potential savings</div>
                                        </div>
                                    </a>
                                    <a class="dropdown-item" role="menuitem" onclick="navScrollToSection('previewSection'); closeAllDropdowns();">
                                        <span class="dropdown-item-icon">📈</span>
                                        <div class="dropdown-item-content">
                                            <div class="dropdown-item-title">Benchmark Comparison</div>
                                            <div class="dropdown-item-desc">Compare your performance against the S&P 500 and target-date funds</div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Solutions Dropdown -->
                    <div class="nav-item" data-dropdown="solutions">
                        <button class="nav-link" aria-haspopup="true" aria-expanded="false">
                            Solutions
                            <svg class="nav-link-chevron" viewBox="0 0 10 10" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M2 3.5L5 6.5L8 3.5"/>
                            </svg>
                        </button>
                        <div class="nav-dropdown" role="menu">
                            <a class="dropdown-item" role="menuitem" onclick="navScrollToSection('heroSection'); closeAllDropdowns();">
                                <span class="dropdown-item-icon">🧑‍💼</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">For Self-Directed Investors</div>
                                    <div class="dropdown-item-desc">Understand your portfolio like the pros do</div>
                                </div>
                            </a>
                            <a class="dropdown-item" role="menuitem" onclick="navScrollToSection('heroSection'); closeAllDropdowns();">
                                <span class="dropdown-item-icon">👨‍👩‍👧‍👦</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">For Families</div>
                                    <div class="dropdown-item-desc">Get clarity across multiple accounts and beneficiaries</div>
                                </div>
                            </a>
                            <a class="dropdown-item" role="menuitem" onclick="navScrollToSection('heroSection'); closeAllDropdowns();">
                                <span class="dropdown-item-icon">📋</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">For Financial Advisors <span class="tag-coming-soon">Coming Soon</span></div>
                                    <div class="dropdown-item-desc">Quick portfolio diagnostics for client onboarding</div>
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- Resources Dropdown -->
                    <div class="nav-item" data-dropdown="resources">
                        <button class="nav-link" aria-haspopup="true" aria-expanded="false">
                            Resources
                            <svg class="nav-link-chevron" viewBox="0 0 10 10" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M2 3.5L5 6.5L8 3.5"/>
                            </svg>
                        </button>
                        <div class="nav-dropdown" role="menu">
                            <a class="dropdown-item" role="menuitem" onclick="navScrollToSection('howItWorksSection'); closeAllDropdowns();">
                                <span class="dropdown-item-icon">📖</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">How It Works</div>
                                    <div class="dropdown-item-desc">Learn how Statement Scan analyzes your portfolio</div>
                                </div>
                            </a>
                            <a class="dropdown-item" role="menuitem" onclick="scrollToUpload(); closeAllDropdowns();">
                                <span class="dropdown-item-icon">🏦</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">Supported Brokerages</div>
                                    <div class="dropdown-item-desc">Upload from Schwab, Fidelity, Vanguard & 50+ more</div>
                                </div>
                            </a>
                            <a class="dropdown-item" role="menuitem" onclick="navScrollToSection('valuePropsSection'); closeAllDropdowns();">
                                <span class="dropdown-item-icon">🔒</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">Privacy & Security</div>
                                    <div class="dropdown-item-desc">How we protect your data</div>
                                </div>
                            </a>
                            <a class="dropdown-item" role="menuitem" href="mailto:support@statementscan.app" onclick="closeAllDropdowns();">
                                <span class="dropdown-item-icon">📬</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">Contact Us</div>
                                    <div class="dropdown-item-desc">Get in touch with our team</div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Right: Actions -->
                <div class="nav-right">
                    <!-- Mobile Menu Button -->
                    <button class="mobile-menu-btn" onclick="openMobileMenu()" aria-label="Open menu">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="3" y1="6" x2="21" y2="6"/>
                            <line x1="3" y1="12" x2="21" y2="12"/>
                            <line x1="3" y1="18" x2="21" y2="18"/>
                        </svg>
                    </button>
                    <div id="authSection">
                        <button class="btn btn-secondary" id="loginBtn" onclick="showAuthModal()">
                            Sign In
                        </button>
                    </div>
                    <button class="btn-get-started" onclick="showAuthModal(); switchAuthTab('register');">Create Account</button>
                </div>
            </div>
        </nav>

        <!-- Mobile Menu Overlay -->
            <div class="mobile-menu-overlay" id="mobileMenuOverlay">
                <div class="mobile-menu-header">
                    <a href="/" class="logo" style="text-decoration: none;">
                        <div class="logo-icon">
                            <svg viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="0" y="0" width="24" height="24" rx="4" fill="white"/>
                                <rect x="20" y="20" width="24" height="24" rx="4" fill="white"/>
                                <rect x="0" y="19" width="44" height="6" fill="white" opacity="0.4"/>
                                <rect x="16" y="16" width="12" height="12" rx="2" fill="white"/>
                            </svg>
                        </div>
                        <div class="brand-text">
                            <span class="brand-name">Statement Scan</span>
                        </div>
                    </a>
                    <button class="mobile-menu-close" onclick="closeMobileMenu()" aria-label="Close menu">✕</button>
                </div>
                <div class="mobile-menu-content">
                    <!-- Products Accordion -->
                    <div class="mobile-accordion" data-accordion="products">
                        <button class="mobile-accordion-header" onclick="toggleMobileAccordion('products')">
                            Products
                            <svg viewBox="0 0 10 10" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M2 3.5L5 6.5L8 3.5"/>
                            </svg>
                        </button>
                        <div class="mobile-accordion-content">
                            <a class="mobile-dropdown-item" onclick="navScrollToUpload('upload'); closeMobileMenu();">
                                <span class="dropdown-item-icon">📄</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">Statement Upload</div>
                                    <div class="dropdown-item-desc">Upload PDF or CSV brokerage statements</div>
                                </div>
                            </a>
                            <a class="mobile-dropdown-item" onclick="navScrollToUpload('manual'); closeMobileMenu();">
                                <span class="dropdown-item-icon">✏️</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">Manual Entry</div>
                                    <div class="dropdown-item-desc">Enter holdings by ticker and quantity</div>
                                </div>
                            </a>
                            <a class="mobile-dropdown-item" onclick="navScrollToUpload('connect'); closeMobileMenu();">
                                <span class="dropdown-item-icon">🔗</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">Brokerage Connect <span class="tag-coming-soon">Coming Soon</span></div>
                                    <div class="dropdown-item-desc">Link your account directly</div>
                                </div>
                            </a>
                            <a class="mobile-dropdown-item" onclick="navScrollToSection('previewSection'); closeMobileMenu();">
                                <span class="dropdown-item-icon">📊</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">Portfolio Report</div>
                                    <div class="dropdown-item-desc">Allocation and risk analysis</div>
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- Solutions Accordion -->
                    <div class="mobile-accordion" data-accordion="solutions">
                        <button class="mobile-accordion-header" onclick="toggleMobileAccordion('solutions')">
                            Solutions
                            <svg viewBox="0 0 10 10" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M2 3.5L5 6.5L8 3.5"/>
                            </svg>
                        </button>
                        <div class="mobile-accordion-content">
                            <a class="mobile-dropdown-item" onclick="navScrollToSection('heroSection'); closeMobileMenu();">
                                <span class="dropdown-item-icon">🧑‍💼</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">For Self-Directed Investors</div>
                                    <div class="dropdown-item-desc">Understand your portfolio like the pros</div>
                                </div>
                            </a>
                            <a class="mobile-dropdown-item" onclick="navScrollToSection('heroSection'); closeMobileMenu();">
                                <span class="dropdown-item-icon">👨‍👩‍👧‍👦</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">For Families</div>
                                    <div class="dropdown-item-desc">Clarity across multiple accounts</div>
                                </div>
                            </a>
                            <a class="mobile-dropdown-item" onclick="navScrollToSection('heroSection'); closeMobileMenu();">
                                <span class="dropdown-item-icon">📋</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">For Financial Advisors <span class="tag-coming-soon">Coming Soon</span></div>
                                    <div class="dropdown-item-desc">Client onboarding diagnostics</div>
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- Resources Accordion -->
                    <div class="mobile-accordion" data-accordion="resources">
                        <button class="mobile-accordion-header" onclick="toggleMobileAccordion('resources')">
                            Resources
                            <svg viewBox="0 0 10 10" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M2 3.5L5 6.5L8 3.5"/>
                            </svg>
                        </button>
                        <div class="mobile-accordion-content">
                            <a class="mobile-dropdown-item" onclick="navScrollToSection('howItWorksSection'); closeMobileMenu();">
                                <span class="dropdown-item-icon">📖</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">How It Works</div>
                                    <div class="dropdown-item-desc">Learn about the analysis process</div>
                                </div>
                            </a>
                            <a class="mobile-dropdown-item" onclick="scrollToUpload(); closeMobileMenu();">
                                <span class="dropdown-item-icon">🏦</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">Supported Brokerages</div>
                                    <div class="dropdown-item-desc">Schwab, Fidelity, Vanguard & 50+ more</div>
                                </div>
                            </a>
                            <a class="mobile-dropdown-item" onclick="navScrollToSection('valuePropsSection'); closeMobileMenu();">
                                <span class="dropdown-item-icon">🔒</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">Privacy & Security</div>
                                    <div class="dropdown-item-desc">How we protect your data</div>
                                </div>
                            </a>
                            <a class="mobile-dropdown-item" href="mailto:support@statementscan.app" onclick="closeMobileMenu();">
                                <span class="dropdown-item-icon">📬</span>
                                <div class="dropdown-item-content">
                                    <div class="dropdown-item-title">Contact Us</div>
                                    <div class="dropdown-item-desc">Get in touch</div>
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="mobile-menu-actions">
                        <button class="btn btn-secondary" onclick="showAuthModal(); closeMobileMenu();">Sign In</button>
                        <button class="btn-get-started" onclick="showAuthModal(); switchAuthTab('register'); closeMobileMenu();">Create Account</button>
                    </div>
                </div>
            </div>

        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-inner">
            <div class="hero-grid">
                <!-- Left Column: Content -->
                <div class="hero-content">
                    <div class="hero-badge" data-hero-animate style="animation-delay: 0s;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/>
                        </svg>
                        AI-Powered Portfolio Intelligence
                    </div>
                    <h1 class="hero-title" data-hero-animate style="animation-delay: 0.08s;">Your brokerage statement, <span class="gradient-text">decoded</span></h1>
                    <p class="hero-subtitle" data-hero-animate style="animation-delay: 0.16s;">Upload any statement and get instant portfolio analytics, fee analysis, and actionable insights — completely free, no account required.</p>
                    <div class="hero-ctas" data-hero-animate style="animation-delay: 0.24s;">
                        <button class="hero-cta-primary" onclick="scrollToUpload()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="17 8 12 3 7 8"/>
                                <line x1="12" y1="3" x2="12" y2="15"/>
                            </svg>
                            Analyze Your Portfolio — Free
                        </button>
                        <a href="#landingSections" class="hero-cta-link">
                            See how it works
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"/>
                                <polyline points="12 5 19 12 12 19"/>
                            </svg>
                        </a>
                    </div>
                    <p class="hero-trust-line">✓ Free forever · No credit card · No signup required · 100% private</p>
                </div>

                <!-- Right Column: Upload Widget -->
                <div class="hero-upload-wrapper" data-hero-animate style="animation-delay: 0.35s;">
                    <div class="hero-upload-glow"></div>
                    <div class="hero-upload-card">
                        <!-- Entry Method Selector -->
                        <div class="entry-methods" style="margin-bottom: 20px;">
                            <button class="entry-method-btn active" data-method="upload" onclick="switchEntryMethod('upload')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                Upload Files
                            </button>
                            <button class="entry-method-btn" data-method="manual" onclick="switchEntryMethod('manual')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                </svg>
                                Manual
                            </button>
                            <button class="entry-method-btn" data-method="connect" onclick="switchEntryMethod('connect')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="2" y="4" width="20" height="16" rx="2"/>
                                    <path d="M7 15h0M2 9h20"/>
                                </svg>
                                Connect
                            </button>
                        </div>

                        <main id="main-content">
                        <!-- Error message container is now replaced by toast system -->
                        <div class="error-message" id="errorMessage" role="alert" aria-live="polite"></div>

                        <!-- Upload Section -->
                        <div id="uploadSection">

                            <!-- Upload Panel -->
                            <div class="entry-panel active" id="uploadPanel">
                                <div class="upload-drop-area" id="dropZone">
                                    <div class="upload-icon">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                            <polyline points="17 8 12 3 7 8"/>
                                            <line x1="12" y1="3" x2="12" y2="15"/>
                                        </svg>
                                    </div>
                                    <div class="upload-title">Drop your statement here</div>
                                    <p class="upload-hint">PDF, CSV, OFX, QFX, or image files (PNG, JPG, HEIC) from any brokerage</p>
                                    <span class="upload-free-badge">100% free · Analyzed on your device</span>
                                    <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()" aria-label="Select files to upload">
                                        Select Files
                                    </button>
                                    <input type="file" id="fileInput" accept=".pdf,.csv,.ofx,.qfx,.png,.jpg,.jpeg,.webp,.heic,.heif" multiple aria-label="File input for brokerage statements">

                                    <!-- PII Redaction Toggle -->
                                    <div class="redact-pii-option">
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="redactPiiToggle" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                        <div class="redact-pii-label">
                                            <span class="redact-pii-title">Redact sensitive info</span>
                                            <span class="redact-pii-hint">Mask account numbers, SSN</span>
                                        </div>
                                    </div>

                                    <!-- Upload Queue (shown during batch upload) -->
                                    <div class="upload-queue" id="uploadQueue" style="display: none;">
                                        <div class="upload-queue-header">
                                            <span id="uploadQueueTitle">Uploading files...</span>
                                            <span id="uploadQueueCount"></span>
                                        </div>
                                        <div id="uploadQueueList"></div>
                                    </div>
                                </div>
                            </div>

            <!-- Manual Entry Panel -->
            <div class="entry-panel" id="manualPanel">
                <div class="card manual-entry-card">
                    <div class="upload-title" style="text-align: center; margin-bottom: 8px;">Enter your holdings</div>
                    <p class="upload-hint" style="text-align: center; margin-bottom: 16px;">Add positions by quantity or percentage allocation</p>

                    <!-- Input Mode Toggle -->
                    <div class="input-mode-toggle" style="display: flex; justify-content: center; gap: 8px; margin-bottom: 20px;">
                        <button class="mode-btn active" id="modeQuantity" onclick="setInputMode('quantity')">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="7" height="7"/>
                                <rect x="14" y="3" width="7" height="7"/>
                                <rect x="14" y="14" width="7" height="7"/>
                                <rect x="3" y="14" width="7" height="7"/>
                            </svg>
                            Quantity
                        </button>
                        <button class="mode-btn" id="modePercent" onclick="setInputMode('percent')">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="19" cy="5" r="2"/>
                                <circle cx="5" cy="19" r="2"/>
                                <line x1="5" y1="5" x2="19" y2="19"/>
                            </svg>
                            Allocation
                        </button>
                    </div>

                    <!-- Portfolio Value Input (for % Allocation mode) -->
                    <div id="portfolioValueSection" style="display: none; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 12px; padding: 16px; background: var(--bg-secondary); border-radius: var(--radius-md);">
                            <label style="font-weight: 500; color: var(--text-secondary);">Total Portfolio Value:</label>
                            <div style="position: relative;">
                                <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-muted);">$</span>
                                <input type="number" id="portfolioValueInput" placeholder="100,000" value="100000" step="1000" min="1"
                                    style="padding: 10px 12px 10px 24px; border: 1px solid var(--border); border-radius: var(--radius-sm); font-size: 1rem; width: 150px;"
                                    onchange="updatePortfolioValue()">
                            </div>
                            <span id="allocationSummary" style="font-size: 0.875rem; color: var(--text-muted);">0% allocated</span>
                        </div>
                    </div>

                    <div class="manual-entry-form">
                        <div class="form-group" style="flex: 1.5;">
                            <label>Symbol or Name</label>
                            <div class="symbol-input-wrapper">
                                <input type="text" id="manualSymbol" placeholder="e.g., AAPL or Apple"
                                    oninput="searchStocks(this.value)"
                                    onblur="setTimeout(() => hideStockSearch(), 200)"
                                    onfocus="if(this.value.length >= 1) searchStocks(this.value)"
                                    onkeydown="handleSymbolKeydown(event)"
                                    autocomplete="off">
                                <div class="stock-search-results" id="stockSearchResults"></div>
                            </div>
                        </div>
                        <div class="form-group" id="quantityGroup">
                            <label id="quantityLabel">Quantity</label>
                            <input type="number" id="manualShares" placeholder="100" value="100" step="any" onkeypress="if(event.key==='Enter') addManualHolding()">
                        </div>
                        <div class="form-group" id="priceGroup">
                            <label>Price <span id="priceStatus" style="font-weight: normal; font-size: 0.7rem; color: var(--text-muted);"></span></label>
                            <input type="number" id="manualPrice" placeholder="Auto-fetch" step="0.01" onkeypress="if(event.key==='Enter') addManualHolding()">
                        </div>
                        <button class="btn btn-primary btn-add" onclick="addManualHolding()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"/>
                                <line x1="5" y1="12" x2="19" y2="12"/>
                            </svg>
                            Add
                        </button>
                    </div>

                    <div class="holdings-list" id="manualHoldingsList">
                        <div class="holdings-list-header">
                            <span>Symbol</span>
                            <span>Shares</span>
                            <span>Price</span>
                            <span>Value</span>
                            <span></span>
                        </div>
                        <div class="holdings-list-empty" id="holdingsEmpty">
                            No holdings added yet. Enter a symbol above to get started.
                        </div>
                    </div>

                    <div class="manual-entry-actions">
                        <div class="manual-total">
                            Total: <strong id="manualTotal">$0.00</strong>
                        </div>
                        <div style="display: flex; gap: 12px;">
                            <button class="btn btn-secondary" onclick="clearManualHoldings()" aria-label="Clear all holdings">Clear All</button>
                            <button class="btn btn-primary" id="analyzeManualBtn" onclick="analyzeManualHoldings()" disabled aria-label="Analyze portfolio">
                                Analyze Portfolio
                                <span class="kbd" style="margin-left: 8px;">Ctrl+Enter</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Connect Account Panel -->
            <div class="entry-panel" id="connectPanel">
                <div class="card upload-card coming-soon-card">
                    <div class="coming-soon-badge">Coming Soon</div>
                    <div class="upload-icon coming-soon-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="4" width="20" height="16" rx="2"/>
                            <path d="M7 15h0M2 9h20"/>
                        </svg>
                    </div>
                    <div class="upload-title">Connect your brokerage</div>
                    <p class="upload-hint">Securely link your account to automatically import holdings from Schwab, Fidelity, Vanguard, and more.</p>
                    <div class="coming-soon-features">
                        <div class="feature-item">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <polyline points="22 4 12 14.01 9 11.01"/>
                            </svg>
                            <span>Automatic portfolio sync</span>
                        </div>
                        <div class="feature-item">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <polyline points="22 4 12 14.01 9 11.01"/>
                            </svg>
                            <span>Real-time price updates</span>
                        </div>
                        <div class="feature-item">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <polyline points="22 4 12 14.01 9 11.01"/>
                            </svg>
                            <span>Bank-level security with Plaid</span>
                        </div>
                    </div>
                    <button class="btn btn-secondary" disabled style="opacity: 0.6; cursor: not-allowed;">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        Available Soon
                    </button>
                    <p class="coming-soon-note">We're working hard to bring you seamless brokerage integration. In the meantime, upload your statements or enter holdings manually.</p>
                </div>
            </div>

            <div class="accounts-section" id="accountsSection" style="display: none;">
                <div class="accounts-header">
                    <h3>Uploaded Accounts</h3>
                    <button class="btn btn-secondary" id="addMoreBtn">Add More</button>
                </div>
                <div id="accountsList"></div>
                <div class="actions-row">
                    <button class="btn btn-primary" id="analyzeBtn" disabled aria-label="Analyze portfolio">
                        Analyze Portfolio
                        <span class="kbd" style="margin-left: 8px;">Ctrl+Enter</span>
                    </button>
                    <button class="btn btn-secondary" id="downloadRedactedBtn" onclick="downloadRedactedPdf()" style="display: none;" aria-label="Download redacted PDF">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        Download Redacted
                    </button>
                    <button class="btn btn-secondary" id="clearAllBtn" aria-label="Clear all accounts">Clear All</button>
                </div>
            </div>

            <!-- Plaid Integration Section -->
            <div class="plaid-section" id="plaidSection" style="display: none;">
                <div class="plaid-header">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="4" width="20" height="16" rx="2"/>
                            <path d="M7 15h0M2 9h20"/>
                        </svg>
                        Connected Accounts
                    </h3>
                    <button class="btn btn-primary" onclick="connectPlaidAccount()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="12" y1="8" x2="12" y2="16"/>
                            <line x1="8" y1="12" x2="16" y2="12"/>
                        </svg>
                        Connect Account
                    </button>
                </div>
                <div class="plaid-connections" id="plaidConnections">
                    <!-- Populated dynamically -->
                </div>
            </div>
        </div><!-- End uploadSection -->
                    </div><!-- End hero-upload-card -->
                </div><!-- End hero-upload-wrapper -->
            </div><!-- End hero-grid -->

            <!-- Brokerage Logo Strip (Social Proof) - Inside Hero -->
            <div class="brokerage-strip">
                <p class="brokerage-strip-label">Works with statements from</p>
                <div class="brokerage-strip-logos">
                    <div class="brokerage-strip-track">
                        <!-- First set -->
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/schwab.com" alt="Schwab" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=schwab.com&sz=128';"><span class="brokerage-name">Schwab</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/fidelity.com" alt="Fidelity" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=fidelity.com&sz=128';"><span class="brokerage-name">Fidelity</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/vanguard.com" alt="Vanguard" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=vanguard.com&sz=128';"><span class="brokerage-name">Vanguard</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/etrade.com" alt="E*TRADE" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=etrade.com&sz=128';"><span class="brokerage-name">E*TRADE</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/tdameritrade.com" alt="TD Ameritrade" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=tdameritrade.com&sz=128';"><span class="brokerage-name">TD Ameritrade</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/robinhood.com" alt="Robinhood" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=robinhood.com&sz=128';"><span class="brokerage-name">Robinhood</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/ml.com" alt="Merrill" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=ml.com&sz=128';"><span class="brokerage-name">Merrill</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/interactivebrokers.com" alt="Interactive Brokers" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=interactivebrokers.com&sz=128';"><span class="brokerage-name">Interactive Brokers</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/ally.com" alt="Ally Invest" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=ally.com&sz=128';"><span class="brokerage-name">Ally Invest</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/webull.com" alt="Webull" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=webull.com&sz=128';"><span class="brokerage-name">Webull</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/sofi.com" alt="SoFi" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=sofi.com&sz=128';"><span class="brokerage-name">SoFi</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/betterment.com" alt="Betterment" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=betterment.com&sz=128';"><span class="brokerage-name">Betterment</span></div>
                        <!-- Duplicate for seamless loop -->
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/schwab.com" alt="Schwab" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=schwab.com&sz=128';"><span class="brokerage-name">Schwab</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/fidelity.com" alt="Fidelity" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=fidelity.com&sz=128';"><span class="brokerage-name">Fidelity</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/vanguard.com" alt="Vanguard" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=vanguard.com&sz=128';"><span class="brokerage-name">Vanguard</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/etrade.com" alt="E*TRADE" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=etrade.com&sz=128';"><span class="brokerage-name">E*TRADE</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/tdameritrade.com" alt="TD Ameritrade" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=tdameritrade.com&sz=128';"><span class="brokerage-name">TD Ameritrade</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/robinhood.com" alt="Robinhood" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=robinhood.com&sz=128';"><span class="brokerage-name">Robinhood</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/ml.com" alt="Merrill" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=ml.com&sz=128';"><span class="brokerage-name">Merrill</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/interactivebrokers.com" alt="Interactive Brokers" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=interactivebrokers.com&sz=128';"><span class="brokerage-name">Interactive Brokers</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/ally.com" alt="Ally Invest" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=ally.com&sz=128';"><span class="brokerage-name">Ally Invest</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/webull.com" alt="Webull" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=webull.com&sz=128';"><span class="brokerage-name">Webull</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/sofi.com" alt="SoFi" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=sofi.com&sz=128';"><span class="brokerage-name">SoFi</span></div>
                        <div class="brokerage-logo"><img src="https://logo.clearbit.com/betterment.com" alt="Betterment" class="brokerage-logo-img" loading="lazy" onerror="this.src='https://www.google.com/s2/favicons?domain=betterment.com&sz=128';"><span class="brokerage-name">Betterment</span></div>
                    </div>
                </div>
                <p class="brokerage-strip-more">+ 50 more brokerages supported</p>
            </div>

            </div><!-- End hero-inner -->
        </section><!-- End hero-section -->

        <!-- Progress -->
        <div class="progress-section" id="progressSection">
            <div class="progress-container">
                <!-- Stage Indicators -->
                <div class="progress-stages" id="progressStages">
                    <div class="progress-stage" data-stage="upload">
                        <div class="progress-stage-icon">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="17 8 12 3 7 8"/>
                                <line x1="12" y1="3" x2="12" y2="15"/>
                            </svg>
                        </div>
                        <span class="progress-stage-label">Upload</span>
                    </div>
                    <div class="progress-stage" data-stage="parse">
                        <div class="progress-stage-icon">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                                <line x1="16" y1="13" x2="8" y2="13"/>
                                <line x1="16" y1="17" x2="8" y2="17"/>
                            </svg>
                        </div>
                        <span class="progress-stage-label">Parse</span>
                    </div>
                    <div class="progress-stage" data-stage="analyze">
                        <div class="progress-stage-icon">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="20" x2="18" y2="10"/>
                                <line x1="12" y1="20" x2="12" y2="4"/>
                                <line x1="6" y1="20" x2="6" y2="14"/>
                            </svg>
                        </div>
                        <span class="progress-stage-label">Analyze</span>
                    </div>
                    <div class="progress-stage" data-stage="render">
                        <div class="progress-stage-icon">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <line x1="3" y1="9" x2="21" y2="9"/>
                                <line x1="9" y1="21" x2="9" y2="9"/>
                            </svg>
                        </div>
                        <span class="progress-stage-label">Build</span>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="progress-bar-container">
                    <div class="progress-bar-fill" id="progressBarFill" style="width: 0%"></div>
                </div>

                <!-- Stats Row -->
                <div class="progress-stats">
                    <span class="progress-percentage" id="progressPercentage">0%</span>
                    <span class="progress-time" id="progressTime">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        <span id="progressElapsed">0s</span>
                    </span>
                </div>

                <!-- Status Text -->
                <p class="progress-text" id="progressText">Analyzing your portfolio...</p>

                <!-- File Info -->
                <div class="progress-file-info" id="progressFileInfo" style="display: none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                    </svg>
                    <span id="progressFileName">--</span>
                </div>

                <!-- Tip -->
                <div class="progress-tip" id="progressTip">
                    <strong>Tip:</strong> Larger files with more positions take longer to process. Complex statements may require additional parsing time.
                </div>
            </div>
        </div>

        <!-- Market Indicators Widget -->
        <div class="market-indicators" id="marketIndicators">
            <div class="market-indicator">
                <span class="market-indicator-name">S&P 500</span>
                <span class="market-indicator-value" id="spyValue">--</span>
                <span class="market-indicator-change up" id="spyChange">--</span>
            </div>
            <div class="market-indicator">
                <span class="market-indicator-name">NASDAQ</span>
                <span class="market-indicator-value" id="qqqValue">--</span>
                <span class="market-indicator-change up" id="qqqChange">--</span>
            </div>
            <div class="market-indicator">
                <span class="market-indicator-name">DOW</span>
                <span class="market-indicator-value" id="diaValue">--</span>
                <span class="market-indicator-change up" id="diaChange">--</span>
            </div>
            <div class="market-indicator">
                <span class="market-indicator-name">VIX</span>
                <span class="market-indicator-value" id="vixValue">--</span>
                <span class="market-indicator-change" id="vixChange">--</span>
            </div>
            <div class="market-indicator">
                <span class="market-indicator-name">10Y Treasury</span>
                <span class="market-indicator-value" id="tltValue">--</span>
                <span class="market-indicator-change" id="tltChange">--</span>
            </div>
            <div class="market-indicator">
                <span class="market-indicator-name">Gold</span>
                <span class="market-indicator-value" id="gldValue">--</span>
                <span class="market-indicator-change up" id="gldChange">--</span>
            </div>
            <div class="market-indicator">
                <span class="market-indicator-name">Bitcoin</span>
                <span class="market-indicator-value" id="btcValue">--</span>
                <span class="market-indicator-change up" id="btcChange">--</span>
            </div>
        </div>

        <div class="dashboard" id="dashboard" style="display: none !important;">
            <script>
                if (window.location.hash === '#dashboard') {
                    window.location.href = '/app';
                }
            </script>
        </div>
        </main><!-- End main content -->

        <!-- Wave Divider: Hero area to How It Works (inverted curve) -->
        <div class="section-divider hero-to-dark">
            <svg viewBox="0 0 1440 80" fill="none" preserveAspectRatio="none">
                <path d="M0,80 C360,0 1080,0 1440,80 L1440,80 L0,80 Z" fill="#0A2540"/>
            </svg>
        </div>

        <!-- Landing Page Sections -->
        <div class="landing-sections" id="landingSections">

            <!-- How It Works Section -->
            <section class="landing-section how-it-works" data-animate>
                <div class="container">
                    <div class="section-badge">Simple 3-Step Process</div>
                    <h2 class="section-heading">How It Works</h2>
                    <p class="section-subheading">Get professional portfolio analytics in three simple steps</p>
                    <div class="how-it-works-grid" data-animate-child>
                        <div class="step-card">
                            <div class="step-number">1</div>
                            <div class="step-icon">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                            </div>
                            <h3 class="step-title">Upload Your Statement</h3>
                            <p class="step-description">Drag and drop your brokerage PDF or CSV. We support Schwab, Fidelity, Vanguard, and 50+ other brokerages.</p>
                        </div>
                        <div class="step-connector">
                            <svg width="40" height="2"><line x1="0" y1="1" x2="40" y2="1" stroke="rgba(99,91,255,0.3)" stroke-width="2" stroke-dasharray="6,4"/></svg>
                        </div>
                        <div class="step-card">
                            <div class="step-number">2</div>
                            <div class="step-icon">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/>
                                </svg>
                            </div>
                            <h3 class="step-title">AI Analyzes Holdings</h3>
                            <p class="step-description">Our engine extracts positions, fetches live prices, and runs sophisticated portfolio analytics in seconds.</p>
                        </div>
                        <div class="step-connector">
                            <svg width="40" height="2"><line x1="0" y1="1" x2="40" y2="1" stroke="rgba(99,91,255,0.3)" stroke-width="2" stroke-dasharray="6,4"/></svg>
                        </div>
                        <div class="step-card">
                            <div class="step-number">3</div>
                            <div class="step-icon">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path d="M21.21 15.89A10 10 0 1 1 8 2.83"/>
                                    <path d="M22 12A10 10 0 0 0 12 2v10z"/>
                                </svg>
                            </div>
                            <h3 class="step-title">Get Actionable Insights</h3>
                            <p class="step-description">View allocation breakdowns, risk metrics, fee analysis, and personalized recommendations.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Social Proof Section -->
            <section class="social-proof-section">
                <div class="social-proof-container">
                    <div class="social-proof-stats">
                        <div class="social-proof-stat">
                            <div class="social-proof-number">50<span>+</span></div>
                            <div class="social-proof-label">Brokerages Supported</div>
                        </div>
                        <div class="social-proof-divider"></div>
                        <div class="social-proof-stat">
                            <div class="social-proof-number"><span>$</span>2.8B</div>
                            <div class="social-proof-label">Portfolios Analyzed</div>
                        </div>
                        <div class="social-proof-divider"></div>
                        <div class="social-proof-stat">
                            <div class="social-proof-number">100<span>%</span></div>
                            <div class="social-proof-label">Private & Secure</div>
                        </div>
                        <div class="social-proof-divider"></div>
                        <div class="social-proof-stat">
                            <div class="social-proof-number"><span>&lt;</span>30s</div>
                            <div class="social-proof-label">Average Analysis Time</div>
                        </div>
                    </div>
                    <div class="social-proof-testimonial">
                        <p class="testimonial-quote">"Finally found a tool that shows me exactly where my money is going. The fee analysis alone saved me from losing thousands in hidden costs."</p>
                        <div class="testimonial-author">
                            <div class="testimonial-avatar">MK</div>
                            <div class="testimonial-info">
                                <div class="testimonial-name">Michael K.</div>
                                <div class="testimonial-role">Self-directed Investor</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Wave Divider: How It Works to Preview -->
            <div class="section-divider section-divider-inverted">
                <svg viewBox="0 0 1440 60" preserveAspectRatio="none">
                    <path d="M0,60 C360,0 1080,0 1440,60 L1440,60 L0,60 Z" fill="#0A2540"/>
                </svg>
            </div>

            <!-- Sample Report Preview Section -->
            <section class="landing-section preview-section" data-animate>
                <div class="container">
                    <div class="section-badge">Portfolio Intelligence</div>
                    <h2 class="section-heading">See What's In Your Report</h2>
                    <p class="section-subheading">Professional-grade analytics for investors and advisors — powered by AI</p>
                    <div class="browser-frame">
                        <div class="browser-header">
                            <div class="browser-dots">
                                <span class="browser-dot red"></span>
                                <span class="browser-dot yellow"></span>
                                <span class="browser-dot green"></span>
                            </div>
                            <div class="browser-url-bar">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                                    <path d="M9 12l2 2 4-4"/>
                                </svg>
                                statementscan.app/report
                            </div>
                        </div>
                        <div class="browser-content">
                            <div class="preview-grid">
                        <div class="preview-card">
                            <div class="preview-card-header">
                                <h3>Asset Allocation</h3>
                            </div>
                            <div class="preview-card-body">
                                <div class="pv-donut">
                                    <div class="pv-donut-ring">
                                        <span class="pv-donut-value">$847K</span>
                                        <span class="pv-donut-label">Total Value</span>
                                    </div>
                                    <div class="pv-donut-legend">
                                        <span class="pv-legend-item"><span class="pv-dot pv-dot-stocks"></span>Stocks 62%</span>
                                        <span class="pv-legend-item"><span class="pv-dot pv-dot-bonds"></span>Bonds 24%</span>
                                        <span class="pv-legend-item"><span class="pv-dot pv-dot-cash"></span>Cash 14%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="preview-card">
                            <div class="preview-card-header">
                                <h3>Risk Score</h3>
                            </div>
                            <div class="preview-card-body">
                                <div class="pv-gauge">
                                    <div class="pv-gauge-arc"></div>
                                    <div class="pv-gauge-needle"></div>
                                    <div class="pv-gauge-info">
                                        <span class="pv-gauge-value">67</span>
                                        <span class="pv-gauge-label">Moderate</span>
                                    </div>
                                    <div class="pv-gauge-scale">
                                        <span>Conservative</span>
                                        <span>Aggressive</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="preview-card">
                            <div class="preview-card-header">
                                <h3>Sector Exposure</h3>
                            </div>
                            <div class="preview-card-body">
                                <div class="pv-bars">
                                    <div class="pv-bar-row">
                                        <span class="pv-bar-label">Technology</span>
                                        <div class="pv-bar-track"><div class="pv-bar-fill" style="width: 100%;"></div></div>
                                        <span class="pv-bar-value">32%</span>
                                    </div>
                                    <div class="pv-bar-row">
                                        <span class="pv-bar-label">Healthcare</span>
                                        <div class="pv-bar-track"><div class="pv-bar-fill" style="width: 56%;"></div></div>
                                        <span class="pv-bar-value">18%</span>
                                    </div>
                                    <div class="pv-bar-row">
                                        <span class="pv-bar-label">Financials</span>
                                        <div class="pv-bar-track"><div class="pv-bar-fill" style="width: 47%;"></div></div>
                                        <span class="pv-bar-value">15%</span>
                                    </div>
                                    <div class="pv-bar-row">
                                        <span class="pv-bar-label">Consumer</span>
                                        <div class="pv-bar-track"><div class="pv-bar-fill" style="width: 38%;"></div></div>
                                        <span class="pv-bar-value">12%</span>
                                    </div>
                                    <div class="pv-bar-row">
                                        <span class="pv-bar-label">Other</span>
                                        <div class="pv-bar-track"><div class="pv-bar-fill" style="width: 72%;"></div></div>
                                        <span class="pv-bar-value">23%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="preview-card">
                            <div class="preview-card-header">
                                <h3>Fee Analysis</h3>
                            </div>
                            <div class="preview-card-body">
                                <div class="fee-mockup">
                                    <div class="fee-stat">
                                        <span class="fee-amount">$2,847</span>
                                        <span class="fee-label">Annual Fees</span>
                                    </div>
                                    <div class="fee-breakdown">
                                        <div class="fee-item warning">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                                <line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
                                            </svg>
                                            <span>ARKK: 0.75% expense ratio</span>
                                        </div>
                                        <div class="fee-item">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                                <polyline points="22 4 12 14.01 9 11.01"/>
                                            </svg>
                                            <span>VOO: 0.03% expense ratio</span>
                                        </div>
                                    </div>
                                    <div class="fee-savings">
                                        <span>Potential Savings: <strong>$1,200/yr</strong></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="preview-card">
                            <div class="preview-card-header">
                                <h3>Performance Analysis</h3>
                            </div>
                            <div class="preview-card-body">
                                <div class="pv-performance">
                                    <div class="pv-perf-summary">
                                        <div class="pv-perf-metric">
                                            <span class="pv-perf-value positive">+18.4%</span>
                                            <span class="pv-perf-label">Total Return</span>
                                        </div>
                                        <div class="pv-perf-metric">
                                            <span class="pv-perf-value">+12.1%</span>
                                            <span class="pv-perf-label">vs. S&P 500</span>
                                        </div>
                                        <div class="pv-perf-metric">
                                            <span class="pv-perf-value">1.32</span>
                                            <span class="pv-perf-label">Sharpe Ratio</span>
                                        </div>
                                    </div>
                                    <div class="pv-perf-chart">
                                        <div class="pv-perf-bars">
                                            <div class="pv-perf-bar positive" style="height: 60%;" title="Jan +3.2%"></div>
                                            <div class="pv-perf-bar negative" style="height: 20%;" title="Feb -1.1%"></div>
                                            <div class="pv-perf-bar positive" style="height: 45%;" title="Mar +2.4%"></div>
                                            <div class="pv-perf-bar positive" style="height: 75%;" title="Apr +4.1%"></div>
                                            <div class="pv-perf-bar negative" style="height: 35%;" title="May -1.8%"></div>
                                            <div class="pv-perf-bar positive" style="height: 55%;" title="Jun +2.9%"></div>
                                            <div class="pv-perf-bar positive" style="height: 40%;" title="Jul +2.1%"></div>
                                            <div class="pv-perf-bar positive" style="height: 80%;" title="Aug +4.5%"></div>
                                            <div class="pv-perf-bar negative" style="height: 15%;" title="Sep -0.7%"></div>
                                            <div class="pv-perf-bar positive" style="height: 50%;" title="Oct +2.6%"></div>
                                            <div class="pv-perf-bar positive" style="height: 65%;" title="Nov +3.5%"></div>
                                            <div class="pv-perf-bar positive" style="height: 30%;" title="Dec +1.5%"></div>
                                        </div>
                                        <span class="pv-perf-chart-label">Monthly Returns (12 mo.)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><!-- End preview-grid -->
                        </div><!-- End browser-content -->
                    </div><!-- End browser-frame -->
                </div>
            </section>

            <!-- Wave Divider: Preview to Value Props -->
            <div class="section-divider section-divider-light-to-dark">
                <svg viewBox="0 0 1440 80" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
                    <path d="M0,0 C360,80 1080,80 1440,0 L1440,80 L0,80 Z" fill="#0A2540"/>
                </svg>
            </div>

            <!-- Value Props Section -->
            <section class="landing-section value-props" data-animate>
                <div class="container">
                    <h2 class="section-heading">Why Statement Scan?</h2>
                    <p class="section-subheading">Built for investors who want clarity, not complexity</p>
                    <div class="value-props-grid" data-animate-child>
                        <div class="value-card">
                            <div class="value-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <circle cx="11" cy="11" r="8"/>
                                    <path d="M21 21l-4.35-4.35"/>
                                    <path d="M11 8v6M8 11h6"/>
                                </svg>
                            </div>
                            <h3 class="value-title">Hidden Fee Detection</h3>
                            <p class="value-description">Instantly spot high-cost funds eating into your returns. We analyze expense ratios across all your holdings.</p>
                        </div>
                        <div class="value-card">
                            <div class="value-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path d="M3 3v18h18"/>
                                    <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"/>
                                </svg>
                            </div>
                            <h3 class="value-title">Benchmark Comparison</h3>
                            <p class="value-description">See how your portfolio stacks up against the S&P 500, target-date funds, and custom benchmarks.</p>
                        </div>
                        <div class="value-card">
                            <div class="value-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                                    <path d="M9 12l2 2 4-4"/>
                                </svg>
                            </div>
                            <h3 class="value-title">Risk Analysis</h3>
                            <p class="value-description">Understand your true risk exposure with volatility metrics, concentration warnings, and scenario analysis.</p>
                        </div>
                        <div class="value-card">
                            <div class="value-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                                    <circle cx="12" cy="16" r="1"/>
                                </svg>
                            </div>
                            <h3 class="value-title">Privacy First</h3>
                            <p class="value-description">Your data stays yours. We never store your statements or sell your information. Analyze locally or delete anytime.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Wave Divider: Value Props to page background (before CTA) -->
            <div class="section-divider section-divider-dark-to-light">
                <svg viewBox="0 0 1440 80" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
                    <path d="M0,0 C360,80 1080,80 1440,0 L1440,80 L0,80 Z" fill="#f6f9fc"/>
                </svg>
            </div>

            <!-- CTA Section -->
            <section class="landing-section cta-section">
                <div class="container">
                    <h2 class="cta-heading">Ready to see what's hiding in your portfolio?</h2>
                    <p class="cta-subheading">Free analysis. No account required. Results in 30 seconds.</p>
                    <button class="btn btn-primary btn-lg cta-button" onclick="scrollToUpload()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                        Upload Your Statement
                    </button>
                </div>
            </section>

            <!-- FAQ Section -->
            <section class="landing-section faq-section" data-animate>
                <div class="container">
                    <div class="faq-container">
                        <div class="faq-header">
                            <h2 class="faq-title">Frequently Asked Questions</h2>
                            <p class="faq-subtitle">Everything you need to know about portfolio analysis</p>
                        </div>
                        <div class="faq-list">
                            <div class="faq-item">
                                <button class="faq-question" onclick="toggleFaq(this)">
                                    Is my data secure and private?
                                    <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="12" y1="5" x2="12" y2="19"/>
                                        <line x1="5" y1="12" x2="19" y2="12"/>
                                    </svg>
                                </button>
                                <div class="faq-answer">
                                    <div class="faq-answer-content">
                                        Yes, your data never leaves your device. All analysis happens locally in your browser using JavaScript. We don't upload, store, or transmit your financial statements to any server. Your portfolio data stays completely private.
                                    </div>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-question" onclick="toggleFaq(this)">
                                    Which brokerage statements are supported?
                                    <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="12" y1="5" x2="12" y2="19"/>
                                        <line x1="5" y1="12" x2="19" y2="12"/>
                                    </svg>
                                </button>
                                <div class="faq-answer">
                                    <div class="faq-answer-content">
                                        We support PDF statements from all major brokerages including Fidelity, Schwab, Vanguard, TD Ameritrade, E*TRADE, Merrill Lynch, Morgan Stanley, and many more. We also accept CSV exports from most platforms.
                                    </div>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-question" onclick="toggleFaq(this)">
                                    Is Statement Scan really free?
                                    <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="12" y1="5" x2="12" y2="19"/>
                                        <line x1="5" y1="12" x2="19" y2="12"/>
                                    </svg>
                                </button>
                                <div class="faq-answer">
                                    <div class="faq-answer-content">
                                        Yes, the core portfolio analysis features are completely free with no limits. We plan to offer optional premium features in the future, but analyzing your statements, viewing allocations, and generating reports will always be free.
                                    </div>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-question" onclick="toggleFaq(this)">
                                    Do I need to create an account?
                                    <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="12" y1="5" x2="12" y2="19"/>
                                        <line x1="5" y1="12" x2="19" y2="12"/>
                                    </svg>
                                </button>
                                <div class="faq-answer">
                                    <div class="faq-answer-content">
                                        No account required for basic analysis. Simply upload your statement and get instant results. Creating a free account lets you save portfolios, track changes over time, and access your analysis from any device.
                                    </div>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-question" onclick="toggleFaq(this)">
                                    What insights will I get from my portfolio analysis?
                                    <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="12" y1="5" x2="12" y2="19"/>
                                        <line x1="5" y1="12" x2="19" y2="12"/>
                                    </svg>
                                </button>
                                <div class="faq-answer">
                                    <div class="faq-answer-content">
                                        You'll see your asset allocation breakdown, sector exposure, geographic diversification, hidden fees analysis, dividend income projections, risk metrics, and actionable recommendations to optimize your portfolio.
                                    </div>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-question" onclick="toggleFaq(this)">
                                    How accurate is the analysis?
                                    <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="12" y1="5" x2="12" y2="19"/>
                                        <line x1="5" y1="12" x2="19" y2="12"/>
                                    </svg>
                                </button>
                                <div class="faq-answer">
                                    <div class="faq-answer-content">
                                        Our parser extracts data directly from your statement with high accuracy. We cross-reference holdings against market data for current prices and fund information. For best results, use your most recent official brokerage statement.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </div><!-- End landing sections -->

        <!-- Stripe-Style Footer -->
        <footer class="site-footer">
            <div class="footer-container">
                <!-- Row 1: Brand + Navigation -->
                <div class="footer-top">
                    <div class="footer-brand">
                        <a href="/" class="footer-logo-link">
                            <div class="footer-logo-icon">
                                <svg viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="0" y="0" width="24" height="24" rx="4" fill="white"/>
                                    <rect x="20" y="20" width="24" height="24" rx="4" fill="white"/>
                                    <rect x="0" y="19" width="44" height="6" fill="white" opacity="0.4"/>
                                    <rect x="16" y="16" width="12" height="12" rx="2" fill="white"/>
                                </svg>
                            </div>
                            <span class="footer-brand-name">Statement Scan</span>
                        </a>
                    </div>
                    <nav class="footer-nav">
                        <div class="footer-nav-group">
                            <span class="footer-nav-label">Product</span>
                            <a href="/app">Statement Upload</a>
                            <a href="/app#allocation">Fee Analyzer</a>
                            <a href="/app#allocation">Portfolio Report</a>
                        </div>
                        <div class="footer-nav-group">
                            <span class="footer-nav-label">Resources</span>
                            <a href="#howItWorksSection" onclick="navScrollToSection('howItWorksSection'); return false;">How It Works</a>
                            <a href="#uploadSection" onclick="scrollToUpload(); return false;">Upload Statement</a>
                        </div>
                        <div class="footer-nav-group">
                            <span class="footer-nav-label">Legal</span>
                            <a href="/privacy.html">Privacy</a>
                            <a href="/terms.html">Terms</a>
                            <a href="/disclaimer.html">Disclaimer</a>
                        </div>
                        <div class="footer-nav-group">
                            <span class="footer-nav-label">Company</span>
                            <a href="mailto:support@statementscan.app">Contact</a>
                        </div>
                    </nav>
                </div>

                <!-- Row 2: Disclaimer -->
                <div class="footer-disclaimer">
                    Statement Scan is not a registered investment advisor, broker-dealer, or financial planner. All analytics and recommendations are for informational and educational purposes only and do not constitute financial, investment, tax, or legal advice. Past performance does not guarantee future results.
                </div>

                <!-- Row 3: Copyright + Legal links -->
                <div class="footer-bottom">
                    <span class="footer-copyright">© 2026 Statement Scan, Inc. All rights reserved.</span>
                    <div class="footer-legal-links">
                        <a href="/privacy.html">Privacy</a>
                        <a href="/terms.html">Terms</a>
                        <a href="/cookies.html">Cookies</a>
                        <a href="/sitemap.html">Sitemap</a>
                    </div>
                </div>
            </div>
        </footer>

    <!-- Auth Modal -->
    <div class="modal-overlay" id="authModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Welcome</h2>
                <button class="modal-close" onclick="hideAuthModal()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="auth-tabs">
                    <button class="auth-tab active" data-tab="login" onclick="switchAuthTab('login')">Sign In</button>
                    <button class="auth-tab" data-tab="register" onclick="switchAuthTab('register')">Create Account</button>
                </div>

                <!-- Login Form -->
                <form class="auth-form active" id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label class="form-label" for="loginEmail">Email</label>
                        <input type="email" class="form-input" id="loginEmail" placeholder="you@example.com" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="loginPassword">Password</label>
                        <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" required>
                    </div>
                    <div class="form-error" id="loginError" style="display: none;"></div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Sign In</button>
                    <div class="forgot-password-link">
                        <a href="#" onclick="showForgotPassword(event)">Forgot your password?</a>
                    </div>
                </form>

                <!-- Forgot Password Form -->
                <form class="auth-form" id="forgotPasswordForm" onsubmit="handleForgotPassword(event)">
                    <p class="form-description">Enter your email address and we'll send you a link to reset your password.</p>
                    <div class="form-group">
                        <label class="form-label" for="forgotEmail">Email</label>
                        <input type="email" class="form-input" id="forgotEmail" placeholder="you@example.com" required>
                    </div>
                    <div class="form-error" id="forgotError" style="display: none;"></div>
                    <div class="form-success" id="forgotSuccess" style="display: none;"></div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Send Reset Link</button>
                    <div class="back-to-login">
                        <a href="#" onclick="backToLogin(event)">Back to sign in</a>
                    </div>
                </form>

                <!-- Register Form -->
                <form class="auth-form" id="registerForm" onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label class="form-label" for="registerName">Name (optional)</label>
                        <input type="text" class="form-input" id="registerName" placeholder="Your name">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="registerEmail">Email</label>
                        <input type="email" class="form-input" id="registerEmail" placeholder="you@example.com" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="registerPassword">Password</label>
                        <input type="password" class="form-input" id="registerPassword" placeholder="At least 8 characters" minlength="8" required>
                    </div>
                    <div class="form-error" id="registerError" style="display: none;"></div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Create Account</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Reset Password Modal -->
    <div class="modal-overlay" id="resetPasswordModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Reset Password</h2>
                <button class="modal-close" onclick="hideResetPasswordModal()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form id="resetPasswordForm" onsubmit="handleResetPassword(event)">
                    <p class="form-description">Enter your new password below.</p>
                    <div class="form-group">
                        <label class="form-label" for="newPassword">New Password</label>
                        <input type="password" class="form-input" id="newPassword" placeholder="At least 6 characters" minlength="6" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="confirmPassword">Confirm Password</label>
                        <input type="password" class="form-input" id="confirmPassword" placeholder="Confirm your password" minlength="6" required>
                    </div>
                    <div class="form-error" id="resetError" style="display: none;"></div>
                    <div class="form-success" id="resetSuccess" style="display: none;"></div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Reset Password</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Enhanced Toast Container -->
    <div class="toast-container" id="toastContainer" aria-live="polite" aria-atomic="true">
        <!-- Toasts will be dynamically added here -->
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="spinner"></div>
            <p id="loadingText">Loading...</p>
        </div>
    </div>


    <script>
        const API_URL = 'https://statement-scan-api.onrender.com';

        let accounts = [];
        let portfolioData = null;
        let charts = {};
        let currentUser = null;
        let authToken = localStorage.getItem('authToken');

        // =============================================================================
        // INDEXEDDB FOR FILE TRANSFER TO APP PAGE
        // =============================================================================

        function openUploadDB() {
            return new Promise((resolve, reject) => {
                const req = indexedDB.open('StatementScanUploads', 1);
                req.onupgradeneeded = e => {
                    e.target.result.createObjectStore('files', { keyPath: 'name' });
                };
                req.onsuccess = e => resolve(e.target.result);
                req.onerror = e => reject(e.target.error);
            });
        }

        async function handleLandingUpload(files) {
            console.log('[Landing] handleLandingUpload called with', files.length, 'files');
            try {
                // Read all file buffers first (before opening transaction)
                const fileData = await Promise.all(files.map(async (file) => ({
                    name: file.name,
                    buffer: await file.arrayBuffer(),
                    type: file.type,
                    timestamp: Date.now()
                })));
                console.log('[Landing] File data prepared:', fileData.map(f => ({ name: f.name, size: f.buffer.byteLength })));

                // Now store all files in IndexedDB
                const db = await openUploadDB();
                console.log('[Landing] IndexedDB opened');
                const tx = db.transaction('files', 'readwrite');
                const store = tx.objectStore('files');

                for (const data of fileData) {
                    store.put(data);
                    console.log('[Landing] Stored file:', data.name);
                }

                // Wait for transaction to complete
                await new Promise((resolve, reject) => {
                    tx.oncomplete = () => {
                        console.log('[Landing] Transaction complete');
                        resolve();
                    };
                    tx.onerror = () => {
                        console.error('[Landing] Transaction error:', tx.error);
                        reject(tx.error);
                    };
                });

                // Verify files were stored
                const verifyTx = db.transaction('files', 'readonly');
                const verifyReq = verifyTx.objectStore('files').getAll();
                verifyReq.onsuccess = () => {
                    console.log('[Landing] Verified stored files:', verifyReq.result.length, verifyReq.result.map(f => f.name));
                };

                // Small delay to ensure IndexedDB write is flushed
                await new Promise(r => setTimeout(r, 100));

                // Redirect to app page
                console.log('[Landing] Redirecting to /app');
                window.location.href = '/app';
            } catch (e) {
                console.error('[Landing] Error storing files for transfer:', e);
                // Fall back to redirecting anyway - app will show empty state
                window.location.href = '/app';
            }
        }

        // Flag to use landing redirect behavior
        let useLandingRedirect = true;

        // =============================================================================
        // ENHANCED PROGRESS TRACKING SYSTEM
        // =============================================================================

        const progressManager = {
            startTime: null,
            currentStage: null,
            totalFiles: 0,
            processedFiles: 0,
            timerInterval: null,

            stages: ['upload', 'parse', 'analyze', 'render'],
            stageProgress: {
                upload: { start: 0, end: 15 },
                parse: { start: 15, end: 60 },
                analyze: { start: 60, end: 85 },
                render: { start: 85, end: 100 }
            },

            start(totalFiles = 1) {
                this.startTime = Date.now();
                this.totalFiles = totalFiles;
                this.processedFiles = 0;
                this.currentStage = null;

                const bar = document.getElementById('uploadProgressBar');
                const container = document.getElementById('uploadProgressContainer');
                const status = document.getElementById('uploadStatus');
                const timer = document.getElementById('uploadTimer');
                const fileCounter = document.getElementById('fileCounter');

                if (container) container.style.display = 'block';
                if (bar) { bar.style.width = '0%'; bar.className = 'progress-fill'; }
                if (status) status.textContent = 'Starting...';
                if (timer) timer.textContent = '0:00';
                if (fileCounter) {
                    fileCounter.textContent = totalFiles > 1 ? `File 1 of ${totalFiles}` : '';
                    fileCounter.style.display = totalFiles > 1 ? 'block' : 'none';
                }

                // Start timer
                this.timerInterval = setInterval(() => {
                    const elapsed = Math.floor((Date.now() - this.startTime) / 1000);
                    const mins = Math.floor(elapsed / 60);
                    const secs = elapsed % 60;
                    if (timer) timer.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
                }, 1000);
            },

            setStage(stage, statusText) {
                this.currentStage = stage;
                const bar = document.getElementById('uploadProgressBar');
                const status = document.getElementById('uploadStatus');

                if (status) status.textContent = statusText || stage;

                const stageInfo = this.stageProgress[stage];
                if (bar && stageInfo) {
                    bar.style.width = stageInfo.start + '%';
                }
            },

            setProgress(percent) {
                const bar = document.getElementById('uploadProgressBar');
                if (bar) bar.style.width = percent + '%';
            },

            fileComplete() {
                this.processedFiles++;
                const fileCounter = document.getElementById('fileCounter');
                if (fileCounter && this.totalFiles > 1) {
                    fileCounter.textContent = `File ${Math.min(this.processedFiles + 1, this.totalFiles)} of ${this.totalFiles}`;
                }
            },

            complete(success = true) {
                const bar = document.getElementById('uploadProgressBar');
                const status = document.getElementById('uploadStatus');

                if (bar) {
                    bar.style.width = '100%';
                    bar.classList.add(success ? 'success' : 'error');
                }
                if (status) status.textContent = success ? 'Complete!' : 'Error occurred';

                clearInterval(this.timerInterval);
            },

            reset() {
                clearInterval(this.timerInterval);
                const container = document.getElementById('uploadProgressContainer');
                if (container) container.style.display = 'none';
            }
        };

        // =============================================================================
        // SETTINGS & PREFERENCES
        // =============================================================================

        const defaultSettings = {
            theme: 'system',
            toastEnabled: true,
            soundEnabled: false,
            exportFormat: 'pdf',
            rememberPortfolios: true,
            confirmDestructive: true
        };

        let appSettings = { ...defaultSettings, ...JSON.parse(localStorage.getItem('appSettings') || '{}') };

        function saveSettings() {
            localStorage.setItem('appSettings', JSON.stringify(appSettings));
        }

        function loadSettings() {
            // No settings modal on landing - just load from storage
        }

        // =============================================================================
        // DARK MODE / THEME MANAGEMENT
        // =============================================================================

        function initTheme() {
            const savedTheme = appSettings.theme || 'system';
            applyTheme(savedTheme);
        }

        function setTheme(theme) {
            appSettings.theme = theme;
            localStorage.setItem('appSettings', JSON.stringify(appSettings));
            applyTheme(theme);
        }

        function applyTheme(theme) {
            const root = document.documentElement;

            if (theme === 'system') {
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                root.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
            } else {
                root.setAttribute('data-theme', theme);
            }
        }

        function toggleTheme() {
            const current = document.documentElement.getAttribute('data-theme');
            const newTheme = current === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
            showToast(`Switched to ${newTheme} mode`, 'info');
        }

        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (appSettings.theme === 'system') {
                applyTheme('system');
            }
        });

        // =============================================================================
        // SCROLL ANIMATIONS (Intersection Observer)
        // =============================================================================

        function initScrollAnimations() {
            const animatedElements = document.querySelectorAll('[data-animate]');

            if ('IntersectionObserver' in window) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('animated');
                            observer.unobserve(entry.target);
                        }
                    });
                }, {
                    threshold: 0.1,
                    rootMargin: '0px 0px -50px 0px'
                });

                animatedElements.forEach(el => observer.observe(el));
            } else {
                animatedElements.forEach(el => el.classList.add('animated'));
            }
        }

        document.addEventListener('DOMContentLoaded', initScrollAnimations);

        // =============================================================================
        // STICKY NAVBAR
        // =============================================================================

        function initStickyNavbar() {
            const navbar = document.querySelector('.top-nav');
            if (!navbar) return;

            let lastScrollY = window.scrollY;

            window.addEventListener('scroll', () => {
                const scrollY = window.scrollY;

                if (scrollY > 50) {
                    navbar.classList.add('navbar-scrolled');
                } else {
                    navbar.classList.remove('navbar-scrolled');
                }

                lastScrollY = scrollY;
            }, { passive: true });
        }

        document.addEventListener('DOMContentLoaded', initStickyNavbar);

        // =============================================================================
        // NAVBAR DROPDOWN & MOBILE MENU
        // =============================================================================

        function closeAllDropdowns() {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                const btn = item.querySelector('.nav-link');
                if (btn) btn.setAttribute('aria-expanded', 'false');
            });
        }

        function initNavDropdowns() {
            const navItems = document.querySelectorAll('.nav-item[data-dropdown]');

            navItems.forEach(item => {
                const btn = item.querySelector('.nav-link');
                const dropdown = item.querySelector('.nav-dropdown');

                item.addEventListener('mouseenter', () => {
                    closeAllDropdowns();
                    item.classList.add('active');
                    if (btn) btn.setAttribute('aria-expanded', 'true');
                });

                item.addEventListener('mouseleave', () => {
                    item.classList.remove('active');
                    if (btn) btn.setAttribute('aria-expanded', 'false');
                });

                if (btn) {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const isActive = item.classList.contains('active');
                        closeAllDropdowns();
                        if (!isActive) {
                            item.classList.add('active');
                            btn.setAttribute('aria-expanded', 'true');
                        }
                    });
                }
            });

            document.addEventListener('click', (e) => {
                if (!e.target.closest('.nav-item')) {
                    closeAllDropdowns();
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeAllDropdowns();
                    closeMobileMenu();
                }
            });
        }

        function openMobileMenu() {
            const overlay = document.getElementById('mobileMenuOverlay');
            if (overlay) {
                overlay.classList.add('open');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeMobileMenu() {
            const overlay = document.getElementById('mobileMenuOverlay');
            if (overlay) {
                overlay.classList.remove('open');
                document.body.style.overflow = '';
            }
        }

        function toggleMobileAccordion(name) {
            const accordion = document.querySelector(`.mobile-accordion[data-accordion="${name}"]`);
            if (accordion) {
                accordion.classList.toggle('open');
            }
        }

        function navScrollToSection(sectionId) {
            const sectionMap = {
                'heroSection': '.hero-section',
                'howItWorksSection': '.how-it-works',
                'previewSection': '.preview-section',
                'valuePropsSection': '.value-props',
                'ctaSection': '.cta-section'
            };

            const selector = sectionMap[sectionId] || `#${sectionId}`;
            const section = document.querySelector(selector);

            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function navScrollToUpload(tabName) {
            const uploadCard = document.querySelector('.upload-card');
            if (uploadCard) {
                uploadCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            setTimeout(() => {
                if (tabName === 'upload') {
                    switchEntryMethod('upload');
                } else if (tabName === 'manual') {
                    switchEntryMethod('manual');
                } else if (tabName === 'connect') {
                    switchEntryMethod('connect');
                }
            }, 300);
        }

        document.addEventListener('DOMContentLoaded', initNavDropdowns);

        // =============================================================================
        // TOAST NOTIFICATION SYSTEM
        // =============================================================================

        const toastIcons = {
            success: `<svg class="toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>
            </svg>`,
            error: `<svg class="toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>
            </svg>`,
            warning: `<svg class="toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                <line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>`,
            info: `<svg class="toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>`
        };

        let toastQueue = [];
        let activeToasts = 0;
        const MAX_TOASTS = 5;

        function showToast(message, type = 'success', options = {}) {
            if (!appSettings.toastEnabled && type !== 'error') return;

            const {
                title = null,
                duration = 4000,
                dismissible = true,
                showProgress = true,
                action = null
            } = options;

            const container = document.getElementById('toastContainer');
            if (!container) return;

            if (activeToasts >= MAX_TOASTS) {
                toastQueue.push({ message, type, options });
                return;
            }

            activeToasts++;

            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;

            let actionHTML = '';
            if (action) {
                actionHTML = `<button class="toast-action">${action.label}</button>`;
            }

            toast.innerHTML = `
                ${toastIcons[type] || toastIcons.info}
                <div class="toast-content">
                    ${title ? `<div class="toast-title">${title}</div>` : ''}
                    <div class="toast-message">${message}</div>
                </div>
                ${actionHTML}
                ${dismissible ? `<button class="toast-close" aria-label="Dismiss">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>` : ''}
                ${showProgress && duration > 0 ? `<div class="toast-progress"><div class="toast-progress-bar" style="animation-duration: ${duration}ms"></div></div>` : ''}
            `;

            if (action) {
                toast.querySelector('.toast-action')?.addEventListener('click', () => {
                    action.callback?.();
                    dismissToast(toast);
                });
            }

            if (dismissible) {
                toast.querySelector('.toast-close')?.addEventListener('click', () => {
                    dismissToast(toast);
                });
            }

            container.appendChild(toast);

            requestAnimationFrame(() => {
                toast.classList.add('show');
            });

            if (duration > 0) {
                setTimeout(() => {
                    dismissToast(toast);
                }, duration);
            }

            return toast;
        }

        function dismissToast(toast) {
            if (!toast || toast.classList.contains('removing')) return;
            toast.classList.add('removing');
            toast.classList.remove('show');

            setTimeout(() => {
                toast.remove();
                activeToasts--;

                if (toastQueue.length > 0) {
                    const next = toastQueue.shift();
                    showToast(next.message, next.type, next.options);
                }
            }, 300);
        }

        // =============================================================================
        // LOADING STATE MANAGEMENT
        // =============================================================================

        let loadingCount = 0;

        function showLoadingOverlay(text = 'Loading...') {
            loadingCount++;
            const overlay = document.getElementById('loadingOverlay');
            const loadingText = document.getElementById('loadingText');
            if (loadingText) loadingText.textContent = text;
            overlay.classList.add('active');
        }

        function hideLoadingOverlay() {
            loadingCount = Math.max(0, loadingCount - 1);
            if (loadingCount === 0) {
                document.getElementById('loadingOverlay').classList.remove('active');
            }
        }

        function setButtonLoading(button, loading, originalText = null) {
            if (loading) {
                button.dataset.originalText = button.textContent;
                button.classList.add('loading');
                button.disabled = true;
            } else {
                button.classList.remove('loading');
                button.disabled = false;
                if (button.dataset.originalText) {
                    button.textContent = button.dataset.originalText;
                }
            }
        }

        function preventDoubleClick(button, duration = 1000) {
            button.disabled = true;
            setTimeout(() => {
                button.disabled = false;
            }, duration);
        }

        // =============================================================================
        // FORM VALIDATION
        // =============================================================================

        function validateInput(input, rules = {}) {
            const value = input.value.trim();
            const formGroup = input.closest('.form-group');
            let isValid = true;
            let errorMessage = '';

            formGroup?.classList.remove('has-error', 'has-success');

            if (rules.required && !value) {
                isValid = false;
                errorMessage = rules.requiredMessage || 'This field is required';
            }

            if (isValid && rules.minLength && value.length < rules.minLength) {
                isValid = false;
                errorMessage = `Must be at least ${rules.minLength} characters`;
            }

            if (isValid && rules.pattern && !rules.pattern.test(value)) {
                isValid = false;
                errorMessage = rules.patternMessage || 'Invalid format';
            }

            if (isValid && rules.custom) {
                const customResult = rules.custom(value);
                if (customResult !== true) {
                    isValid = false;
                    errorMessage = customResult;
                }
            }

            if (formGroup) {
                formGroup.classList.add(isValid ? 'has-success' : 'has-error');

                let errorEl = formGroup.querySelector('.inline-error');
                if (!isValid) {
                    if (!errorEl) {
                        errorEl = document.createElement('div');
                        errorEl.className = 'inline-error';
                        formGroup.appendChild(errorEl);
                    }
                    errorEl.innerHTML = `<svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10"/></svg> ${errorMessage}`;
                } else if (errorEl) {
                    errorEl.remove();
                }
            }

            return isValid;
        }

        function setupSymbolInput(input) {
            input.addEventListener('input', (e) => {
                e.target.value = e.target.value.toUpperCase().replace(/[^A-Z0-9.]/g, '');
            });

            input.addEventListener('blur', (e) => {
                const value = e.target.value.trim();
                if (value) {
                    validateInput(input, {
                        pattern: /^[A-Z]{1,5}(\.[A-Z]{1,2})?$/,
                        patternMessage: 'Enter a valid stock symbol (e.g., AAPL, BRK.B)'
                    });
                }
            });
        }

        function setupValidationClearOnFocus(input) {
            input.addEventListener('focus', () => {
                const formGroup = input.closest('.form-group');
                formGroup?.classList.remove('has-error', 'has-success');
                formGroup?.querySelector('.inline-error')?.remove();
            });
        }

        function shakeElement(element) {
            element.classList.add('has-error');
            element.style.animation = 'shake 0.5s ease';
            setTimeout(() => {
                element.style.animation = '';
            }, 500);
        }

        // =============================================================================
        // KEYBOARD SHORTCUTS
        // =============================================================================

        const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
        const modKey = isMac ? 'metaKey' : 'ctrlKey';

        function initKeyboardShortcuts() {
            document.addEventListener('keydown', (e) => {
                if (e.target.matches('input, textarea, select')) {
                    if (e.key === 'Escape') {
                        e.target.blur();
                    }
                    return;
                }

                if (e.key === 'Escape') {
                    closeAllModals();
                    return;
                }

                if (e[modKey]) {
                    switch (e.key.toLowerCase()) {
                        case 'u':
                            e.preventDefault();
                            document.getElementById('fileInput')?.click();
                            break;
                        case 'd':
                            e.preventDefault();
                            toggleTheme();
                            break;
                    }
                }
            });
        }

        function closeAllModals() {
            document.querySelectorAll('.modal-overlay.active').forEach(modal => {
                modal.classList.remove('active');
            });
        }

        // =============================================================================
        // ACCESSIBILITY - FOCUS MANAGEMENT
        // =============================================================================

        function trapFocus(element) {
            const focusableElements = element.querySelectorAll(
                'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
            );
            const firstFocusable = focusableElements[0];
            const lastFocusable = focusableElements[focusableElements.length - 1];

            firstFocusable?.focus();

            element.addEventListener('keydown', (e) => {
                if (e.key === 'Tab') {
                    if (e.shiftKey) {
                        if (document.activeElement === firstFocusable) {
                            e.preventDefault();
                            lastFocusable?.focus();
                        }
                    } else {
                        if (document.activeElement === lastFocusable) {
                            e.preventDefault();
                            firstFocusable?.focus();
                        }
                    }
                }
            });
        }

        function announceToScreenReader(message) {
            const announcer = document.createElement('div');
            announcer.setAttribute('role', 'status');
            announcer.setAttribute('aria-live', 'polite');
            announcer.className = 'sr-only';
            announcer.textContent = message;
            document.body.appendChild(announcer);
            setTimeout(() => announcer.remove(), 1000);
        }

        // =============================================================================
        // CONNECTION STATUS MONITORING
        // =============================================================================

        let isOnline = navigator.onLine;

        function initConnectionMonitoring() {
            updateConnectionStatus();

            window.addEventListener('online', () => {
                isOnline = true;
                updateConnectionStatus();
                showToast('Connection restored', 'success');
            });

            window.addEventListener('offline', () => {
                isOnline = false;
                updateConnectionStatus();
                showToast('You are offline. Some features may be unavailable.', 'warning', {
                    duration: 0,
                    title: 'No Connection'
                });
            });
        }

        function updateConnectionStatus() {
            const statusEl = document.getElementById('connectionStatus');
            const textEl = document.getElementById('connectionText');

            if (!statusEl || !textEl) return;

            if (isOnline) {
                statusEl.classList.remove('offline');
                textEl.textContent = 'Online';
            } else {
                statusEl.classList.add('offline');
                textEl.textContent = 'Offline';
            }
        }

        // =============================================================================
        // SESSION MANAGEMENT
        // =============================================================================

        let sessionTimeout = null;
        let sessionWarningTimeout = null;
        const SESSION_DURATION = 30 * 60 * 1000;
        const WARNING_BEFORE = 5 * 60 * 1000;

        function startSessionTimer() {
            if (!authToken) return;

            clearTimeout(sessionTimeout);
            clearTimeout(sessionWarningTimeout);

            sessionWarningTimeout = setTimeout(() => {
                showSessionWarning();
            }, SESSION_DURATION - WARNING_BEFORE);

            sessionTimeout = setTimeout(() => {
                handleSessionExpired();
            }, SESSION_DURATION);
        }

        function showSessionWarning() {
            const warningEl = document.getElementById('sessionWarning');
            const timeEl = document.getElementById('sessionTimeLeft');

            if (!warningEl || !timeEl) return;

            warningEl.classList.add('show');

            let timeLeft = WARNING_BEFORE / 1000;
            const interval = setInterval(() => {
                timeLeft--;
                const mins = Math.floor(timeLeft / 60);
                const secs = timeLeft % 60;
                timeEl.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(interval);
                }
            }, 1000);
        }

        function hideSessionWarning() {
            const warningEl = document.getElementById('sessionWarning');
            if (warningEl) warningEl.classList.remove('show');
        }

        function refreshSession() {
            hideSessionWarning();
            startSessionTimer();
            showToast('Session extended', 'success');
        }

        function handleSessionExpired() {
            hideSessionWarning();
            logout();
            showToast('Your session has expired. Please sign in again.', 'warning', {
                title: 'Session Expired',
                duration: 0
            });
        }

        // =============================================================================
        // INITIALIZATION
        // =============================================================================

        function initEnterpriseFeatures() {
            initTheme();
            initKeyboardShortcuts();
            initConnectionMonitoring();

            const symbolInput = document.getElementById('manualSymbol');
            if (symbolInput) {
                setupSymbolInput(symbolInput);
                setupValidationClearOnFocus(symbolInput);
            }

            if (authToken) {
                startSessionTimer();
            }

            loadSettings();
            console.log('Enterprise features initialized');
        }

        document.addEventListener('DOMContentLoaded', initEnterpriseFeatures);

        // =============================================================================
        // LANDING PAGE FUNCTIONS
        // =============================================================================

        function scrollToUpload() {
            const uploadSection = document.getElementById('uploadSection');
            if (uploadSection) {
                uploadSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                uploadSection.style.transition = 'box-shadow 0.3s ease';
                uploadSection.style.boxShadow = '0 0 0 4px rgba(99, 91, 255, 0.3)';
                setTimeout(() => {
                    uploadSection.style.boxShadow = '';
                }, 1500);
            }
        }

        function hideLandingSections() {
            const landingSections = document.getElementById('landingSections');
            if (landingSections) {
                landingSections.style.display = 'none';
            }
        }

        function showLandingSections() {
            const landingSections = document.getElementById('landingSections');
            if (landingSections) {
                landingSections.style.display = 'block';
            }
        }

        function toggleFaq(button) {
            const item = button.closest('.faq-item');
            const isActive = item.classList.contains('active');

            document.querySelectorAll('.faq-item.active').forEach(activeItem => {
                if (activeItem !== item) {
                    activeItem.classList.remove('active');
                }
            });

            item.classList.toggle('active', !isActive);
        }

        // =============================================================================
        // AUTHENTICATION
        // =============================================================================

        function showAuthModal() {
            document.getElementById('authModal').classList.add('active');
        }

        function hideAuthModal() {
            document.getElementById('authModal').classList.remove('active');
            document.getElementById('loginError').style.display = 'none';
            document.getElementById('registerError').style.display = 'none';
        }

        function switchAuthTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            document.querySelector(`.auth-tab[data-tab="${tab}"]`).classList.add('active');
            document.getElementById(tab === 'login' ? 'loginForm' : 'registerForm').classList.add('active');
        }

        async function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const errorEl = document.getElementById('loginError');

            try {
                const res = await fetch(`${API_URL}/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });

                const data = await res.json();

                if (!res.ok) {
                    errorEl.textContent = data.error || 'Login failed';
                    errorEl.style.display = 'block';
                    return;
                }

                authToken = data.access_token;
                currentUser = data.user;
                localStorage.setItem('authToken', authToken);
                hideAuthModal();
                updateAuthUI();
                window.location.href = '/app';
            } catch (err) {
                errorEl.textContent = 'Connection error. Please try again.';
                errorEl.style.display = 'block';
            }
        }

        async function handleRegister(event) {
            event.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const errorEl = document.getElementById('registerError');

            try {
                const res = await fetch(`${API_URL}/auth/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, email, password })
                });

                const data = await res.json();

                if (!res.ok) {
                    errorEl.textContent = data.error || 'Registration failed';
                    errorEl.style.display = 'block';
                    return;
                }

                authToken = data.access_token;
                currentUser = data.user;
                localStorage.setItem('authToken', authToken);
                hideAuthModal();
                updateAuthUI();
                window.location.href = '/app';
            } catch (err) {
                errorEl.textContent = 'Connection error. Please try again.';
                errorEl.style.display = 'block';
            }
        }

        function logout() {
            authToken = null;
            currentUser = null;
            localStorage.removeItem('authToken');
            updateAuthUI();
        }

        function showForgotPassword(event) {
            event.preventDefault();
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.getElementById('forgotPasswordForm').classList.add('active');
            document.getElementById('forgotError').style.display = 'none';
            document.getElementById('forgotSuccess').style.display = 'none';
        }

        function backToLogin(event) {
            event.preventDefault();
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            document.getElementById('loginForm').classList.add('active');
            document.querySelector('.auth-tab[data-tab="login"]').classList.add('active');
        }

        async function handleForgotPassword(event) {
            event.preventDefault();
            const email = document.getElementById('forgotEmail').value;
            const errorEl = document.getElementById('forgotError');
            const successEl = document.getElementById('forgotSuccess');
            const submitBtn = event.target.querySelector('button[type="submit"]');

            errorEl.style.display = 'none';
            successEl.style.display = 'none';
            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';

            try {
                const res = await fetch(`${API_URL}/auth/forgot-password`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });

                const data = await res.json();

                if (!res.ok) {
                    errorEl.textContent = data.error || 'Failed to send reset link';
                    errorEl.style.display = 'block';
                } else {
                    successEl.textContent = data.message || 'If an account exists with that email, a reset link has been sent.';
                    successEl.style.display = 'block';
                    document.getElementById('forgotEmail').value = '';
                }
            } catch (err) {
                errorEl.textContent = 'Connection error. Please try again.';
                errorEl.style.display = 'block';
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Send Reset Link';
            }
        }

        function showResetPasswordModal(token) {
            resetToken = token;
            document.getElementById('resetPasswordModal').classList.add('active');
            document.getElementById('resetError').style.display = 'none';
            document.getElementById('resetSuccess').style.display = 'none';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
        }

        function hideResetPasswordModal() {
            document.getElementById('resetPasswordModal').classList.remove('active');
            const url = new URL(window.location);
            url.searchParams.delete('reset_token');
            window.history.replaceState({}, '', url);
        }

        async function handleResetPassword(event) {
            event.preventDefault();
            const password = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const errorEl = document.getElementById('resetError');
            const successEl = document.getElementById('resetSuccess');
            const submitBtn = event.target.querySelector('button[type="submit"]');

            errorEl.style.display = 'none';
            successEl.style.display = 'none';

            if (password !== confirmPassword) {
                errorEl.textContent = 'Passwords do not match';
                errorEl.style.display = 'block';
                return;
            }

            if (password.length < 6) {
                errorEl.textContent = 'Password must be at least 6 characters';
                errorEl.style.display = 'block';
                return;
            }

            submitBtn.disabled = true;
            submitBtn.textContent = 'Resetting...';

            try {
                const res = await fetch(`${API_URL}/auth/reset-password`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ token: resetToken, password })
                });

                const data = await res.json();

                if (!res.ok) {
                    errorEl.textContent = data.error || 'Failed to reset password';
                    errorEl.style.display = 'block';
                } else {
                    successEl.textContent = data.message || 'Password reset successfully! You can now sign in.';
                    successEl.style.display = 'block';
                    submitBtn.style.display = 'none';

                    setTimeout(() => {
                        hideResetPasswordModal();
                        showAuthModal();
                    }, 3000);
                }
            } catch (err) {
                errorEl.textContent = 'Connection error. Please try again.';
                errorEl.style.display = 'block';
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Reset Password';
            }
        }

        let resetToken = null;

        function updateAuthUI() {
            const authSection = document.getElementById('authSection');

            if (currentUser) {
                const initials = (currentUser.name || currentUser.email || 'U').substring(0, 2).toUpperCase();
                authSection.innerHTML = `
                    <div class="user-menu">
                        <button class="user-btn" onclick="toggleUserDropdown()" aria-haspopup="true" aria-expanded="false">
                            <div class="user-avatar">${initials}</div>
                            <span>${currentUser.name || currentUser.email}</span>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                        </button>
                        <div class="user-dropdown" id="userDropdown" role="menu">
                            <div class="dropdown-item" style="color: var(--text-muted); pointer-events: none;" role="menuitem">
                                ${currentUser.email}
                            </div>
                            <div class="dropdown-divider"></div>
                            <button class="dropdown-item" onclick="window.location.href='/app'; toggleUserDropdown();" role="menuitem">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
                                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                                    <polyline points="9 22 9 12 15 12 15 22"/>
                                </svg>
                                Dashboard
                            </button>
                            <div class="dropdown-divider"></div>
                            <button class="dropdown-item" onclick="logout()" role="menuitem">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px;">
                                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                                    <polyline points="16 17 21 12 16 7"/>
                                    <line x1="21" y1="12" x2="9" y2="12"/>
                                </svg>
                                Sign Out
                            </button>
                        </div>
                    </div>
                `;
                startSessionTimer();
            } else {
                authSection.innerHTML = `
                    <button class="btn btn-secondary" onclick="showAuthModal()">Sign In</button>
                `;
            }
        }

        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('active');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('userDropdown');
            const userBtn = e.target.closest('.user-btn');
            if (!userBtn && dropdown) {
                dropdown.classList.remove('active');
            }
        });

        // Check auth on page load
        async function checkAuth() {
            if (!authToken) return;

            try {
                const res = await fetch(`${API_URL}/auth/me`, {
                    headers: { 'Authorization': `Bearer ${authToken}` }
                });

                if (res.ok) {
                    const data = await res.json();
                    currentUser = data.user;
                    updateAuthUI();
                } else {
                    logout();
                }
            } catch (err) {
                // API might not be available yet, keep token
            }
        }

        // =============================================================================
        // ENTRY METHOD SWITCHING
        // =============================================================================

        function switchEntryMethod(method) {
            document.querySelectorAll('.entry-method-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.method === method);
            });

            document.querySelectorAll('.entry-panel').forEach(panel => {
                panel.classList.remove('active');
            });

            const panelMap = {
                'upload': 'uploadPanel',
                'manual': 'manualPanel',
                'connect': 'connectPanel'
            };
            document.getElementById(panelMap[method])?.classList.add('active');
        }

        // =============================================================================
        // MANUAL ENTRY STUBS (redirect to /app for full functionality)
        // =============================================================================

        let manualHoldings = [];
        let manualInputMode = 'quantity';
        let manualTotalValue = 100000;

        function setInputMode(mode) {
            manualInputMode = mode;
            document.querySelectorAll('.input-mode-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.mode === mode);
            });
        }
        function addManualHolding() { window.location.href = '/app'; }
        function clearManualHoldings() { manualHoldings = []; }
        function updatePortfolioValue() { /* no-op on landing */ }
        function analyzeManualHoldings() { window.location.href = '/app'; }
        function connectPlaidAccount() { window.location.href = '/app'; }
        function downloadRedactedPdf() { window.location.href = '/app'; }

        // =============================================================================
        // MARKET INDICATORS
        // =============================================================================

        async function updateMarketIndicators() {
            try {
                const response = await fetch(`${API_URL}/market`);
                if (!response.ok) throw new Error('Failed to fetch market data');
                const data = await response.json();

                const updateIndicator = (id, value, change, prefix = '', suffix = '') => {
                    const valEl = document.getElementById(id + 'Value');
                    const chgEl = document.getElementById(id + 'Change');
                    if (value !== null && value !== undefined) {
                        valEl.textContent = prefix + value.toLocaleString(undefined, {maximumFractionDigits: 2}) + suffix;
                        if (change !== null && change !== undefined) {
                            chgEl.textContent = `${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
                            const isGood = id === 'vix' ? change <= 0 : change >= 0;
                            chgEl.className = `market-indicator-change ${isGood ? 'up' : 'down'}`;
                        }
                    } else {
                        valEl.textContent = '--';
                        chgEl.textContent = '--';
                    }
                };

                updateIndicator('spy', data.spy?.value, data.spy?.change);
                updateIndicator('qqq', data.qqq?.value, data.qqq?.change);
                updateIndicator('dia', data.dia?.value, data.dia?.change);
                updateIndicator('vix', data.vix?.value, data.vix?.change);
                updateIndicator('tlt', data.tlt?.value, data.tlt?.change, '', '%');
                updateIndicator('gld', data.gld?.value, data.gld?.change, '$');
                updateIndicator('btc', data.btc?.value, data.btc?.change, '$');

            } catch (err) {
                console.error('Failed to fetch market data:', err);
                ['spy', 'qqq', 'dia', 'vix', 'tlt', 'gld', 'btc'].forEach(id => {
                    const valEl = document.getElementById(id + 'Value');
                    const chgEl = document.getElementById(id + 'Change');
                    if (valEl) valEl.textContent = '--';
                    if (chgEl) chgEl.textContent = '--';
                });
            }
        }

        document.addEventListener('DOMContentLoaded', updateMarketIndicators);

        // =============================================================================
        // SERVICE WORKER REGISTRATION
        // =============================================================================

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('Service Worker registered:', registration.scope);

                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    showToast('Update available! Refresh to see changes.', 'info', {
                                        title: 'App Update',
                                        action: {
                                            label: 'Refresh',
                                            callback: () => window.location.reload()
                                        },
                                        duration: 0
                                    });
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }

        // =============================================================================
        // UPLOAD LISTENERS & PAGE INIT
        // =============================================================================

        document.addEventListener('DOMContentLoaded', () => {
            // Drop zone handling
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');

            if (dropZone) {
                dropZone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    dropZone.classList.add('dragover');
                });

                dropZone.addEventListener('dragleave', () => {
                    dropZone.classList.remove('dragover');
                });

                dropZone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    dropZone.classList.remove('dragover');
                    const files = Array.from(e.dataTransfer.files);
                    if (files.length > 0) {
                        handleLandingUpload(files);
                    }
                });

                dropZone.addEventListener('click', () => {
                    fileInput?.click();
                });
            }

            if (fileInput) {
                fileInput.addEventListener('change', (e) => {
                    const files = Array.from(e.target.files);
                    if (files.length > 0) {
                        handleLandingUpload(files);
                    }
                });
            }

            // Check for reset token in URL
            const urlParams = new URLSearchParams(window.location.search);
            const token = urlParams.get('reset_token');
            if (token) {
                showResetPasswordModal(token);
            }

            // Check auth state
            checkAuth();
        });
    </script>

</body>
</html>
